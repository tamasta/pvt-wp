import{_ as f,I as $,o as u,c as p,z as y,b as h,l as C,h as b,i as c,Q as x,d,e as _,w,g,N as O,a as S,k as T,r as P,n as X,t as k,F as B}from"./_plugin-vue_export-helper-D-PsXKsC.js";const{__:N,_x:et,_n:it,_nx:st}=wp.i18n;async function ot(t,e){const i=N("Bad request","uipress-lite"),s=await fetch(t,{method:"POST",headers:{"Content-Length":"0"},body:e});if(!s.ok)return{error:!0,message:i};const n=await s.text(),o=A(n);return o||{error:!0,message:i}}function E(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function nt(){let t=Date.now().toString(16)+Math.random().toString(16).slice(2);return t+=Math.random().toString(16).slice(2)+performance.now().toString(16),(L(3)+t).substring(0,24)}function L(t=4){const e="abcdefghijklmnopqrstuvwxyz";let i="";for(let s=0;s<t;s++){const n=Math.floor(Math.random()*e.length);i+=e[n]}return i}function rt(t,...e){if(!E(t))return!1;Array.isArray(e[0])&&(e=e[0]);for(let i of e)if(t.hasOwnProperty(i))t=t[i];else return!1;return t}function A(t){try{return JSON.parse(t,(e,i)=>i==="uiptrue"?!0:i==="uipfalse"?!1:i==="uipblank"?"":i)}catch{return{}}}function at(t){return JSON.stringify(t,(i,s)=>s==="true"||s===!0?"uiptrue":s==="false"||s===!1?"uipfalse":s===""?"uipblank":s)}function ut(t,e){if(!t)return t;let s=new RegExp("^(?:[a-z+]+:)?//","i").test(t)?new URL(t):new URL(e+t);return s.searchParams.delete("uip-framed-page"),s.searchParams.delete("uip-hide-screen-options"),s.searchParams.delete("uip-hide-help-tab"),s.searchParams.delete("uip-default-theme"),s.searchParams.delete("uip-hide-notices"),s.searchParams.delete("uipid"),s.href.replace(e,"")}const I={props:{pos:{type:String,default:"bottom left"},onOpen:Function,offsetX:{type:Number,default:8},offsetY:{type:Number,default:8},snapX:Array,snapY:Array,shortCut:[Boolean,String,Array],hover:Boolean,disableTeleport:Boolean},data(){return{modelOpen:!1,currentHeight:0,hoverTimeout:!1,pressedKeys:null,position:{left:"auto",right:"auto",top:"auto",bottom:"auto",opacity:0}}},beforeUnmount(){this.removeShortCuts()},mounted(){this.mountShortcut()},methods:{removeShortCuts(){document.removeEventListener("scroll",this.handleScroll,!0),document.body.removeEventListener("click",this.onClickOutside),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)},mountShortcut(){this.shortCut&&(this.pressedKeys=new Set,this.shortcut=[...this.shortCut],window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp))},handleKeyDown(t){this.pressedKeys.add(t.key),this.shortcut.every(i=>this.pressedKeys.has(i))&&this.show()},handleKeyUp(){this.pressedKeys.clear()},resetPosition(){this.position={left:"auto",right:"auto",top:"auto",bottom:"auto",opacity:0}},handleScroll(){this.setPosition()},onClickOutside(t){if(!this.$refs.uipdrop)return this.close();this.$refs.droptrigger.contains(t.target)||this.$refs.uipdrop.contains(t.target)||this.close()},show(){if(this.modelOpen&&!this.hover)return this.close();this.modelOpen=!0,document.addEventListener("scroll",this.handleScroll,!0),this.onOpen&&this.onOpen(),setTimeout(()=>{this.setPosition(),document.body.addEventListener("click",this.onClickOutside)},100)},close(){this.modelOpen=!1,this.position.opacity=0,this.removeShortCuts()},domRectToObject(t){return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}},setPosition(){const t=this.$refs.uipdrop,e=this.$refs.droptrigger;if(!t||!e)return;this.resetPosition();let i=this.domRectToObject(e.getBoundingClientRect());const s=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth;if(this.snapX&&Array.isArray(this.snapX))for(let l of this.snapX){let m=document.querySelector(l);if(!m)continue;let v=m.getBoundingClientRect();i.left=v.left,i.right=v.right;break}let o=this.pos.split(" "),r=o[0],a=o[1];r=="bottom"&&(this.position.top=`${i.bottom+this.offsetY}px`),r=="top"&&(this.position.bottom=`${s-i.top+this.offsetY}px`),r=="left"&&(this.position.right=`${n-i.left+this.offsetX}px`),r=="right"&&(this.position.left=`${i.right+this.offsetX}px`),a=="left"&&(this.position.left=`${i.left}px`),a=="right"&&(this.position.right=`${n-i.right}px`),a=="top"&&(this.position.top=`${i.top}px`),a=="bottom"&&(this.position.bottom=`${s-i.bottom}px`),a=="center"&&(r=="left"||r=="right")&&(this.position.top=`${i.top-t.offsetHeight/2}px`),a=="center"&&(r=="top"||r=="bottom")&&(this.position.left=`${i.left-(t.offsetWidth-e.offsetWidth)/2}px`),$(()=>{let l=t.getBoundingClientRect();l.top<0&&(this.position.top=`${i.top}px`),l.bottom>s&&(this.position.top=`${l.top-(l.bottom-s)-16}px`),l.left<0&&(this.position.left="auto",this.position.right=`${n-t.offsetWidth*2}px`),l.right>n&&(this.position.left=`${n-t.offsetWidth}px`),this.position.opacity=1})},maybeOpen(){this.hover&&(clearTimeout(this.hoverTimeout),this.show())},maybeClose(){this.hover&&(this.hoverTimeout=setTimeout(this.close,400))},clearCloseTimeout(){clearTimeout(this.hoverTimeout)}}};function D(t,e,i,s,n,o){return u(),p("div",{ref:"droptrigger",onMouseenter:e[3]||(e[3]=(...r)=>o.maybeOpen&&o.maybeOpen(...r)),onMouseover:e[4]||(e[4]=r=>o.clearCloseTimeout()),onMouseleave:e[5]||(e[5]=(...r)=>o.maybeClose&&o.maybeClose(...r)),onClick:e[6]||(e[6]=r=>o.show(r))},[y(t.$slots,"trigger"),(u(),h(x,{to:"body",disabled:i.disableTeleport},[n.modelOpen&&t.$slots.content?(u(),p("div",{key:0,onMouseleave:e[0]||(e[0]=(...r)=>o.maybeClose&&o.maybeClose(...r)),onMouseover:e[1]||(e[1]=r=>o.clearCloseTimeout()),onClick:e[2]||(e[2]=C(()=>{},["stop"])),ref:"uipdrop",class:"uip-z-index-9 uip-position-fixed uip-shadow uip-background-default uip-border-rounder uip-body-font uip-dropdown-container",style:b([{"border-radius":"calc(var(--uip-border-radius-large) + var(--uip-padding-xxs))"},n.position])},[y(t.$slots,"content")],36)):c("",!0)],8,["disabled"]))],544)}const lt=f(I,[["render",D]]),M={data(){return{notifications:[]}},mounted(){this.uipApp.notifications=this},methods:{notify(t,e,i,s,n){return s=typeof s>"u"?!0:s,this.create({title:t,status:i,message:e,dismissable:s,loader:n})},create(t={}){if(t.uid=this.createUID(),this.notifications.push(t),!t.dismissable)return t.uid;setTimeout(()=>this.remove(t.uid),6e3)},remove(t){const e=this.notifications.findIndex(i=>i.uid==t);e>-1&&this.notifications.splice(e,1)},returnIcon(t){let e="info";return t=="success"&&(e="done"),t=="error"&&(e="close"),t=="warning"&&(e="priority_high"),e},returnClass(t){return t?"uip-"+t:"uip-default"}}},K={class:"notification-drop uip-dark-mode uip-text-normal",id:"notification-drop"},Y={class:"uip-flex uip-gap-s uip-flex-center"},z={class:"uip-border-rounder uip-notification-status uip-flex uip-flex-middle uip-padding-xxxs uip-flex-center"},R={class:"uip-flex-grow uip-column-gap-xs"},V={class:"uip-text-emphasis uip-text-emphasis"},W={key:0,class:"uip-text-s uip-text-muted uip-max-w-500"},H={key:0,class:"uip-position-relative"},U=d("span",{class:"uip-load-spinner"},null,-1),q=[U],F=["onClick"];function J(t,e,i,s,n,o){const r=S("AppIcon");return u(),h(x,{to:"body"},[d("div",K,[(u(),h(_("style"),null,{default:w(()=>[T(" .list-enter-active, .list-leave-active { transition: all 0.5s ease; } .list-enter-from, .list-leave-to { opacity: 0 !important; transform: translateX(30px); } ")]),_:1})),g(O,{name:"list"},{default:w(()=>[(u(!0),p(B,null,P(n.notifications,(a,l)=>(u(),p("div",{key:l,class:X(["uip-notification",o.returnClass(a.status)])},[d("div",Y,[d("div",z,[g(r,{icon:o.returnIcon(a.status),class:"uip-text-inverse uip-text-center"},null,8,["icon"])]),d("div",R,[d("div",V,k(a.title),1),a.message?(u(),p("div",W,k(a.message),1)):c("",!0)]),a.loader?(u(),p("div",H,q)):c("",!0),a.dismissable?(u(),p("div",{key:1,class:"uip-link-muted uip-background-default uip-padding-xxs uip-border-rounder",onClick:m=>o.remove(a.uid)},[g(r,{icon:"close"})],8,F)):c("",!0)])],2))),128))]),_:1})])])}const pt=f(M,[["render",J]]),G={props:{aboveClick:Boolean,disableTeleport:Boolean,offsetY:{default:0,type:Number},offsetX:{default:0,type:Number},snapX:Array,snapY:Array,snapRight:Boolean},data(){return{isVisible:!1,position:{y:0,x:0}}},methods:{show(t,e){let i={clientX:t.clientX,clientY:t.clientY};if(e&&(i=e),this.snapX&&Array.isArray(this.snapX))for(let s of this.snapX){let n=document.querySelector(s);if(!n)continue;let o=n.getBoundingClientRect();i.clientX=o.left;break}this.position.x=i.clientX+this.offsetX,this.position.y=i.clientY+this.offsetY,this.isVisible=!0,requestAnimationFrame(()=>{this.isVisible&&(this.setupClickOutside(),this.checkForOffScreen())})},checkForOffScreen(){let t=this.$refs.contextmenu.getBoundingClientRect(),e=t.bottom,i=t.right,s=t.left;e>window.innerHeight&&(this.position.y=this.position.y-(e-window.innerHeight)-20),i>window.innerWidth&&(this.position.x=this.position.x-(i-window.innerWidth)-40),s<0&&(this.snapRight?this.position.x=400:this.position.x=32)},close(){this.removeClickOutside(),this.isVisible=!1},setupClickOutside(){document.addEventListener("click",this.onClickOutside),document.addEventListener("contextmenu",this.onClickOutside)},removeClickOutside(){document.removeEventListener("click",this.onClickOutside),document.removeEventListener("contextmenu",this.onClickOutside)},onClickOutside(t){if(!this.$refs.contextmenu){this.close();return}this.$refs.contextmenu.contains(t.target)||this.close()},returnPosition(){let t="";if(this.snapRight&&(t="transform:translateX(-100%)"),!this.aboveClick)return`top: ${this.position.y}px; left: ${this.position.x}px;${t}`;let e=window.innerHeight-this.position.y;if(this.aboveClick)return`bottom: ${e}px; left: ${this.position.x}px;${t}`}}};function Q(t,e,i,s,n,o){return u(),h(x,{to:"body",disabled:i.disableTeleport},[n.isVisible?(u(),p("div",{key:0,ref:"contextmenu",style:b([{"border-radius":"calc(var(--uip-border-radius-large) + var(--uip-padding-xs))"},o.returnPosition()]),onClick:e[0]||(e[0]=C(()=>{},["prevent","stop"])),class:"uip-background-default uip-flex uip-flex-column uip-text-normal uip-position-fixed uip-modal-body uip-z-index-99 uip-shadow uip-fade-in uip-body-font"},[y(t.$slots,"default")],4)):c("",!0)],8,["disabled"])}const dt=f(G,[["render",Q]]),j={props:{icon:String},data(){return{}},computed:{returnIconStyle(){let e=`${this.uipressLitePath}assets/icons/${this.icon}.svg`;return`display:block;
					height:1em;
					width:1em;
					min-height:1em;
					min-width:1em;
					background-color:currentColor;
					-webkit-mask: url(${e}) no-repeat center;
					-webkit-mask-size: contain;
					mask: url(${e}) no-repeat center;
					mask-size: contain;`}}};function Z(t,e,i,s,n,o){return u(),p("span",{style:b(o.returnIconStyle)},null,4)}const ct=f(j,[["render",Z]]);export{dt as C,lt as D,ct as I,pt as N,ut as a,nt as c,rt as h,E as i,at as p,ot as s,A as u};
