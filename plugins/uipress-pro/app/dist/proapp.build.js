const __vite__fileDeps=["assets/mapbox-gl-wnhiI-k1.js","assets/_commonjsHelpers-Cpj98o6Y.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var xt=Object.defineProperty;var _t=(e,t,i)=>t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var y=(e,t,i)=>(_t(e,typeof t!="symbol"?t+"":t,i),i);import{_ as tt,o as h,c as R,F as Oe,r as ct,a as ee,b as M,t as P,w as Ce,d as c,e as z,f as Xe,v as et,g as Ae,n as qe,h as wt,i as Q,j as kt}from"./assets/_plugin-vue_export-helper-D-PsXKsC.js";import{h as d}from"./assets/html-D5-BrdNJ.js";import{_ as Ie}from"./assets/preload-helper-DMhj2xP_.js";const{__:N,_x:Ks,_n:Hs,_nx:Gs}=wp.i18n,Dt={name:N("Modal","uipress-pro"),moduleName:"uip-block-modal",description:N("Outputs a modal block with customisable content","uipress-pro"),category:N("Layout","uipress-pro"),group:"layout",premium:!0,path:uipProPath+"assets/js/uip/blocks/layout/modal.min.js",icon:"open_in_new",settings:{},content:[],optionsEnabled:[{name:"block",label:N("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",uniqueKey:"buttonText",componentName:"uip-dynamic-input",label:N("Trigger text","uipress-pro"),value:{string:N("Press me","uipress-pro"),dynamic:!1,dynamicKey:"",dynamicPos:"left"}},{option:"iconSelect",componentName:"icon-select",label:N("Icon","uipress-pro")},{option:"iconPosition",label:N("Icon position","uipress-pro"),componentName:"choice-select",args:{options:{left:{value:"left",label:N("Left","uipress-lite")},right:{value:"right",label:N("Right","uipress-lite")}}}},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"closeOnPageChange",args:{options:{false:{value:!1,label:N("Disabled","uipress-lite")},true:{value:!0,label:N("Enabled","uipress-lite")}}},label:N("Close on page change","uipress-lite")},{option:"keyboardShortcut",componentName:"keyboard-shortcut",label:N("Keyboard shortcut","uipress-lite")}]},{name:"style",label:N("Style","uipress-lite"),icon:"palette",styleType:"style"},{name:"trigger",label:N("Trigger style","uipress-pro"),icon:"palette",styleType:"style",class:".uip-panel-trigger"},{name:"hover",label:N("Trigger hover styles","uipress-pro"),icon:"ads_click",styleType:"style",class:".uip-panel-trigger:hover"},{name:"active",label:N("Trigger active styles","uipress-pro"),icon:"ads_click",styleType:"style",class:".uip-panel-trigger:active"},{name:"modalBody",label:N("Modal body","uipress-pro"),icon:"padding",styleType:"style",class:".uip-modal-body"}]},At={props:{keys:{type:Array,required:!0}},data(){return{shortcutKeys:["Enter"," ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown"],shortcutKeysIcons:[{key:"Enter",icon:"keyboard_return"},{key:" ",icon:"space_bar"},{key:"ArrowLeft",icon:"keyboard_arrow_left"},{key:"ArrowUp",icon:"keyboard_arrow_up"},{key:"ArrowRight",icon:"keyboard_arrow_right"},{key:"ArrowDown",icon:"keyboard_arrow_down"}]}},methods:{isShortcutKey(e){return this.shortcutKeys.includes(e)},getShortcutKeyIcon(e){const t=this.shortcutKeysIcons.find(i=>i.key===e);return t?t.icon:""}}},Ct={class:"uip-flex uip-flex-row uip-padding-left-xxxs uip-padding-right-xxxs uip-border uip-border-round uip-text-s uip-flex-row uip-inline-flex uip-flex-center"},St={key:6,class:"uip-text-muted uip-text-uppercase",style:{"line-height":"16px","font-size":"11px"}};function Tt(e,t,i,a,s,r){const n=ee("AppIcon");return h(),R("span",Ct,[(h(!0),R(Oe,null,ct(i.keys,(o,p)=>(h(),R(Oe,{key:p},[o==="Meta"?(h(),M(n,{key:0,class:"uip-text-muted",icon:"keyboard_command_key"})):o==="Alt"?(h(),M(n,{key:1,class:"uip-text-muted",icon:"keyboard_option_key"})):o==="Shift"?(h(),M(n,{key:2,class:"uip-text-muted",icon:"shift"})):o==="Control"?(h(),M(n,{key:3,class:"uip-text-muted",icon:"keyboard_control_key"})):o==="Backspace"?(h(),M(n,{key:4,class:"uip-text-muted",icon:"backspace"})):r.isShortcutKey(o)?(h(),M(n,{key:5,class:"uip-text-muted",icon:r.getShortcutKeyIcon(o)},null,8,["icon"])):(h(),R("span",St,P(o),1))],64))),128))])}const dt=tt(At,[["render",Tt]]);wp.i18n;const Rt={components:{KeyShortcuts:dt},props:{display:String,name:String,block:Object},data(){return{loading:!0,shortCut:[],pressedKeys:!1,rendered:!1}},created(){},mounted(){this.rendered=!0,console.log(this.$refs)},beforeUnmount(){document.removeEventListener("uipress/app/page/load/finish",this.handlePageChange),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)},computed:{closeOnPageChange(){let e=this.get_block_option(this.block,"block","closeOnPageChange");return e?this.isObject(e)?!!e.value:e:!1},returnIcon(){let e=this.get_block_option(this.block,"block","iconSelect");return e?this.isObject(e)?e.value?e.value:"":e:""},returnTitle(){const e=this.get_block_option(this.block,"block","modalTitle",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnText(){const e=this.get_block_option(this.block,"block","buttonText",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},getShortcut(){const e=this.getShortcutValue;return Array.isArray(e)?e:[]},getShortcutValue(){const e=this.get_block_option(this.block,"block","keyboardShortcut");if(this.isObject(e)){if(!e.enabled||!e.display||!e.selected)return!1;if(!(e.selected.length<1))return e.selected}},returnClasses(){const e=this.get_block_option(this.block,"block","iconPosition");if(e&&(!this.isObject(e)&&e=="right"||e.value&&e.value=="right"))return"uip-flex-reverse"}},methods:{mountListeners(){document.addEventListener("uipress/app/page/load/finish",this.handlePageChange)},mountShortcut(){this.getShortcutValue&&(this.pressedKeys=new Set,this.shortcut=[...this.getShortcutValue],window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp))},handleKeyDown(e){this.pressedKeys.add(e.key),this.shortcut.every(i=>this.pressedKeys.has(i))&&this.$refs.modal.open()},handleKeyUp(){this.pressedKeys.clear()},handlePageChange(){this.closeOnPageChange&&this.$refs.modal.close()},maybeBlur(){this.$refs.trigger&&this.$refs.trigger.blur()},returnPublicMethods(){return["show","close"]},show(){console.log(this.$refs.modal),this.$refs.modal.open()},close(){this.$refs.modal.close()}},template:d` <button
    v-if="rendered"
    ref="trigger"
    class="uip-button-default uip-flex uip-gap-xxs uip-flex-center uip-panel-trigger"
    :class="returnClasses"
    @click="
      () => {
        maybeBlur();
        show();
      }
    "
  >
    <AppIcon :icon="returnIcon" v-if="returnIcon" />
    <span class="uip-flex-grow" v-if="returnText != ''">{{ returnText }}</span>

    <KeyShortcuts v-if="getShortcut" :keys="getShortcut" />

    <uipModal ref="modal">
      <uip-content-area :content="block.content" :returnData="(data) => (block.content = data)" />
    </uipModal>
  </button>`},Pt={metadata:Dt,component:Rt},{__:q,_x:Ys,_n:Js,_nx:zs}=wp.i18n,Mt={name:q("Checkbox","uipress-pro"),moduleName:"uip-checkbox-input",description:q("A checkbox block with support for multiple options. For use with the form block","uipress-pro"),category:q("Form","uipress-pro"),group:"form",premium:!0,path:uipProPath+"assets/js/uip/blocks/inputs/checkbox-input.min.js",icon:"check_box",settings:{},optionsEnabled:[{name:"block",label:q("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"inputLabel",label:q("Label","uipress-pro"),value:{string:q("Select","uipress-pro")}},{option:"textField",componentName:"uip-dynamic-input",uniqueKey:"inputName",label:q("Meta key","uipress-pro"),args:{metaKey:!0}},{option:"selectOptionCreator",componentName:"select-option-builder",uniqueKey:"selectOptions",label:q("Select options","uipress-pro")},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inputRequired",args:{options:{false:{value:!1,label:q("No","uipress-lite")},true:{value:!0,label:q("Yes","uipress-lite")}}},label:q("Required field","uipress-lite"),value:{value:!1}}]},{name:"container",label:q("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:q("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"inputStyle",label:q("Select style","uipress-pro"),icon:"input",styleType:"style",class:".uip-input"},{name:"label",label:q("Label","uipress-pro"),icon:"label",styleType:"style",class:".uip-input-label"}]},{__:Nt,_x:Ws,_n:Qs,_nx:Zs}=wp.i18n,Lt={props:{display:String,name:String,block:Object},data(){return{formData:{},loading:!0,availableOptions:[],arrayString:"",populated:this.returnPopulated,strings:{placeholder:Nt("Input placeholder...","uipress-pro")}}},mounted(){document.addEventListener("uipress/app/forms/change",this.handleFormChange)},beforeUnmount(){document.removeEventListener("uipress/app/forms/change",this.handleFormChange)},computed:{returnPlaceHolder(){const e=this.get_block_option(this.block,"block","inputPlaceHolder",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnLabel(){const e=this.get_block_option(this.block,"block","inputLabel",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnRequired(){let e=this.get_block_option(this.block,"block","inputRequired");return this.isObject(e)?e.value:e},returnName(){return this.get_block_option(this.block,"block","inputName")},returnOptions(){let e=this.get_block_option(this.block,"block","selectOptions");return this.availableOptions=e.options,this.availableOptions},returnPopulated(){if(this.returnName in this.formData)return this.formData[this.returnName]}},methods:{handleFormChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.formData=e.detail.formData)},formatChange(e){let t;try{t=JSON.parse(this.arrayString)}catch{t=[]}if(Array.isArray(t)||(t=[]),t.includes(e.name)){let i=t.indexOf(e.name);t.splice(i,1)}else t.push(e.name);this.arrayString=JSON.stringify(t)},ifChecked(e){let t;try{t=JSON.parse(this.arrayString)}catch{t=[]}return Array.isArray(t)||(t=[]),!!t.includes(e.name)}},template:d` <div class="uip-flex uip-flex-column">
    <span class="uip-input-label uip-text-muted uip-margin-bottom-xxs">{{returnLabel}}</span>

    <input v-model="arrayString" type="text" :name="returnName" :value-holder="returnPopulated" :required="returnRequired" style="opacity:0;max-height:0;min-height:0;overflow:hidden;" />
    <div class="uip-flex uip-flex-column uip-row-gap-xxs">
      <template v-for="(item, index) in returnOptions">
        <label class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center">
          <input class="uip-checkbox" type="checkbox" @change="formatChange(item)" :checked="ifChecked(item)" :key="index" />
          <div>{{item.label}}</div>
        </label>
      </template>
    </div>
  </div>`},$t={metadata:Mt,component:Lt},{__:F,_x:Xs,_n:er,_nx:tr}=wp.i18n,Et={name:F("Colour select","uipress-pro"),moduleName:"uip-colour-select-input",description:F("Outputs a colour select input. For use with the form block","uipress-pro"),category:F("Form","uipress-pro"),group:"form",premium:!0,icon:"palette",settings:{},optionsEnabled:[{name:"block",label:F("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"inputLabel",label:F("Label","uipress-pro"),value:{string:F("Select","uipress-pro")}},{option:"textField",componentName:"uip-dynamic-input",uniqueKey:"inputName",label:F("Meta key","uipress-pro"),args:{metaKey:!0}},{option:"title",componentName:"uip-dynamic-input",uniqueKey:"inputPlaceHolder",label:F("Placeholder","uipress-lite"),value:{string:F("Select colour...","uipress-lite")}},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inputRequired",args:{options:{false:{value:!1,label:F("No","uipress-lite")},true:{value:!0,label:F("Yes","uipress-lite")}}},label:F("Required field","uipress-lite"),value:{value:!1}}]},{name:"container",label:F("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:F("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"inputStyle",label:F("Select area","uipress-pro"),icon:"input",styleType:"style",class:".uip-image-select"},{name:"label",label:F("Label","uipress-pro"),icon:"label",styleType:"style",class:".uip-input-label"}]},{__:Ve,_x:ir,_n:ar,_nx:sr}=wp.i18n,Ot={props:{display:String,name:String,block:Object},data(){return{loading:!0,availableOptions:[],img:{},colourSelected:"",formData:{},preFillSet:!1,strings:{placeholder:Ve("Input placeholder...","uipress-pro"),replace:Ve("Replace","uipress-pro"),chooseImage:Ve("Add image","uipress-lite")}}},mounted(){document.addEventListener("uipress/app/forms/change",this.handleFormChange)},beforeUnmount(){document.removeEventListener("uipress/app/forms/change",this.handleFormChange)},computed:{returnPlaceHolder(){const e=this.get_block_option(this.block,"block","inputPlaceHolder",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnLabel(){const e=this.get_block_option(this.block,"block","inputLabel",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnRequired(){let e=this.get_block_option(this.block,"block","inputRequired");return this.isObject(e)?e.value:e},returnName(){return this.get_block_option(this.block,"block","inputName")},returnOptions(){let e=this.get_block_option(this.block,"block","selectOptions");return this.availableOptions=e.options,this.availableOptions},returnPopulated(){if(this.returnName in this.formData)return this.formData[this.returnName]},returnValue(){const e=this.colourSelected?this.colourSelected:this.returnPopulated;return e||""}},methods:{handleFormChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.formData=e.detail.formData)}},template:d`
    <div class="uip-flex uip-flex-column">
      <div class="uip-input-label uip-text-muted uip-margin-bottom-xxs">{{returnLabel}}</div>
      <input v-model="colourSelected" type="text" :name="returnName" style="opacity:0;max-height:0;min-height:0;overflow:hidden;" :required="returnRequired" />
      <color-select :args="{hasStyleManager:false}" :value="{value:returnValue}" :returnData="(data)=>{ colourSelected = data.value}" />
    </div>
  `},It={metadata:Et,component:Ot},{__:L,_x:rr,_n:nr,_nx:or}=wp.i18n,Ft={name:L("Date range","uipress-pro"),moduleName:"uip-date-range",description:L("Outputs a date picker that can be either a single date or date range.","uipress-pro"),category:L("Form","uipress-pro"),group:"form",premium:!0,path:uipProPath+"assets/js/uip/blocks/inputs/date-range.min.js",icon:"date_range",settings:{},optionsEnabled:[{name:"block",label:L("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"inputLabel",label:L("Label","uipress-pro"),value:{string:L("Text input","uipress-pro")}},{option:"textField",componentName:"uip-dynamic-input",uniqueKey:"inputName",label:L("Meta key","uipress-pro"),args:{metaKey:!0}},{option:"title",componentName:"uip-dynamic-input",uniqueKey:"inputPlaceHolder",label:L("Placeholder","uipress-pro"),value:{string:L("Placeholder text...","uipress-pro")}},{option:"trueFalse",componentName:"choice-select",uniqueKey:"dateRange",label:L("Date range","uipress-pro"),args:{options:{false:{value:!1,label:L("No","uipress-lite")},true:{value:!0,label:L("Yes","uipress-lite")}}}},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inputRequired",args:{options:{false:{value:!1,label:L("No","uipress-lite")},true:{value:!0,label:L("Yes","uipress-lite")}}},label:L("Required field","uipress-lite"),value:{value:!1}}]},{name:"container",label:L("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:L("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"inputStyle",label:L("Input style","uipress-pro"),icon:"input",styleType:"style",class:".uip-date-input"},{name:"label",label:L("Label","uipress-pro"),icon:"label",styleType:"style",class:".uip-input-label"}]},E=class E extends Date{constructor(i=null,a="YYYY-MM-DD",s="en-US"){super(E.parseDateTime(i,a,s));y(this,"lang");this.lang=s}static parseDateTime(i,a="YYYY-MM-DD",s="en-US"){if(!i)return new Date(new Date().setHours(0,0,0,0));if(i instanceof E)return i.toJSDate();if(i instanceof Date)return i;if(/^-?\d{10,}$/.test(String(i)))return new Date(Number(i));if(typeof i=="string"){const r=[];let n=null;for(;(n=E.regex.exec(a))!=null;)n[1]!=="\\"&&r.push(n);if(r.length){const o={year:null,month:null,shortMonth:null,longMonth:null,day:null,hour:0,minute:0,second:0,ampm:null,value:""};r[0].index>0&&(o.value+=".*?");for(const[m,v]of Object.entries(r)){const W=Number(m),{group:te,pattern:u}=E.formatPatterns(v[0],s);o[te]=W+1,o.value+=u,o.value+=".*?"}const p=new RegExp(`^${o.value}$`);if(p.test(i)){const m=p.exec(i),v=Number(m[o.year]);let W=null;o.month?W=Number(m[o.month])-1:o.shortMonth?W=E.shortMonths(s).indexOf(m[o.shortMonth]):o.longMonth&&(W=E.longMonths(s).indexOf(m[o.longMonth]));const te=Number(m[o.day])||1,u=Number(m[o.hour]);let K=Number.isNaN(u)?0:u;const me=Number(m[o.minute]),yt=Number.isNaN(me)?0:me,rt=Number(m[o.second]),vt=Number.isNaN(rt)?0:rt,nt=m[o.ampm];return nt&&nt==="PM"&&(K+=12,K===24&&(K=0)),new Date(v,W,te,K,yt,vt,0)}}}return new Date(new Date().setHours(0,0,0,0))}static shortMonths(i){return E.MONTH_JS.map(a=>new Date(2019,a).toLocaleString(i,{month:"short"}))}static longMonths(i){return E.MONTH_JS.map(a=>new Date(2019,a).toLocaleString(i,{month:"long"}))}static formatPatterns(i,a){switch(i){case"YY":case"YYYY":return{group:"year",pattern:`(\\d{${i.length}})`};case"M":return{group:"month",pattern:"(\\d{1,2})"};case"MM":return{group:"month",pattern:"(\\d{2})"};case"MMM":return{group:"shortMonth",pattern:`(${E.shortMonths(a).join("|")})`};case"MMMM":return{group:"longMonth",pattern:`(${E.longMonths(a).join("|")})`};case"D":return{group:"day",pattern:"(\\d{1,2})"};case"DD":return{group:"day",pattern:"(\\d{2})"};case"h":case"H":return{group:"hour",pattern:"(\\d{1,2})"};case"hh":case"HH":return{group:"hour",pattern:"(\\d{2})"};case"m":return{group:"minute",pattern:"(\\d{1,2})"};case"mm":return{group:"minute",pattern:"(\\d{2})"};case"s":return{group:"second",pattern:"(\\d{1,2})"};case"ss":return{group:"second",pattern:"(\\d{2})"};case"a":case"A":return{group:"ampm",pattern:"(AM|PM|am|pm)"}}}getWeek(i){const a=new Date(this.midnight_ts(this)),s=(this.getDay()+(7-i))%7;a.setDate(a.getDate()-s);const r=a.getTime();return a.setMonth(0,1),a.getDay()!==i&&a.setMonth(0,1+(4-a.getDay()+7)%7),1+Math.ceil((r-a.getTime())/6048e5)}clone(){return new E(this)}toJSDate(){return new Date(this)}inArray(i,a="[]"){return i.some(s=>s instanceof Array?this.isBetween(s[0],s[1],a):this.isSame(s,"day"))}isBetween(i,a,s="()"){switch(s){default:case"()":return this.midnight_ts(this)>this.midnight_ts(i)&&this.midnight_ts(this)<this.midnight_ts(a);case"[)":return this.midnight_ts(this)>=this.midnight_ts(i)&&this.midnight_ts(this)<this.midnight_ts(a);case"(]":return this.midnight_ts(this)>this.midnight_ts(i)&&this.midnight_ts(this)<=this.midnight_ts(a);case"[]":return this.midnight_ts()>=this.midnight_ts(i)&&this.midnight_ts()<=this.midnight_ts(a)}}isBefore(i,a="days"){switch(a){case"day":case"days":return new Date(i.getFullYear(),i.getMonth(),i.getDate()).getTime()>new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(i.getFullYear(),i.getMonth(),1).getTime()>new Date(this.getFullYear(),this.getMonth(),1).getTime();case"year":case"years":return i.getFullYear()>this.getFullYear()}throw new Error("isBefore: Invalid unit!")}isSameOrBefore(i,a="days"){switch(a){case"day":case"days":return new Date(i.getFullYear(),i.getMonth(),i.getDate()).getTime()>=new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(i.getFullYear(),i.getMonth(),1).getTime()>=new Date(this.getFullYear(),this.getMonth(),1).getTime()}throw new Error("isSameOrBefore: Invalid unit!")}isAfter(i,a="days"){switch(a){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>new Date(i.getFullYear(),i.getMonth(),i.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>new Date(i.getFullYear(),i.getMonth(),1).getTime();case"year":case"years":return this.getFullYear()>i.getFullYear()}throw new Error("isAfter: Invalid unit!")}isSameOrAfter(i,a="days"){switch(a){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>=new Date(i.getFullYear(),i.getMonth(),i.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>=new Date(i.getFullYear(),i.getMonth(),1).getTime()}throw new Error("isSameOrAfter: Invalid unit!")}isSame(i,a="days"){switch(a){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()===new Date(i.getFullYear(),i.getMonth(),i.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()===new Date(i.getFullYear(),i.getMonth(),1).getTime()}throw new Error("isSame: Invalid unit!")}add(i,a="days"){switch(a){case"day":case"days":this.setDate(this.getDate()+i);break;case"month":case"months":this.setMonth(this.getMonth()+i)}return this}subtract(i,a="days"){switch(a){case"day":case"days":this.setDate(this.getDate()-i);break;case"month":case"months":this.setMonth(this.getMonth()-i)}return this}diff(i,a="days"){switch(a){default:case"day":case"days":return Math.round((this.midnight_ts()-this.midnight_ts(i))/864e5);case"month":case"months":let s=12*(i.getFullYear()-this.getFullYear());return s-=i.getMonth(),s+=this.getMonth(),s}}format(i,a="en-US"){let s="";const r=[];let n=null;for(;(n=E.regex.exec(i))!=null;)n[1]!=="\\"&&r.push(n);if(r.length){r[0].index>0&&(s+=i.substring(0,r[0].index));for(const[o,p]of Object.entries(r)){const m=Number(o);s+=this.formatTokens(p[0],a),r[m+1]&&(s+=i.substring(p.index+p[0].length,r[m+1].index)),m===r.length-1&&(s+=i.substring(p.index+p[0].length))}}return s.replace(/\\/g,"")}midnight_ts(i){return i?new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0).getTime():new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0,0).getTime()}formatTokens(i,a){switch(i){case"YY":return String(this.getFullYear()).slice(-2);case"YYYY":return String(this.getFullYear());case"M":return String(this.getMonth()+1);case"MM":return`0${this.getMonth()+1}`.slice(-2);case"MMM":return E.shortMonths(a)[this.getMonth()];case"MMMM":return E.longMonths(a)[this.getMonth()];case"D":return String(this.getDate());case"DD":return`0${this.getDate()}`.slice(-2);case"H":return String(this.getHours());case"HH":return`0${this.getHours()}`.slice(-2);case"h":return String(this.getHours()%12||12);case"hh":return`0${this.getHours()%12||12}`.slice(-2);case"m":return String(this.getMinutes());case"mm":return`0${this.getMinutes()}`.slice(-2);case"s":return String(this.getSeconds());case"ss":return`0${this.getSeconds()}`.slice(-2);case"a":return this.getHours()<12||this.getHours()===24?"am":"pm";case"A":return this.getHours()<12||this.getHours()===24?"AM":"PM";default:return""}}};y(E,"regex",/(\\)?(Y{2,4}|M{1,4}|D{1,2}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|A|a)/g),y(E,"MONTH_JS",[0,1,2,3,4,5,6,7,8,9,10,11]);let f=E;class jt{constructor(t){y(this,"picker");this.picker=t}render(t,i){t||(t=new f),t.setDate(1),t.setHours(0,0,0,0),typeof this[`get${i}View`]=="function"&&this[`get${i}View`](t)}getContainerView(t){this.picker.ui.container.innerHTML="",this.picker.options.header&&this.picker.trigger("render",{date:t.clone(),view:"Header"}),this.picker.trigger("render",{date:t.clone(),view:"Main"}),this.picker.options.autoApply||this.picker.trigger("render",{date:t.clone(),view:"Footer"})}getHeaderView(t){const i=document.createElement("header");this.picker.options.header instanceof HTMLElement&&i.appendChild(this.picker.options.header),typeof this.picker.options.header=="string"&&(i.innerHTML=this.picker.options.header),this.picker.ui.container.appendChild(i),this.picker.trigger("view",{target:i,date:t.clone(),view:"Header"})}getMainView(t){const i=document.createElement("main");this.picker.ui.container.appendChild(i);const a=document.createElement("div");a.className=`calendars grid-${this.picker.options.grid}`;for(let s=0;s<this.picker.options.calendars;s++){const r=document.createElement("div");r.className="calendar",a.appendChild(r);const n=this.getCalendarHeaderView(t.clone());r.appendChild(n),this.picker.trigger("view",{date:t.clone(),view:"CalendarHeader",index:s,target:n});const o=this.getCalendarDayNamesView();r.appendChild(o),this.picker.trigger("view",{date:t.clone(),view:"CalendarDayNames",index:s,target:o});const p=this.getCalendarDaysView(t.clone());r.appendChild(p),this.picker.trigger("view",{date:t.clone(),view:"CalendarDays",index:s,target:p});const m=this.getCalendarFooterView(this.picker.options.lang,t.clone());r.appendChild(m),this.picker.trigger("view",{date:t.clone(),view:"CalendarFooter",index:s,target:m}),this.picker.trigger("view",{date:t.clone(),view:"CalendarItem",index:s,target:r}),t.add(1,"month")}i.appendChild(a),this.picker.trigger("view",{date:t.clone(),view:"Calendars",target:a}),this.picker.trigger("view",{date:t.clone(),view:"Main",target:i})}getFooterView(t){const i=document.createElement("footer"),a=document.createElement("div");a.className="footer-buttons";const s=document.createElement("button");s.className="cancel-button unit",s.innerHTML=this.picker.options.locale.cancel,a.appendChild(s);const r=document.createElement("button");r.className="apply-button unit",r.innerHTML=this.picker.options.locale.apply,r.disabled=!0,a.appendChild(r),i.appendChild(a),this.picker.ui.container.appendChild(i),this.picker.trigger("view",{date:t,target:i,view:"Footer"})}getCalendarHeaderView(t){const i=document.createElement("div");i.className="header";const a=document.createElement("div");a.className="month-name",a.innerHTML=`<span>${t.toLocaleString(this.picker.options.lang,{month:"long"})}</span> ${t.format("YYYY")}`,i.appendChild(a);const s=document.createElement("button");s.className="previous-button unit",s.innerHTML=this.picker.options.locale.previousMonth,i.appendChild(s);const r=document.createElement("button");return r.className="next-button unit",r.innerHTML=this.picker.options.locale.nextMonth,i.appendChild(r),i}getCalendarDayNamesView(){const t=document.createElement("div");t.className="daynames-row";for(let i=1;i<=7;i++){const a=3+this.picker.options.firstDay+i,s=document.createElement("div");s.className="dayname",s.innerHTML=new Date(1970,0,a,12,0,0,0).toLocaleString(this.picker.options.lang,{weekday:"short"}),s.title=new Date(1970,0,a,12,0,0,0).toLocaleString(this.picker.options.lang,{weekday:"long"}),t.appendChild(s),this.picker.trigger("view",{dayIdx:a,view:"CalendarDayName",target:s})}return t}getCalendarDaysView(t){const i=document.createElement("div");i.className="days-grid";const a=this.calcOffsetDays(t,this.picker.options.firstDay),s=32-new Date(t.getFullYear(),t.getMonth(),32).getDate();for(let r=0;r<a;r++){const n=document.createElement("div");n.className="offset",i.appendChild(n)}for(let r=1;r<=s;r++){t.setDate(r);const n=this.getCalendarDayView(t);i.appendChild(n),this.picker.trigger("view",{date:t,view:"CalendarDay",target:n})}return i}getCalendarDayView(t){const i=this.picker.options.date?new f(this.picker.options.date):null,a=new f,s=document.createElement("div");return s.className="day unit",s.innerHTML=t.format("D"),s.dataset.time=String(t.getTime()),t.isSame(a,"day")&&s.classList.add("today"),[0,6].includes(t.getDay())&&s.classList.add("weekend"),this.picker.datePicked.length?this.picker.datePicked[0].isSame(t,"day")&&s.classList.add("selected"):i&&t.isSame(i,"day")&&s.classList.add("selected"),this.picker.trigger("view",{date:t,view:"CalendarDay",target:s}),s}getCalendarFooterView(t,i){const a=document.createElement("div");return a.className="footer",a}calcOffsetDays(t,i){let a=t.getDay()-i;return a<0&&(a+=7),a}}class qt{constructor(t){y(this,"picker");y(this,"instances",{});this.picker=t}initialize(){const t=[];this.picker.options.plugins.forEach(i=>{typeof i=="function"?t.push(new i):typeof i=="string"&&typeof easepick<"u"&&Object.prototype.hasOwnProperty.call(easepick,i)?t.push(new easepick[i]):console.warn(`easepick: ${i} not found.`)}),t.sort((i,a)=>i.priority>a.priority?-1:i.priority<a.priority||i.dependencies.length>a.dependencies.length?1:i.dependencies.length<a.dependencies.length?-1:0),t.forEach(i=>{i.attach(this.picker),this.instances[i.getName()]=i})}getInstance(t){return this.instances[t]}addInstance(t){if(Object.prototype.hasOwnProperty.call(this.instances,t))console.warn(`easepick: ${t} already added.`);else{if(typeof easepick<"u"&&Object.prototype.hasOwnProperty.call(easepick,t)){const i=new easepick[t];return i.attach(this.picker),this.instances[i.getName()]=i,i}if(this.getPluginFn(t)!=="undefined"){const i=new(this.getPluginFn(t));return i.attach(this.picker),this.instances[i.getName()]=i,i}console.warn(`easepick: ${t} not found.`)}return null}removeInstance(t){return t in this.instances&&this.instances[t].detach(),delete this.instances[t]}reloadInstance(t){return this.removeInstance(t),this.addInstance(t)}getPluginFn(t){return[...this.picker.options.plugins].filter(i=>typeof i=="function"&&new i().getName()===t).shift()}}class ot{constructor(t){y(this,"Calendar",new jt(this));y(this,"PluginManager",new qt(this));y(this,"calendars",[]);y(this,"datePicked",[]);y(this,"cssLoaded",0);y(this,"binds",{hidePicker:this.hidePicker.bind(this),show:this.show.bind(this)});y(this,"options",{doc:document,css:[],element:null,firstDay:1,grid:1,calendars:1,lang:"en-US",date:null,format:"YYYY-MM-DD",readonly:!0,autoApply:!0,header:!1,inline:!1,scrollToDate:!0,locale:{nextMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M2.748 16L0 13.333 5.333 8 0 2.667 2.748 0l7.919 8z" fill-rule="nonzero"/></svg>',previousMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M7.919 0l2.748 2.667L5.333 8l5.334 5.333L7.919 16 0 8z" fill-rule="nonzero"/></svg>',cancel:"Cancel",apply:"Apply"},documentClick:this.binds.hidePicker,plugins:[]});y(this,"ui",{container:null,shadowRoot:null,wrapper:null});y(this,"version","1.2.1");const i={...this.options.locale,...t.locale};this.options={...this.options,...t},this.options.locale=i,this.handleOptions(),this.ui.wrapper=document.createElement("span"),this.ui.wrapper.style.display="none",this.ui.wrapper.style.position="absolute",this.ui.wrapper.style.pointerEvents="none",this.ui.wrapper.className="easepick-wrapper",this.ui.wrapper.attachShadow({mode:"open"}),this.ui.shadowRoot=this.ui.wrapper.shadowRoot,this.ui.container=document.createElement("div"),this.ui.container.className="container",this.options.zIndex&&(this.ui.container.style.zIndex=String(this.options.zIndex)),this.options.inline&&(this.ui.wrapper.style.position="relative",this.ui.container.classList.add("inline")),this.ui.shadowRoot.appendChild(this.ui.container),this.options.element.after(this.ui.wrapper),this.handleCSS(),this.options.element.addEventListener("click",this.binds.show),this.on("view",this.onView.bind(this)),this.on("render",this.onRender.bind(this)),this.PluginManager.initialize(),this.parseValues(),typeof this.options.setup=="function"&&this.options.setup(this),this.on("click",this.onClick.bind(this));const a=this.options.scrollToDate?this.getDate():null;this.renderAll(a)}on(t,i,a={}){this.ui.container.addEventListener(t,i,a)}off(t,i,a={}){this.ui.container.removeEventListener(t,i,a)}trigger(t,i={}){return this.ui.container.dispatchEvent(new CustomEvent(t,{detail:i}))}destroy(){this.options.element.removeEventListener("click",this.binds.show),typeof this.options.documentClick=="function"&&document.removeEventListener("click",this.options.documentClick,!0),Object.keys(this.PluginManager.instances).forEach(t=>{this.PluginManager.removeInstance(t)}),this.ui.wrapper.remove()}onRender(t){const{view:i,date:a}=t.detail;this.Calendar.render(a,i)}onView(t){const{view:i,target:a}=t.detail;i==="Footer"&&this.datePicked.length&&(a.querySelector(".apply-button").disabled=!1)}onClickHeaderButton(t){this.isCalendarHeaderButton(t)&&(t.classList.contains("next-button")?this.calendars[0].add(1,"month"):this.calendars[0].subtract(1,"month"),this.renderAll(this.calendars[0]))}onClickCalendarDay(t){if(this.isCalendarDay(t)){const i=new f(t.dataset.time);this.options.autoApply?(this.setDate(i),this.trigger("select",{date:this.getDate()}),this.hide()):(this.datePicked[0]=i,this.trigger("preselect",{date:this.getDate()}),this.renderAll())}}onClickApplyButton(t){if(this.isApplyButton(t)){if(this.datePicked[0]instanceof Date){const i=this.datePicked[0].clone();this.setDate(i)}this.hide(),this.trigger("select",{date:this.getDate()})}}onClickCancelButton(t){this.isCancelButton(t)&&this.hide()}onClick(t){const i=t.target;if(i instanceof HTMLElement){const a=i.closest(".unit");if(!(a instanceof HTMLElement))return;this.onClickHeaderButton(a),this.onClickCalendarDay(a),this.onClickApplyButton(a),this.onClickCancelButton(a)}}isShown(){return this.ui.container.classList.contains("inline")||this.ui.container.classList.contains("show")}show(t){if(this.isShown())return;const i=t&&"target"in t?t.target:this.options.element,{top:a,left:s}=this.adjustPosition(i);this.ui.container.style.top=`${a}px`,this.ui.container.style.left=`${s}px`,this.ui.container.classList.add("show"),this.trigger("show",{target:i})}hide(){this.ui.container.classList.remove("show"),this.datePicked.length=0,this.renderAll(),this.trigger("hide")}setDate(t){const i=new f(t,this.options.format);this.options.date=i.clone(),this.updateValues(),this.calendars.length&&this.renderAll()}getDate(){return this.options.date instanceof f?this.options.date.clone():null}parseValues(){this.options.date?this.setDate(this.options.date):this.options.element instanceof HTMLInputElement&&this.options.element.value.length&&this.setDate(this.options.element.value),this.options.date instanceof Date||(this.options.date=null)}updateValues(){const t=this.getDate(),i=t instanceof Date?t.format(this.options.format,this.options.lang):"",a=this.options.element;a instanceof HTMLInputElement?a.value=i:a instanceof HTMLElement&&(a.innerText=i)}hidePicker(t){let i=t.target,a=null;i.shadowRoot&&(i=t.composedPath()[0],a=i.getRootNode().host),this.isShown()&&a!==this.ui.wrapper&&i!==this.options.element&&this.hide()}renderAll(t){this.trigger("render",{view:"Container",date:(t||this.calendars[0]).clone()})}isCalendarHeaderButton(t){return["previous-button","next-button"].some(i=>t.classList.contains(i))}isCalendarDay(t){return t.classList.contains("day")}isApplyButton(t){return t.classList.contains("apply-button")}isCancelButton(t){return t.classList.contains("cancel-button")}gotoDate(t){const i=new f(t,this.options.format);i.setDate(1),this.calendars[0]=i.clone(),this.renderAll()}clear(){this.options.date=null,this.datePicked.length=0,this.updateValues(),this.renderAll(),this.trigger("clear")}handleOptions(){this.options.element instanceof HTMLElement||(this.options.element=this.options.doc.querySelector(this.options.element)),typeof this.options.documentClick=="function"&&document.addEventListener("click",this.options.documentClick,!0),this.options.element instanceof HTMLInputElement&&(this.options.element.readOnly=this.options.readonly),this.options.date?this.calendars[0]=new f(this.options.date,this.options.format):this.calendars[0]=new f}handleCSS(){if(Array.isArray(this.options.css))this.options.css.forEach(t=>{const i=document.createElement("link");i.href=t,i.rel="stylesheet";const a=()=>{this.cssLoaded++,this.cssLoaded===this.options.css.length&&(this.ui.wrapper.style.display="")};i.addEventListener("load",a),i.addEventListener("error",a),this.ui.shadowRoot.append(i)});else if(typeof this.options.css=="string"){const t=document.createElement("style"),i=document.createTextNode(this.options.css);t.appendChild(i),this.ui.shadowRoot.append(t),this.ui.wrapper.style.display=""}else typeof this.options.css=="function"&&(this.options.css.call(this,this),this.ui.wrapper.style.display="")}adjustPosition(t){const i=t.getBoundingClientRect(),a=this.ui.wrapper.getBoundingClientRect();this.ui.container.classList.add("calc");const s=this.ui.container.getBoundingClientRect();this.ui.container.classList.remove("calc");let r=i.bottom-a.bottom,n=i.left-a.left;return typeof window<"u"&&(window.innerHeight<r+s.height&&r-s.height>=0&&(r=i.top-a.top-s.height),window.innerWidth<n+s.width&&i.right-s.width>=0&&(n=i.right-a.right-s.width)),{left:n,top:r}}}var ht=Object.freeze({__proto__:null,Core:ot,create:ot});class it{constructor(){y(this,"picker");y(this,"options");y(this,"priority",0);y(this,"dependencies",[])}attach(t){const i=this.getName(),a={...this.options};this.options={...this.options,...t.options[i]||{}};for(const r of Object.keys(a))if(a[r]!==null&&typeof a[r]=="object"&&Object.keys(a[r]).length&&i in t.options&&r in t.options[i]){const n={...t.options[i][r]};n!==null&&typeof n=="object"&&Object.keys(n).length&&Object.keys(n).every(o=>Object.keys(a[r]).includes(o))&&(this.options[r]={...a[r],...n})}if(this.picker=t,this.dependenciesNotFound()){const r=this.dependencies.filter(n=>!this.pluginsAsStringArray().includes(n));return void console.warn(`${this.getName()}: required dependencies (${r.join(", ")}).`)}const s=this.camelCaseToKebab(this.getName());this.picker.ui.container.classList.add(s),this.onAttach()}detach(){const t=this.camelCaseToKebab(this.getName());this.picker.ui.container.classList.remove(t),typeof this.onDetach=="function"&&this.onDetach()}dependenciesNotFound(){return this.dependencies.length&&!this.dependencies.every(t=>this.pluginsAsStringArray().includes(t))}pluginsAsStringArray(){return this.picker.options.plugins.map(t=>typeof t=="function"?new t().getName():t)}camelCaseToKebab(t){return t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}}class mt extends it{constructor(){super(...arguments);y(this,"priority",1);y(this,"binds",{onView:this.onView.bind(this)});y(this,"options",{minDate:null,maxDate:null,minDays:null,maxDays:null,selectForward:null,selectBackward:null,presets:!0,inseparable:!1,filter:null})}getName(){return"LockPlugin"}onAttach(){if(this.options.minDate&&(this.options.minDate=new f(this.options.minDate,this.picker.options.format,this.picker.options.lang)),this.options.maxDate&&(this.options.maxDate=new f(this.options.maxDate,this.picker.options.format,this.picker.options.lang),this.options.maxDate instanceof f&&this.picker.options.calendars>1&&this.picker.calendars[0].isSame(this.options.maxDate,"month"))){const i=this.picker.calendars[0].clone().subtract(1,"month");this.picker.gotoDate(i)}if((this.options.minDays||this.options.maxDays||this.options.selectForward||this.options.selectBackward)&&!this.picker.options.plugins.includes("RangePlugin")){const i=["minDays","maxDays","selectForward","selectBackward"];console.warn(`${this.getName()}: options ${i.join(", ")} required RangePlugin.`)}this.picker.on("view",this.binds.onView)}onDetach(){this.picker.off("view",this.binds.onView)}onView(i){const{view:a,target:s,date:r}=i.detail;if(a==="CalendarHeader"&&(this.options.minDate instanceof f&&r.isSameOrBefore(this.options.minDate,"month")&&s.classList.add("no-previous-month"),this.options.maxDate instanceof f&&r.isSameOrAfter(this.options.maxDate,"month")&&s.classList.add("no-next-month")),a==="CalendarDay"){const n=this.picker.datePicked.length?this.picker.datePicked[0]:null;if(this.testFilter(r))return void s.classList.add("locked");if(this.options.inseparable){if(this.options.minDays){const o=r.clone().subtract(this.options.minDays-1,"day"),p=r.clone().add(this.options.minDays-1,"day");let m=!1,v=!1;for(;o.isBefore(r,"day");){if(this.testFilter(o)){m=!0;break}o.add(1,"day")}for(;p.isAfter(r,"day");){if(this.testFilter(p)){v=!0;break}p.subtract(1,"day")}m&&v&&s.classList.add("not-available")}this.rangeIsNotAvailable(r,n)&&s.classList.add("not-available")}this.dateIsNotAvailable(r,n)&&s.classList.add("not-available")}if(this.options.presets&&a==="PresetPluginButton"){const n=new f(Number(s.dataset.start)),o=new f(Number(s.dataset.end)),p=o.diff(n,"day"),m=this.options.minDays&&p<this.options.minDays,v=this.options.maxDays&&p>this.options.maxDays;(m||v||this.lockMinDate(n)||this.lockMaxDate(n)||this.lockMinDate(o)||this.lockMaxDate(o)||this.rangeIsNotAvailable(n,o))&&s.setAttribute("disabled","disabled")}}dateIsNotAvailable(i,a){return this.lockMinDate(i)||this.lockMaxDate(i)||this.lockMinDays(i,a)||this.lockMaxDays(i,a)||this.lockSelectForward(i)||this.lockSelectBackward(i)}rangeIsNotAvailable(i,a){if(!i||!a)return!1;const s=(i.isSameOrBefore(a,"day")?i:a).clone(),r=(a.isSameOrAfter(i,"day")?a:i).clone();for(;s.isSameOrBefore(r,"day");){if(this.testFilter(s))return!0;s.add(1,"day")}return!1}lockMinDate(i){return this.options.minDate instanceof f&&i.isBefore(this.options.minDate,"day")}lockMaxDate(i){return this.options.maxDate instanceof f&&i.isAfter(this.options.maxDate,"day")}lockMinDays(i,a){if(this.options.minDays&&a){const s=a.clone().subtract(this.options.minDays-1,"day"),r=a.clone().add(this.options.minDays-1,"day");return i.isBetween(s,r)}return!1}lockMaxDays(i,a){if(this.options.maxDays&&a){const s=a.clone().subtract(this.options.maxDays,"day"),r=a.clone().add(this.options.maxDays,"day");return!i.isBetween(s,r)}return!1}lockSelectForward(i){if(this.picker.datePicked.length===1&&this.options.selectForward){const a=this.picker.datePicked[0].clone();return i.isBefore(a,"day")}return!1}lockSelectBackward(i){if(this.picker.datePicked.length===1&&this.options.selectBackward){const a=this.picker.datePicked[0].clone();return i.isAfter(a,"day")}return!1}testFilter(i){return typeof this.options.filter=="function"&&this.options.filter(i,this.picker.datePicked)}}class gt extends it{constructor(){super(...arguments);y(this,"dependencies",["RangePlugin"]);y(this,"binds",{onView:this.onView.bind(this),onClick:this.onClick.bind(this)});y(this,"options",{customLabels:["Today","Yesterday","Last 7 Days","Last 30 Days","This Month","Last Month"],customPreset:{},position:"left"})}getName(){return"PresetPlugin"}onAttach(){if(!Object.keys(this.options.customPreset).length){const i=new f,a=()=>{const n=i.clone();n.setDate(1);const o=new Date(i.getFullYear(),i.getMonth()+1,0);return[new f(n),new f(o)]},s=()=>{const n=i.clone();n.setMonth(n.getMonth()-1),n.setDate(1);const o=new Date(i.getFullYear(),i.getMonth(),0);return[new f(n),new f(o)]},r=[[i.clone(),i.clone()],[i.clone().subtract(1,"day"),i.clone().subtract(1,"day")],[i.clone().subtract(6,"day"),i.clone()],[i.clone().subtract(29,"day"),i.clone()],a(),s()];Object.values(this.options.customLabels).forEach((n,o)=>{this.options.customPreset[n]=r[o]})}this.picker.on("view",this.binds.onView),this.picker.on("click",this.binds.onClick)}onDetach(){this.picker.off("view",this.binds.onView),this.picker.off("click",this.binds.onClick)}onView(i){const{view:a,target:s}=i.detail;if(a==="Main"){const r=document.createElement("div");r.className="preset-plugin-container",Object.keys(this.options.customPreset).forEach(n=>{if(Object.prototype.hasOwnProperty.call(this.options.customPreset,n)){const o=this.options.customPreset[n],p=document.createElement("button");p.className="preset-button unit",p.innerHTML=n,p.dataset.start=o[0].getTime(),p.dataset.end=o[1].getTime(),r.appendChild(p),this.picker.trigger("view",{view:"PresetPluginButton",target:p})}}),s.appendChild(r),s.classList.add(`preset-${this.options.position}`),this.picker.trigger("view",{view:"PresetPluginContainer",target:r})}}onClick(i){const a=i.target;if(a instanceof HTMLElement){const s=a.closest(".unit");if(!(s instanceof HTMLElement))return;if(this.isPresetButton(s)){const r=new f(Number(s.dataset.start)),n=new f(Number(s.dataset.end));this.picker.options.autoApply?(this.picker.setDateRange(r,n),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide()):(this.picker.datePicked=[r,n],this.picker.renderAll())}}}isPresetButton(i){return i.classList.contains("preset-button")}}class ft extends it{constructor(){super(...arguments);y(this,"tooltipElement");y(this,"triggerElement");y(this,"binds",{setStartDate:this.setStartDate.bind(this),setEndDate:this.setEndDate.bind(this),setDateRange:this.setDateRange.bind(this),getStartDate:this.getStartDate.bind(this),getEndDate:this.getEndDate.bind(this),onView:this.onView.bind(this),onShow:this.onShow.bind(this),onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this),onClickCalendarDay:this.onClickCalendarDay.bind(this),onClickApplyButton:this.onClickApplyButton.bind(this),parseValues:this.parseValues.bind(this),updateValues:this.updateValues.bind(this),clear:this.clear.bind(this)});y(this,"options",{elementEnd:null,startDate:null,endDate:null,repick:!1,strict:!0,delimiter:" - ",tooltip:!0,tooltipNumber:i=>i,locale:{zero:"",one:"day",two:"",few:"",many:"",other:"days"},documentClick:this.hidePicker.bind(this)})}getName(){return"RangePlugin"}onAttach(){this.binds._setStartDate=this.picker.setStartDate,this.binds._setEndDate=this.picker.setEndDate,this.binds._setDateRange=this.picker.setDateRange,this.binds._getStartDate=this.picker.getStartDate,this.binds._getEndDate=this.picker.getEndDate,this.binds._parseValues=this.picker.parseValues,this.binds._updateValues=this.picker.updateValues,this.binds._clear=this.picker.clear,this.binds._onClickCalendarDay=this.picker.onClickCalendarDay,this.binds._onClickApplyButton=this.picker.onClickApplyButton,Object.defineProperties(this.picker,{setStartDate:{configurable:!0,value:this.binds.setStartDate},setEndDate:{configurable:!0,value:this.binds.setEndDate},setDateRange:{configurable:!0,value:this.binds.setDateRange},getStartDate:{configurable:!0,value:this.binds.getStartDate},getEndDate:{configurable:!0,value:this.binds.getEndDate},parseValues:{configurable:!0,value:this.binds.parseValues},updateValues:{configurable:!0,value:this.binds.updateValues},clear:{configurable:!0,value:this.binds.clear},onClickCalendarDay:{configurable:!0,value:this.binds.onClickCalendarDay},onClickApplyButton:{configurable:!0,value:this.binds.onClickApplyButton}}),this.options.elementEnd&&(this.options.elementEnd instanceof HTMLElement||(this.options.elementEnd=this.picker.options.doc.querySelector(this.options.elementEnd)),this.options.elementEnd instanceof HTMLInputElement&&(this.options.elementEnd.readOnly=this.picker.options.readonly),typeof this.picker.options.documentClick=="function"&&(document.removeEventListener("click",this.picker.options.documentClick,!0),typeof this.options.documentClick=="function"&&document.addEventListener("click",this.options.documentClick,!0)),this.options.elementEnd.addEventListener("click",this.picker.show.bind(this.picker))),this.options.repick=this.options.repick&&this.options.elementEnd instanceof HTMLElement,this.picker.options.date=null,this.picker.on("view",this.binds.onView),this.picker.on("show",this.binds.onShow),this.picker.on("mouseenter",this.binds.onMouseEnter,!0),this.picker.on("mouseleave",this.binds.onMouseLeave,!0),this.checkIntlPluralLocales()}onDetach(){Object.defineProperties(this.picker,{setStartDate:{configurable:!0,value:this.binds._setStartDate},setEndDate:{configurable:!0,value:this.binds._setEndDate},setDateRange:{configurable:!0,value:this.binds._setDateRange},getStartDate:{configurable:!0,value:this.binds._getStartDate},getEndDate:{configurable:!0,value:this.binds._getEndDate},parseValues:{configurable:!0,value:this.binds._parseValues},updateValues:{configurable:!0,value:this.binds._updateValues},clear:{configurable:!0,value:this.binds._clear},onClickCalendarDay:{configurable:!0,value:this.binds._onClickCalendarDay},onClickApplyButton:{configurable:!0,value:this.binds._onClickApplyButton}}),this.picker.off("view",this.binds.onView),this.picker.off("show",this.binds.onShow),this.picker.off("mouseenter",this.binds.onMouseEnter,!0),this.picker.off("mouseleave",this.binds.onMouseLeave,!0)}parseValues(){if(this.options.startDate||this.options.endDate)this.options.strict?this.options.startDate&&this.options.endDate?this.setDateRange(this.options.startDate,this.options.endDate):(this.options.startDate=null,this.options.endDate=null):(this.options.startDate&&this.setStartDate(this.options.startDate),this.options.endDate&&this.setEndDate(this.options.endDate));else if(this.options.elementEnd)this.options.strict?this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length&&this.options.elementEnd instanceof HTMLInputElement&&this.options.elementEnd.value.length&&this.setDateRange(this.picker.options.element.value,this.options.elementEnd.value):(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length&&this.setStartDate(this.picker.options.element.value),this.options.elementEnd instanceof HTMLInputElement&&this.options.elementEnd.value.length&&this.setEndDate(this.options.elementEnd.value));else if(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length){const[i,a]=this.picker.options.element.value.split(this.options.delimiter);this.options.strict?i&&a&&this.setDateRange(i,a):(i&&this.setStartDate(i),a&&this.setEndDate(a))}}updateValues(){const i=this.picker.options.element,a=this.options.elementEnd,s=this.picker.getStartDate(),r=this.picker.getEndDate(),n=s instanceof Date?s.format(this.picker.options.format,this.picker.options.lang):"",o=r instanceof Date?r.format(this.picker.options.format,this.picker.options.lang):"";if(a)i instanceof HTMLInputElement?i.value=n:i instanceof HTMLElement&&(i.innerText=n),a instanceof HTMLInputElement?a.value=o:a instanceof HTMLElement&&(a.innerText=o);else{const p=`${n}${n||o?this.options.delimiter:""}${o}`;i instanceof HTMLInputElement?i.value=p:i instanceof HTMLElement&&(i.innerText=p)}}clear(){this.options.startDate=null,this.options.endDate=null,this.picker.datePicked.length=0,this.updateValues(),this.picker.renderAll(),this.picker.trigger("clear")}onShow(i){const{target:a}=i.detail;this.triggerElement=a,this.picker.options.scrollToDate&&this.getStartDate()instanceof Date&&this.picker.gotoDate(this.getStartDate()),this.initializeRepick()}onView(i){const{view:a,target:s}=i.detail;if(a==="Main"&&(this.tooltipElement=document.createElement("span"),this.tooltipElement.className="range-plugin-tooltip",s.appendChild(this.tooltipElement)),a==="CalendarDay"){const r=new f(s.dataset.time),n=this.picker.datePicked,o=n.length?this.picker.datePicked[0]:this.getStartDate(),p=n.length?this.picker.datePicked[1]:this.getEndDate();o&&o.isSame(r,"day")&&s.classList.add("start"),o&&p&&(p.isSame(r,"day")&&s.classList.add("end"),r.isBetween(o,p)&&s.classList.add("in-range"))}if(a==="Footer"){const r=this.picker.datePicked.length===1&&!this.options.strict||this.picker.datePicked.length===2;s.querySelector(".apply-button").disabled=!r}}hidePicker(i){let a=i.target,s=null;a.shadowRoot&&(a=i.composedPath()[0],s=a.getRootNode().host),this.picker.isShown()&&s!==this.picker.ui.wrapper&&a!==this.picker.options.element&&a!==this.options.elementEnd&&this.picker.hide()}setStartDate(i){const a=new f(i,this.picker.options.format);this.options.startDate=a?a.clone():null,this.updateValues(),this.picker.renderAll()}setEndDate(i){const a=new f(i,this.picker.options.format);this.options.endDate=a?a.clone():null,this.updateValues(),this.picker.renderAll()}setDateRange(i,a){const s=new f(i,this.picker.options.format),r=new f(a,this.picker.options.format);this.options.startDate=s?s.clone():null,this.options.endDate=r?r.clone():null,this.updateValues(),this.picker.renderAll()}getStartDate(){return this.options.startDate instanceof Date?this.options.startDate.clone():null}getEndDate(){return this.options.endDate instanceof Date?this.options.endDate.clone():null}onMouseEnter(i){const a=i.target;if(a instanceof HTMLElement){this.isContainer(a)&&this.initializeRepick();const s=a.closest(".unit");if(!(s instanceof HTMLElement))return;if(this.picker.isCalendarDay(s)){if(this.picker.datePicked.length!==1)return;let r=this.picker.datePicked[0].clone(),n=new f(s.dataset.time),o=!1;if(r.isAfter(n,"day")){const p=r.clone();r=n.clone(),n=p.clone(),o=!0}if([...this.picker.ui.container.querySelectorAll(".day")].forEach(p=>{const m=new f(p.dataset.time),v=this.picker.Calendar.getCalendarDayView(m);m.isBetween(r,n)&&v.classList.add("in-range"),m.isSame(this.picker.datePicked[0],"day")&&(v.classList.add("start"),v.classList.toggle("flipped",o)),p===s&&(v.classList.add("end"),v.classList.toggle("flipped",o)),p.className=v.className}),this.options.tooltip){const p=this.options.tooltipNumber(n.diff(r,"day")+1);if(p>0){const m=new Intl.PluralRules(this.picker.options.lang).select(p),v=`${p} ${this.options.locale[m]}`;this.showTooltip(s,v)}else this.hideTooltip()}}}}onMouseLeave(i){if(this.isContainer(i.target)&&this.options.repick){const a=this.getStartDate(),s=this.getEndDate();a&&s&&(this.picker.datePicked.length=0,this.picker.renderAll())}}onClickCalendarDay(i){if(this.picker.isCalendarDay(i)){this.picker.datePicked.length===2&&(this.picker.datePicked.length=0);const a=new f(i.dataset.time);if(this.picker.datePicked[this.picker.datePicked.length]=a,this.picker.datePicked.length===2&&this.picker.datePicked[0].isAfter(this.picker.datePicked[1])){const s=this.picker.datePicked[1].clone();this.picker.datePicked[1]=this.picker.datePicked[0].clone(),this.picker.datePicked[0]=s.clone()}this.picker.datePicked.length!==1&&this.picker.options.autoApply||this.picker.trigger("preselect",{start:this.picker.datePicked[0]instanceof Date?this.picker.datePicked[0].clone():null,end:this.picker.datePicked[1]instanceof Date?this.picker.datePicked[1].clone():null}),this.picker.datePicked.length===1&&(!this.options.strict&&this.picker.options.autoApply&&(this.picker.options.element===this.triggerElement&&this.setStartDate(this.picker.datePicked[0]),this.options.elementEnd===this.triggerElement&&this.setEndDate(this.picker.datePicked[0]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()})),this.picker.renderAll()),this.picker.datePicked.length===2&&(this.picker.options.autoApply?(this.setDateRange(this.picker.datePicked[0],this.picker.datePicked[1]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide()):(this.hideTooltip(),this.picker.renderAll()))}}onClickApplyButton(i){this.picker.isApplyButton(i)&&(this.picker.datePicked.length!==1||this.options.strict||(this.picker.options.element===this.triggerElement&&(this.options.endDate=null,this.setStartDate(this.picker.datePicked[0])),this.options.elementEnd===this.triggerElement&&(this.options.startDate=null,this.setEndDate(this.picker.datePicked[0]))),this.picker.datePicked.length===2&&this.setDateRange(this.picker.datePicked[0],this.picker.datePicked[1]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide())}showTooltip(i,a){this.tooltipElement.style.visibility="visible",this.tooltipElement.innerHTML=a;const s=this.picker.ui.container.getBoundingClientRect(),r=this.tooltipElement.getBoundingClientRect(),n=i.getBoundingClientRect();let o=n.top,p=n.left;o-=s.top,p-=s.left,o-=r.height,p-=r.width/2,p+=n.width/2,this.tooltipElement.style.top=`${o}px`,this.tooltipElement.style.left=`${p}px`}hideTooltip(){this.tooltipElement.style.visibility="hidden"}checkIntlPluralLocales(){if(!this.options.tooltip)return;const i=[...new Set([new Intl.PluralRules(this.picker.options.lang).select(0),new Intl.PluralRules(this.picker.options.lang).select(1),new Intl.PluralRules(this.picker.options.lang).select(2),new Intl.PluralRules(this.picker.options.lang).select(6),new Intl.PluralRules(this.picker.options.lang).select(18)])],a=Object.keys(this.options.locale);i.every(s=>a.includes(s))||console.warn(`${this.getName()}: provide locales (${i.join(", ")}) for correct tooltip text.`)}initializeRepick(){if(!this.options.repick)return;const i=this.getStartDate(),a=this.getEndDate();a&&this.triggerElement===this.picker.options.element&&(this.picker.datePicked[0]=a),i&&this.triggerElement===this.options.elementEnd&&(this.picker.datePicked[0]=i)}isContainer(i){return i===this.picker.ui.container}}const{__:Vt,_x:lr,_n:pr,_nx:ur}=wp.i18n,Ut={props:{display:String,name:String,block:Object},data(){return{loading:!0,range:!1,picker:!1,formData:{},date:{single:"",dateRange:{start:"",end:""},dateRangeComparison:{start:"",end:""}},strings:{placeholder:Vt("Input placeholder...","uipress-pro")}}},watch:{range:{handler(e,t){this.picker&&(this.picker.destroy(),this.mountPicker())}}},mounted(){document.addEventListener("uipress/app/forms/change",this.handleFormChange),this.mountPicker()},beforeUnmount(){document.removeEventListener("uipress/app/forms/change",this.handleFormChange)},computed:{returnPlaceHolder(){const e=this.get_block_option(this.block,"block","inputPlaceHolder",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnPopulated(){if(this.returnName in this.formData)return this.formData[this.returnName]},returnLabel(){const e=this.get_block_option(this.block,"block","inputLabel",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnRequired(){let e=this.get_block_option(this.block,"block","inputRequired");return this.isObject(e)?e.value:e},returnName(){return this.get_block_option(this.block,"block","inputName")},returnDateRange(){return this.range=this.get_block_option(this.block,"block","dateRange",!0),this.range},returnPickerArgs(){return this.returnDateRange,{element:this.$refs.datepicker,css:[uipProPath+"assets/css/libs/uip-datepicker.css"],lang:this.uipApp.data.options.locale,plugins:[ft,gt,mt],grid:2,calendars:2,LockPlugin:{maxDate:new Date},zIndex:99,RangePlugin:{tooltip:!0}}}},methods:{mountPicker(){this.picker=new ht.create(this.returnPickerArgs)},handleFormChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.formData=e.detail.formData)}},template:d` <label class="uip-flex uip-flex-column">
    <span class="uip-input-label uip-text-muted uip-margin-bottom-xxs">{{returnLabel}}</span>
    <div class="uip-background-muted uip-border-round uip-overflow-hidden uip-padding-xxs uip-flex uip-gap-xs uip-flex-center uip-date-input">
      <AppIcon icon="calendar_month" class="uip-text-l" />
      <input
        ref="datepicker"
        :name="returnName"
        :range="returnDateRange"
        class="uip-blank-input uip-text-s"
        type="text"
        :placeholder="returnPlaceHolder"
        :required="returnRequired"
        :value="returnPopulated"
      />
    </div>
  </label>`},Bt={metadata:Ft,component:Ut},{__:U,_x:cr,_n:dr,_nx:hr}=wp.i18n,Kt={name:U("Image select","uipress-pro"),moduleName:"uip-image-select-input",description:U("Outputs a image select input. For use with the form block","uipress-pro"),category:U("Form","uipress-pro"),group:"form",premium:!0,icon:"image",settings:{},optionsEnabled:[{name:"block",label:U("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"inputLabel",label:U("Label","uipress-pro"),value:{string:U("Select","uipress-pro")}},{option:"textField",componentName:"uip-dynamic-input",uniqueKey:"inputName",label:U("Meta key","uipress-pro"),args:{metaKey:!0}},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inputRequired",args:{options:{false:{value:!1,label:U("No","uipress-lite")},true:{value:!0,label:U("Yes","uipress-lite")}}},label:U("Required field","uipress-lite"),value:{value:!1}}]},{name:"container",label:U("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:U("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"inputStyle",label:U("Select area","uipress-pro"),icon:"input",styleType:"style",class:".uip-image-select"},{name:"label",label:U("Label","uipress-pro"),icon:"label",styleType:"style",class:".uip-input-label"}]},{__:Ue,_x:mr,_n:gr,_nx:fr}=wp.i18n,Ht={props:{display:String,name:String,block:Object},data(){return{loading:!0,availableOptions:[],img:{},imageSelected:"",populated:this.returnPopulated,formData:{},strings:{placeholder:Ue("Input placeholder...","uipress-pro"),replace:Ue("Replace","uipress-pro"),chooseImage:Ue("Add image","uipress-lite")}}},mounted(){document.addEventListener("uipress/app/forms/change",this.handleFormChange)},beforeUnmount(){document.removeEventListener("uipress/app/forms/change",this.handleFormChange)},computed:{returnPlaceHolder(){const e=this.get_block_option(this.block,"block","inputPlaceHolder",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnLabel(){const e=this.get_block_option(this.block,"block","inputLabel",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnRequired(){let e=this.get_block_option(this.block,"block","inputRequired");return this.isObject(e)?e.value:e},returnName(){const e=this.get_block_option(this.block,"block","inputName",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnOptions(){let e=this.get_block_option(this.block,"block","selectOptions");return this.availableOptions=e.options,this.availableOptions},returnPopulated(){if(this.returnName in this.formData)return this.formData[this.returnName]}},methods:{handleFormChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.formData=e.detail.formData)}},template:d` <div class="uip-flex uip-flex-column">
    <span class="uip-input-label uip-text-muted uip-margin-bottom-xxs">{{returnLabel}}</span>
    <input v-model="imageSelected" type="text" :name="returnName" :value-holder="returnPopulated" style="opacity:0;max-height:0;min-height:0;overflow:hidden;" :required="returnRequired" />

    <inline-image-select :value="{url:imageSelected}" :returnData="(d)=>{imageSelected = d.url}" :args="{hasPositioning: false}" />
  </div>`},Gt={metadata:Kt,component:Ht},{__:O,_x:br,_n:yr,_nx:vr}=wp.i18n,Yt={name:O("Radio","uipress-pro"),moduleName:"uip-radio-input",description:O("A radio block with support for multiple options. For use with the form block","uipress-pro"),category:O("Form","uipress-pro"),group:"form",premium:!0,path:uipProPath+"assets/js/uip/blocks/inputs/radio-input.min.js",icon:"radio_button_checked",settings:{},optionsEnabled:[{name:"block",label:O("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"inputLabel",label:O("Label","uipress-pro"),value:{string:O("Select","uipress-pro")}},{option:"textField",componentName:"uip-dynamic-input",uniqueKey:"inputName",label:O("Meta key","uipress-pro"),args:{metaKey:!0}},{option:"selectOptionCreator",componentName:"select-option-builder",uniqueKey:"selectOptions",label:O("Select options","uipress-pro"),value:{options:[{label:O("Option 1","uipress-lite"),name:"option_1"},{label:O("Option 2","uipress-lite"),name:"option_2"}]}},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inputRequired",args:{options:{false:{value:!1,label:O("No","uipress-lite")},true:{value:!0,label:O("Yes","uipress-lite")}}},label:O("Required field","uipress-lite"),value:{value:!1}}]},{name:"container",label:O("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:O("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"inputStyle",label:O("Select style","uipress-pro"),icon:"input",styleType:"style",class:".uip-input"},{name:"label",label:O("Label","uipress-pro"),icon:"label",styleType:"style",class:".uip-input-label"}]},{__:Jt,_x:xr,_n:_r,_nx:wr}=wp.i18n,zt={props:{display:String,name:String,block:Object},data(){return{loading:!0,availableOptions:[],arrayString:"",formData:{},strings:{placeholder:Jt("Input placeholder...","uipress-pro")}}},mounted(){document.addEventListener("uipress/app/forms/change",this.handleFormChange)},beforeUnmount(){document.removeEventListener("uipress/app/forms/change",this.handleFormChange)},computed:{returnPlaceHolder(){const e=this.get_block_option(this.block,"block","inputPlaceHolder",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnLabel(){const e=this.get_block_option(this.block,"block","inputLabel",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnRequired(){let e=this.get_block_option(this.block,"block","inputRequired");return this.isObject(e)?e.value:e},returnName(){return this.get_block_option(this.block,"block","inputName")},returnOptions(){let e=this.get_block_option(this.block,"block","selectOptions");return this.availableOptions=e.options,this.availableOptions},returnPopulated(){if(this.returnName in this.formData)return this.formData[this.returnName]}},methods:{handleFormChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.formData=e.detail.formData)},formatChange(e){console.log(e),this.arrayString=e.name},ifChecked(e){return console.log(e),e.name?e.name==this.arrayString:!1}},template:d` <div class="uip-flex uip-flex-column">
    <span class="uip-input-label uip-text-muted uip-margin-bottom-xxs">{{returnLabel}}</span>
    <input v-model="arrayString" type="text" :name="returnName" :value-holder="returnPopulated" style="opacity:0;max-height:0;min-height:0;overflow:hidden;" :required="returnRequired" />
    <div class="uip-flex uip-flex-column uip-row-gap-xxs">
      <template v-for="(item,index) in returnOptions">
        <label class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center" @click="formatChange(item)">
          <input class="uip-input" type="radio" :checked="item.name == arrayString ? true : false" :key="index" />
          <div>{{item.label}}</div>
        </label>
      </template>
    </div>
  </div>`},Wt={metadata:Yt,component:zt},{__:ge,_x:kr,_n:Dr,_nx:Ar}=wp.i18n,Qt={name:ge("HTML","uipress-pro"),moduleName:"uip-custom-html",description:ge("This block allows you to output your own HTML into the template","uipress-pro"),category:ge("Dynamic","uipress-pro"),group:"elements",premium:!0,icon:"code",settings:{},optionsEnabled:[{name:"block",label:ge("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"customCode",uniqueKey:"customHTML",componentName:"code-editor",label:ge("Custom HTML","uipress-pro"),value:"<strong>Hello world</strong>",args:{language:"html"}}]},{name:"container",label:ge("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:ge("Style","uipress-pro"),icon:"palette",styleType:"style"}]};wp.i18n;const Zt={props:{display:String,name:String,block:Object},computed:{getCode(){let e=this.get_block_option(this.block,"block","customHTML");return e||""}},template:d`<div v-html="getCode"></div>`},Xt={metadata:Qt,component:Zt},{__:Z,_x:Cr,_n:Sr,_nx:Tr}=wp.i18n,ei={name:Z("Icon list","uipress-pro"),moduleName:"uip-icon-list-block",description:Z("Creates a list with icons","uipress-pro"),category:Z("Dynamic","uipress-pro"),group:"elements",premium:!0,path:uipProPath+"assets/js/uip/blocks/elements/icon-list.min.js",icon:"list",settings:{},optionsEnabled:[{name:"block",label:Z("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"listItemCreator",componentName:"list-item-creator",uniqueKey:"blockListItems",label:Z("List items","uipress-pro"),value:{options:[{name:Z("List item one","uipress-lite"),icon:"favorite"},{name:Z("List item two","uipress-lite"),icon:"favorite"}]}}]},{name:"container",label:Z("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:Z("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"icons",label:Z("Icons","uipress-pro"),icon:"favorite",styleType:"style",class:".uip-icon"}]};wp.i18n;const ti={props:{display:String,name:String,block:Object},data(){return{}},computed:{getListItems(){let e=this.get_block_option(this.block,"block","blockListItems",!0);return typeof e>"u"?[]:e?"options"in e?Array.isArray(e.options)?e.options:[]:[]:[]},getListDirection(){let e=this.get_block_option(this.block,"block","listDirection",!0);return typeof e>"u"||!e||!("value"in e)?"vertical":e.value}},template:d`
    <div v-if="getListDirection == 'vertical'" class="uip-flex uip-flex-column uip-row-gap-xs">
      <div v-for="item in getListItems" class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center">
        <AppIcon :icon="item.icon" class="uip-icon" />
        <span>{{item.name}}</span>
      </div>
    </div>

    <div v-else class="uip-flex uip-flex-row uip-gap-xs">
      <div v-for="item in getListItems" class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center">
        <AppIcon :icon="item.icon" class="uip-icon" />
        <span>{{item.name}}</span>
      </div>
    </div>
  `},ii={metadata:ei,component:ti},{__:fe,_x:Rr,_n:Pr,_nx:Mr}=wp.i18n,ai={name:fe("iFrame","uipress-pro"),moduleName:"uip-iframe",description:fe("Outputs a iframe block","uipress-pro"),category:fe("Dynamic","uipress-pro"),group:"elements",premium:!0,icon:"public",settings:{},optionsEnabled:[{name:"block",label:fe("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"linkSelect",componentName:"link-select",label:fe("Iframe URL","uipress-lite"),args:{hideLinkType:!0}}]},{name:"container",label:fe("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:fe("Style","uipress-pro"),icon:"palette",styleType:"style"}]};wp.i18n;const si={props:{display:String,name:String,block:Object},data(){return{}},computed:{getLink(){const e="https://uipress.co";let t=this.get_block_option(this.block,"block","linkSelect",!0);return typeof t>"u"||!t||t==""?e:this.isObject(t)?t.value:t}},template:d`<iframe :src="getLink"></iframe>`},ri={metadata:ai,component:si},{__:be,_x:Nr,_n:Lr,_nx:$r}=wp.i18n,ni={name:be("Shortcode","uipress-pro"),moduleName:"uip-shortcode",description:be("This block allows you to output custom shortcodes into the template","uipress-pro"),category:be("Elements","uipress-pro"),group:"elements",premium:!0,icon:"code",settings:{},optionsEnabled:[{name:"block",label:be("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"customCode",componentName:"code-editor",uniqueKey:"shortcode",label:be("Shortcode","uipress-pro"),value:"[your_short_code]",args:{language:"html"}}]},{name:"container",label:be("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:be("Style","uipress-pro"),icon:"palette",styleType:"style"}]};wp.i18n;const oi={props:{display:String,name:String,block:Object},data(){return{shortCode:""}},watch:{getCode:{handler(e,t){this.buildShortCode()},deep:!0}},created(){this.buildShortCode()},computed:{getCode(){let e=this.get_block_option(this.block,"block","shortcode");return e||""}},methods:{async buildShortCode(){let e=this.getCode;if(!e)return"";const t=this.uipApp.data.options.multisite&&this.uipApp.data.options.networkActivated?"uiptrue":!1;let i=new FormData;i.append("action","uip_get_shortcode"),i.append("security",uip_ajax.security),i.append("shortCode",e),i.append("isMultisite",t);const a=await this.sendServerRequest(uip_ajax.ajax_url,i);a.error||a.success&&(this.shortCode=a.shortCode)}},template:d`<div v-html="shortCode"></div>`},li={metadata:ni,component:oi},{__:H,_x:Er,_n:Or,_nx:Ir}=wp.i18n,pi={name:H("Content Navigator","uipress-pro"),moduleName:"uip-content-navigator",description:H("Creates a navigatable file tree of all your site content like posts, pages and media. Allows for creation of new folders and organisation of content","uipress-pro"),category:H("Dynamic","uipress-pro"),group:"dynamic",premium:!0,path:uipProPath+"assets/js/uip/blocks/dynamic/content-navigator.min.js",icon:"folder_open",settings:{},optionsEnabled:[{name:"block",label:H("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"choiceSelect",componentName:"choice-select",uniqueKey:"limitToAuthor",label:H("Private posts","uipress-pro"),help:H("Limits blocks content to users own posts, pages and media","uipress-pro")},{option:"searchPostTypes",componentName:"search-post-type-select",label:H("Post types","uipress-lite"),help:H("Post types available in navigator ","uipress-pro")},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"defaultLink",label:H("Default link","uipress-lite"),args:{options:{editPost:{value:"editPost",label:H("Edit post","uipress-lite")},viewPost:{value:"viewPost",label:H("View post","uipress-lite")}}},value:{value:"editPost"}}]},{name:"style",label:H("Style","uipress-pro"),icon:"palette",styleType:"style"}]},{__:Se,_x:Fr,_n:jr,_nx:qr}=wp.i18n,ui={props:{parent:[String,Number],list:Array,incrementCount:Function},data(){return{newFolder:{name:"",color:"rgb(108, 76, 203)"},strings:{newFolder:Se("New folder","uipress-pro"),folderName:Se("Folder name","uipress-pro"),folderColor:Se("Folder colour","uipress-pro"),create:Se("Create","uipress-pro")}}},methods:{async createNewFolder(){if(this.newFolder.name==""){this.uipApp.notifications.notify(Se("Folder name can not be blank","uipress-pro"),"","error",!0);return}let e=new FormData;e.append("action","uip_create_folder"),e.append("security",uip_ajax.security),e.append("folderParent",this.parent),e.append("folderName",this.newFolder.name),e.append("folderColor",this.newFolder.color);const t=await this.sendServerRequest(uip_ajax.ajax_url,e);t.error&&this.uipApp.notifications.notify(t.message,"","error",!0),t.success&&(typeof this.incrementCount<"u"&&this.incrementCount(1),this.uipApp.notifications.notify(Se("Folder created","uipress-pro"),"","success",!0),this.isObject(t.folder)&&this.list.push(t.folder))}}},ci={class:"uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-link-muted uip-border-round uip-no-text-select uip-max-w-100p uip-padding-xxs uip-padding-top-xxxs uip-padding-bottom-xxxs"},di={class:"uip-overflow-hidden uip-text-ellipsis uip-no-wrap uip-flex-grow"},hi={class:"uip-padding-s uip-flex uip-flex-column uip-row-gap-xxs"},mi={class:"uip-text-muted"},gi={class:"uip-text-muted uip-margin-top-xs"},fi={class:"uip-background-muted uip-border-round uip-overflow-hidden uip-padding-xxs"},bi={class:"uip-flex uip-flex-row uip-gap-xxs uip-flex-center"};function yi(e,t,i,a,s,r){const n=ee("color-select"),o=ee("dropdown");return h(),M(o,{pos:"right top"},{trigger:Ce(()=>[c("div",ci,[(h(),M(z(e.globalComponents.AppIcon),{class:"uip-text-l",icon:"add"})),c("div",di,P(s.strings.newFolder),1)])]),content:Ce(()=>[c("div",hi,[c("div",mi,P(s.strings.folderName),1),Xe(c("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=p=>s.newFolder.name=p),class:"uip-text-s uip-input-small"},null,512),[[et,s.newFolder.name]]),c("div",gi,P(s.strings.folderColor),1),c("div",fi,[c("div",bi,[Ae(n,{value:{value:s.newFolder.color},returnData:p=>{s.newFolder.color=p.value}},null,8,["value","returnData"])])]),c("button",{class:"uip-button-primary uip-text-s uip-margin-top-s",onClick:t[1]||(t[1]=p=>r.createNewFolder())},P(s.strings.create),1)])]),_:1})}const bt=tt(ui,[["render",yi]]),{__:I,_x:Vr,_n:Ur,_nx:Br}=wp.i18n,vi={name:"ContentFolder",components:{NewFolder:bt},props:{folder:Object,removeSelf:Function,currentID:[Number,String,Boolean],updateID:Function},data(){return{loading:!1,defaults:[],newFolder:{name:"",color:"rgb(108, 76, 203)"},strings:{placeholder:I("Input placeholder...","uipress-pro"),new:I("New","uipress-pro"),loadMore:I("Load more","uipress-pro"),search:I("Search","uipress-pro"),view:I("View","uipress-pro"),edit:I("Edit","uipress-pro"),delete:I("Delete","uipress-pro"),folders:I("Folders","uipress-pro"),duplicate:I("Duplicate","uipress-pro"),folderName:I("Folder name","uipress-pro"),folderColor:I("Folder colour","uipress-pro"),update:I("Update","uipress-pro"),edit:I("Edit","uipress-pro")}}},inject:["limitToauthor","defaultLinkType","postTypes"],methods:{async getFolderContent(e){if(!this.folder.open)return;"page"in this.folder||(this.folder.page=1),e&&(this.folder.loading=!0);let t=new FormData;t.append("action","uip_get_folder_content"),t.append("security",uip_ajax.security),t.append("limitToauthor",this.limitToauthor),t.append("postTypes",JSON.stringify(this.postTypes)),t.append("page",this.folder.page),t.append("search",this.folder.search),t.append("id",this.folder.id);const i=await this.sendServerRequest(uip_ajax.ajax_url,t);this.folder.loading=!1,i.error&&this.uipApp.notifications.notify(i.message,"","error",!0),i.success&&(this.folder.totalFound=i.totalFound,this.folder.page>1?this.folder.content=this.folder.content.concat(i.content):this.folder.content=i.content)},async updateItemFolder(e){let t=new FormData;t.append("action","uip_update_item_folder"),t.append("security",uip_ajax.security),t.append("item",JSON.stringify(e)),t.append("newParent",this.folder.id);const i=await this.sendServerRequest(uip_ajax.ajax_url,t);this.folder.loading=!1,i.error&&this.uipApp.notifications.notify(i.message,"","error",!0),i.success&&(e.parent=this.folder.id)},async deleteFolder(){let e=new FormData;e.append("action","uip_delete_folder"),e.append("security",uip_ajax.security),e.append("postTypes",JSON.stringify(this.postTypes)),e.append("folderId",this.folder.id);const t=await this.sendServerRequest(uip_ajax.ajax_url,e);this.folder.loading=!1,t.error&&this.uipApp.notifications.notify(t.message,"","error",!0),t.success&&(this.removeSelf(),this.uipApp.notifications.notify(I("Folder deleted","uipress-pro"),"","sucess",!0))},async updateFolder(){let e=new FormData;e.append("action","uip_update_folder"),e.append("security",uip_ajax.security),e.append("folderId",this.folder.id),e.append("title",this.folder.title),e.append("color",this.folder.color);const t=await this.sendServerRequest(uip_ajax.ajax_url,e);t.error&&this.uipApp.notifications.notify(t.message,"","error",!0),t.success&&(this.uipApp.notifications.notify(I("Folder updated","uipress-pro"),"","sucess",!0),this.folder.showEdit=!1)},async duplicateItem(e,t){let i=new FormData;i.append("action","uip_duplicate_post"),i.append("security",uip_ajax.security),i.append("postID",e.id);const a=await this.sendServerRequest(uip_ajax.ajax_url,i);if(a.error&&this.uipApp.notifications.notify(a.message,"","error",!0),a.success){this.uipApp.notifications.notify(I("Item duplicated","uipress-pro"),"","sucess",!0);let s=JSON.parse(JSON.stringify(e));s.id=a.newID,s.title=a.newTitle,s.draft="draft",this.folder.content.splice(t,0,s)}},async deleteItem(e,t){let i=new FormData;i.append("action","uip_delete_post_from_folder"),i.append("security",uip_ajax.security),i.append("postID",e.id);const a=await this.sendServerRequest(uip_ajax.ajax_url,i);a.error&&this.uipApp.notifications.notify(a.message,"","error",!0),a.success&&(this.uipApp.notifications.notify(I("Item deleted","uipress-pro"),"","sucess",!0),this.folder.content.splice(t,1),this.folder.totalFound-=1,this.folder.count-=1)},itemAdded(e){if(e.added){if(this.folder.content.filter(i=>i.id===e.added.element.id).length>1){this.folder.content.splice(e.added.newIndex,1);return}this.folder.content.sort(function(i,a){let s=i.title.toUpperCase(),r=a.title.toUpperCase();return s<r?-1:s>r?1:0}),this.folder.count+=1,this.updateItemFolder(e.added.element)}e.removed&&(this.folder.count-=1,this.folder.totalFound-=1)},updatePage(e){this.updateID(e.id),this.defaultLinkType=="editPost"?this.updateAppPage(e.edit_href):this.updateAppPage(e.view_href)},loadMore(e){e.page+=1,this.getFolderContent()},checkForBlank(e){e.search==""&&(e.page=1,this.getFolderContent(!0))}}},xi=["data-id"],_i={class:"uip-flex uip-flex-column uip-row-gap-xxs uip-max-w-100p"},wi={class:"uip-text-muted"},ki={class:"uip-padding-xxxs uip-text-l hover:uip-background-muted uip-link-muted uip-border-round"},Di={class:"uip-flex uip-flex-column uip-w-200 uip-max-w-200"},Ai={key:0,class:"uip-padding-xs uip-border-bottom uip-flex uip-flex-column uip-gap-xxs"},Ci={class:"uip-text-muted"},Si={class:"uip-text-muted uip-margin-top-xs"},Ti={class:"uip-background-muted uip-border-round uip-overflow-hidden uip-padding-xxs"},Ri={class:"uip-flex uip-flex-row uip-gap-xxs uip-flex-center"},Pi={class:"uip-padding-xs uip-border-bottom uip-flex uip-flex-column uip-gap-xxs uip-flex-start"},Mi={class:""},Ni={key:1,class:"uip-padding-xs uip-border-bottom uip-flex uip-flex-column uip-gap-xxxs uip-flex-start"},Li={class:""},$i={key:0,class:"uip-max-w-100p uip-scale-in-top-center"},Ei={class:"uip-flex uip-flex-column uip-row-gap-xxs uip-max-w-100p uip-padding-xxxs uip-margin-bottom-xs uip-margin-left-xs uip-padding-left-xs uip-padding-bottom-remove uip-before-border"},Oi={key:0,class:"uip-padding-s uip-flex uip-flex-middle uip-flex-center"},Ii={key:1,class:"uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-text-muted uip-padding-xxs uip-padding-top-xxxs uip-padding-bottom-xxxs"},Fi=["placeholder"],ji={class:"uip-flex uip-flex-center uip-flex-middle uip-w-16"},qi={key:0,class:"uip-w-5 uip-ratio-1-1 uip-border-circle uip-background-orange uip-display-block"},Vi={key:1,class:"uip-w-5 uip-ratio-1-1 uip-border-circle uip-background-green uip-display-block"},Ui={key:2,class:"uip-w-5 uip-ratio-1-1 uip-border-circle uip-background-accent uip-display-block"},Bi=["onClick"],Ki={class:"uip-padding-xxxs uip-text-l hover:uip-background-muted uip-link-muted uip-border-round"},Hi={class:"uip-flex uip-flex-column uip-w-200 uip-max-w-200"},Gi={class:"uip-padding-xs uip-border-bottom uip-flex uip-flex-column uip-gap-xs uip-flex-start"},Yi={class:"uip-padding-xxs uip-border-round uip-text-xs uip-background-primary-wash uip-line-height-1"},Ji={class:""},zi={class:"uip-padding-xs uip-border-bottom uip-flex uip-flex-column uip-gap-xxs uip-flex-start"},Wi=["onClick"],Qi={class:""},Zi=["onClick"],Xi={class:""},ea=["onClick"],ta={class:""},ia={key:0,class:"uip-padding-xs uip-border-bottom uip-flex uip-flex-column uip-gap-xxxs uip-flex-start"},aa=["onClick"],sa={class:""},ra={key:0,class:"uip-padding-right-xs"};function na(e,t,i,a,s,r){const n=ee("AppIcon"),o=ee("color-select"),p=ee("dropdown"),m=ee("loading-chart"),v=ee("NewFolder"),W=ee("ContentFolder",!0),te=ee("VueDraggableNext");return h(),R("div",{"data-id":i.folder.id},[c("div",_i,[c("div",{class:qe(["uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-link-default uip-padding-xxs uip-padding-top-xxxs uip-padding-bottom-xxxs hover:uip-background-muted uip-border-round uip-no-text-select",i.folder.open?"uip-background-muted":""])},[c("div",{style:wt("color:"+i.folder.color),onClick:t[0]||(t[0]=u=>{i.folder.open=!i.folder.open,r.getFolderContent(!0)})},[(h(),M(z(e.globalComponents.AppIcon),{class:"uip-text-l",icon:i.folder.open?"folder_open":"folder"},null,8,["icon"]))],4),c("div",{class:"uip-flex-grow",onClick:t[1]||(t[1]=u=>{i.folder.open=!i.folder.open,r.getFolderContent(!0)})},P(i.folder.title),1),c("div",wi,P(i.folder.count),1),Ae(p,{pos:"right top"},{trigger:Ce(()=>[c("div",ki,[Ae(n,{icon:"more_vert"})])]),content:Ce(()=>[c("div",Di,[i.folder.showEdit?(h(),R("div",Ai,[c("div",Ci,P(s.strings.folderName),1),Xe(c("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=u=>i.folder.title=u),class:"uip-text-s uip-input-small"},null,512),[[et,i.folder.title]]),c("div",Si,P(s.strings.folderColor),1),c("div",Ti,[c("div",Ri,[Ae(o,{value:{value:i.folder.color},returnData:u=>{i.folder.color=u.value}},null,8,["value","returnData"])])]),c("button",{class:"uip-button-primary uip-text-s uip-margin-top-s",onClick:t[3]||(t[3]=u=>r.updateFolder())},P(s.strings.update),1)])):Q("",!0),c("div",Pi,[c("div",{class:"uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-link-muted",onClick:t[4]||(t[4]=u=>i.folder.showEdit=!i.folder.showEdit)},[(h(),M(z(e.globalComponents.AppIcon),{class:"uip-text-l",icon:"edit"})),c("div",Mi,P(s.strings.edit),1)])]),i.folder.canDelete?(h(),R("div",Ni,[c("div",{class:"uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-link-danger",onClick:t[5]||(t[5]=u=>r.deleteFolder())},[(h(),M(z(e.globalComponents.AppIcon),{class:"uip-text-l",icon:"delete"})),c("div",Li,P(s.strings.delete),1)])])):Q("",!0)])]),_:1})],2)]),i.folder.open?(h(),R("div",$i,[c("div",Ei,[i.folder.loading?(h(),R("div",Oi,[Ae(m)])):Q("",!0),i.folder.count>10?(h(),R("div",Ii,[(h(),M(z(e.globalComponents.AppIcon),{class:"uip-text-l",icon:"search"})),Xe(c("input",{class:"uip-text-s uip-blank-input uip-flex-grow",placeholder:s.strings.search,"onUpdate:modelValue":t[6]||(t[6]=u=>i.folder.search=u),onKeyup:[t[7]||(t[7]=u=>r.checkForBlank(i.folder)),t[8]||(t[8]=kt(u=>{i.folder.page=1,r.getFolderContent(!0)},["enter"]))]},null,40,Fi),[[et,i.folder.search]]),(h(),M(z(e.globalComponents.AppIcon),{class:"uip-padding-xxxs uip-text-l uip-text-muted",icon:"keyboard_return"}))])):Q("",!0),Ae(v,{list:i.folder.content,incrementCount:function(u){i.folder.count+=u},parent:i.folder.id},null,8,["list","incrementCount","parent"]),i.folder.content&&i.folder.content.length>0?(h(),M(te,{key:2,list:i.folder.content,class:"uip-flex uip-flex-column uip-max-w-100p",group:{name:"post-defaults",pull:!0,put:!0,revertClone:!0},animation:"300",onStart:t[10]||(t[10]=u=>e.drag=!0),onEnd:t[11]||(t[11]=u=>e.drag=!1),onChange:r.itemAdded,sort:!1,itemKey:"id"},{default:Ce(()=>[(h(!0),R(Oe,null,ct(i.folder.content,(u,K)=>(h(),R(Oe,{key:u.id},[u.type=="uip-ui-folder"?(h(),M(W,{key:0,folder:u,removeSelf:function(){i.folder.content.splice(K,1)},currentID:i.currentID,updateID:i.updateID},null,8,["folder","removeSelf","currentID","updateID"])):(h(),R("div",{key:1,class:qe(["uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-border-round uip-no-text-select uip-max-w-100p uip-padding-left-xxs uip-padding-right-xxs",i.currentID==u.id?"uip-cursor-pointer":"uip-link-default"])},[c("div",ji,[u.status=="draft"?(h(),R("div",qi)):u.status=="publish"||u.status=="inherit"?(h(),R("div",Vi)):(h(),R("div",Ui))]),c("div",{class:qe(["uip-overflow-hidden uip-text-ellipsis uip-no-wrap uip-flex-grow",i.currentID==u.id?"uip-text-accent":""]),onClick:me=>r.updatePage(u)},P(u.title),11,Bi),Ae(p,{pos:"right top"},{trigger:Ce(()=>[c("div",Ki,[(h(),M(z(e.globalComponents.AppIcon),{icon:"more_vert"}))])]),content:Ce(()=>[c("div",Hi,[c("div",Gi,[c("div",Yi,P(u.type),1),c("div",Ji,P(u.title),1)]),c("div",zi,[c("div",{class:"uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-link-muted",onClick:me=>{i.updateID(u.id),e.updateAppPage(u.view_href)}},[(h(),M(z(e.globalComponents.AppIcon),{class:"uip-text-l",icon:"visibility"})),c("div",Qi,P(s.strings.view),1)],8,Wi),c("div",{class:"uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-link-muted",onClick:me=>{i.updateID(u.id),e.updateAppPage(u.edit_href)}},[(h(),M(z(e.globalComponents.AppIcon),{class:"uip-text-l",icon:"edit"})),c("div",Xi,P(s.strings.edit),1)],8,Zi),u.type!="attachment"?(h(),R("div",{key:0,class:"uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-link-muted",onClick:me=>r.duplicateItem(u,K)},[(h(),M(z(e.globalComponents.AppIcon),{class:"uip-text-l",icon:"content_copy"})),c("div",ta,P(s.strings.duplicate),1)],8,ea)):Q("",!0)]),u.canDelete?(h(),R("div",ia,[c("div",{class:"uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-link-danger",onClick:me=>r.deleteItem(u,K)},[(h(),M(z(e.globalComponents.AppIcon),{class:"uip-text-l",icon:"delete"})),c("div",sa,P(s.strings.delete),1)],8,aa)])):Q("",!0)])]),_:2},1024)],2))],64))),128)),i.folder.content?(h(),R(Oe,{key:0},[i.folder.content.length>1&&i.folder.content.length<i.folder.totalFound?(h(),R("div",ra,[c("div",{class:"uip-text-s uip-link-muted uip-border-round uip-padding-xxs uip-padding-left-remove uip-display-inline-flex",onClick:t[9]||(t[9]=u=>r.loadMore(i.folder))},P(s.strings.loadMore),1)])):Q("",!0)],64)):Q("",!0)]),_:1},8,["list","onChange"])):Q("",!0)])])):Q("",!0)],8,xi)}const oa=tt(vi,[["render",na]]),{__:j,_x:Kr,_n:Hr,_nx:Gr}=wp.i18n,la={components:{ContentFolder:oa,NewFolder:bt},props:{display:String,name:String,block:Object},data(){return{loading:!1,defaults:[],currentID:!1,baseFolders:[],limitToauthor:this.get_block_option(this.block,"block","limitToAuthor"),strings:{placeholder:j("Input placeholder...","uipress-pro"),new:j("New","uipress-pro"),loadMore:j("Load more","uipress-pro"),search:j("Search","uipress-pro"),view:j("View","uipress-pro"),edit:j("Edit","uipress-pro"),duplicate:j("Duplicate","uipress-pro"),delete:j("Delete","uipress-pro"),folders:j("Folders","uipress-pro"),newFolder:j("New folder","uipress-pro"),folderName:j("Folder name","uipress-pro"),folderColor:j("Folder colour","uipress-pro"),create:j("Create","uipress-pro")}}},provide(){return{limitToauthor:this.limitToauthor,currentID:this.currentID,defaultLinkType:this.getDefaultLinkType,postTypes:this.getPostTypes}},inject:["uiTemplate"],async mounted(){await this.$nextTick(),this.getDefaults()},computed:{getDefaultLinkType(){let e=this.get_block_option(this.block,"block","defaultLink");return e=this.isObject(e)?e.value:e,e||"editPost"},getPostTypes(){return this.get_block_option(this.block,"block","searchPostTypes")},returnCurrentID(){return JSON.stringify(this.currentID)}},methods:{async getDefaults(){if(this.loading)return;this.loading=!0;let e=[];typeof this.getPostTypes<"u"&&Array.isArray(this.getPostTypes)&&(e=this.getPostTypes),e=JSON.stringify(e);let t=this.get_block_option(this.block,"block","limitToAuthor"),i=new FormData;i.append("action","uip_get_navigator_defaults"),i.append("security",uip_ajax.security),i.append("limitToauthor",t),i.append("postTypes",e);const a=await this.sendServerRequest(uip_ajax.ajax_url,i);this.loading=!1,a.error&&this.uipApp.notifications.notify(a.message,"","error",!0),a.success&&(this.baseFolders=a.baseFolders,this.defaults=a.postTypes)},async getDefaultContent(e,t){if(!e.open)return;"page"in e||(e.page=1),t&&(e.loading=!0);let i=this.get_block_option(this.block,"block","limitToAuthor"),a=new FormData;a.append("action","uip_get_default_content"),a.append("security",uip_ajax.security),a.append("limitToauthor",i),a.append("postType",e.type),a.append("page",e.page),a.append("search",e.search);const s=await this.sendServerRequest(uip_ajax.ajax_url,a);e.loading=!1,s.error&&this.uipApp.notifications.notify(s.message,"","error",!0),s.success&&(e.totalFound=s.totalFound,e.page>1?e.content=e.content.concat(s.content):e.content=s.content)},async updateItemFolder(e){let t=new FormData;t.append("action","uip_update_item_folder"),t.append("security",uip_ajax.security),t.append("item",JSON.stringify(e)),t.append("newParent","uipfalse");const i=await this.sendServerRequest(uip_ajax.ajax_url,t);i.error&&this.uipApp.notifications.notify(i.message,"","error",!0),i.success&&(e.parent="uipfalse")},async duplicateItem(e,t,i){let a=new FormData;a.append("action","uip_duplicate_post"),a.append("security",uip_ajax.security),a.append("postID",e.id);const s=await this.sendServerRequest(uip_ajax.ajax_url,a);if(s.error&&this.uipApp.notifications.notify(s.message,"","error",!0),s.success){this.uipApp.notifications.notify(j("Item duplicated","uipress-pro"),"","sucess",!0);let r=JSON.parse(JSON.stringify(e));r.id=s.newID,r.title=s.newTitle,r.status="draft",i.splice(t,0,r)}},async deleteItem(e,t,i){let a=new FormData;a.append("action","uip_delete_post_from_folder"),a.append("security",uip_ajax.security),a.append("postID",e.id);const s=await this.sendServerRequest(uip_ajax.ajax_url,a);s.error&&this.uipApp.notifications.notify(s.message,"","error",!0),s.success&&(this.uipApp.notifications.notify(j("Item deleted","uipress-pro"),"","sucess",!0),i.content.splice(t,1),i.totalFound-=1)},itemAdded(e){if(e.added){if(e.added.element.type!=="uip-ui-folder"&&(this.baseFolders.splice(e.added.newIndex,1),this.uipApp.notifications.notify(j("Item removed from folder","uipress-pro"),"","error")),this.baseFolders.filter(i=>i.id===e.added.element.id).length>1){this.baseFolders.splice(e.added.newIndex,1);return}this.baseFolders.sort(function(i,a){let s=i.title.toUpperCase(),r=a.title.toUpperCase();return s<r?-1:s>r?1:0}),this.updateItemFolder(e.added.element)}},updatePage(e){this.currentID=e.id,this.getDefaultLinkType=="editPost"?this.updateAppPage(e.edit_href):this.updateAppPage(e.view_href)},newPostType(e){this.currentID=!1,this.updateAppPage(e.new_href)},loadMore(e){e.page+=1,this.getDefaultContent(e)},checkForBlank(e){e.search==""&&(e.page=1,this.getDefaultContent(e,!0))}},template:d`
    <div>
      <div class="uip-padding-s uip-flex uip-flex-middle uip-flex-center" v-if="loading"><loading-chart></loading-chart></div>

      <div class="uip-flex uip-flex-column uip-max-w-100p" v-else>
        <template v-for="type in defaults">
          <div class="uip-flex uip-flex-column uip-row-gap-xxs uip-max-w-100p">
            <div
              class="uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-link-default uip-padding-xxs hover:uip-background-muted uip-border-round uip-no-text-select"
              :class="type.open ? 'uip-background-muted' : ''"
              @click="type.open = !type.open;getDefaultContent(type, true)"
            >
              <AppIcon icon="database" class="uip-text-xl" />
              <div class="uip-flex-grow">{{type.label}}</div>
              <div class="uip-text-muted">{{type.count}}</div>
            </div>

            <div v-if="type.open" class="uip-max-w-100p uip-scale-in-top-center">
              <div class="uip-flex uip-flex-column uip-row-gap-xxs uip-max-w-100p uip-padding-xxxs uip-margin-bottom-xs uip-margin-left-s">
                <!-- Search post types -->
                <div v-if="type.count > 10" class="uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-no-text-select uip-max-w-100p">
                  <div class="uip-w-5 uip-ratio-1-1 uip-position-relative"><AppIcon class=" uip-position-absolute uip-top-50p uip-left-50p uip-translate-all-50p" icon="search"></div>
                  <input
                    class="uip-text-s uip-blank-input uip-flex-grow"
                    :placeholder="strings.search"
                    v-model="type.search"
                    @keyup="checkForBlank(type)"
                    v-on:keyup.enter="type.page = 1; getDefaultContent(type, true)"
                  />
                  <div class=" uip-padding-xxxs uip-text-l uip-text-muted uip-border-round"><AppIcon icon="keyboard_return"/></div>
                </div>

                <!-- new post type -->
                <div class="uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-link-default uip-border-round uip-no-text-select uip-max-w-100p" @click="newPostType(type)">
                  <div class="uip-w-5 uip-ratio-1-1 uip-position-relative"><AppIcon class="uip-position-absolute uip-top-50p uip-left-50p uip-translate-all-50p" icon="add"/></div>
                  <div class="uip-overflow-hidden uip-text-ellipsis uip-no-wrap uip-flex-grow">{{strings.new}} {{type.name}}</div>
                </div>

                <div class="uip-padding-s uip-flex uip-flex-middle uip-flex-center" v-if="type.loading"><loading-chart></loading-chart></div>

                <!-- Loop through type content -->
                <VueDraggableNext
                  v-if="type.content && type.content.length > 0"
                  :list="type.content"
                  class="uip-flex uip-flex-column uip-max-w-100p"
                  :group="{ name: 'post-defaults', pull: 'clone', put: false, revertClone: true }"
                  animation="300"
                  @start="drag = true"
                  @end="drag = false"
                  :sort="false"
                  itemKey="id"
                >
                  <template v-for="(item, index) in type.content" :key="type.id" :index="index">
                    <div
                      class="uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-border-round uip-no-text-select uip-max-w-100p"
                      :class="currentID == item.id ? 'uip-cursor-pointer' : 'uip-link-default'"
                    >

                      <!-- Post status -->
                      <div v-if="item.status == 'draft'" class="uip-w-5 uip-ratio-1-1 uip-border-circle uip-background-orange uip-display-block"></div>
                      <div v-else-if="item.status == 'publish' || item.status == 'inherit'" class="uip-w-5 uip-ratio-1-1 uip-border-circle uip-background-green uip-display-block"></div>
                      <div v-else class="uip-w-5 uip-ratio-1-1 uip-border-circle uip-background-accent uip-display-block"></div>

                      <div class="uip-overflow-hidden uip-text-ellipsis uip-no-wrap uip-flex-grow" @click="updatePage(item)" :class="currentID == item.id ? 'uip-text-accent' : ''">{{item.title}}</div>

                      <dropdown pos="right top">
                        <template v-slot:trigger>
                          <div class=" uip-padding-xxxs uip-text-l hover:uip-background-muted uip-link-muted uip-border-round"><AppIcon icon="more_vert"/></div>
                        </template>
                        <template v-slot:content>
                          <div class="uip-flex uip-flex-column uip-max-w-200 uip-text-default">
                            <div class="uip-padding-xs uip-border-bottom uip-flex uip-flex-column uip-gap-xs uip-flex-start">
                              <div class="uip-padding-xxs uip-border-round uip-text-xs uip-background-primary-wash uip-line-height-1">{{item.type}}</div>
                              <div class="">{{item.title}}</div>
                            </div>

                            <div class="uip-padding-xs uip-border-bottom uip-flex uip-flex-column uip-gap-xxs">
                              <a
                                :href="item.view_href"
                                class="uip-no-underline uip-flex uip-flex-row uip-gap-s uip-flex-center uip-link-muted uip-flex-reverse uip-flex-between"
                                @click="currentID = item.id;updateAppPage(item.view_href)"
                              >
                                <AppIcon icon="visibility" class="uip-text-l"/>
                                <div class="">{{strings.view}}</div>
                              </a>

                              <a
                                :href="item.edit_href"
                                class="uip-no-underline uip-flex uip-flex-row uip-gap-s uip-flex-center uip-link-muted uip-flex-reverse uip-flex-between"
                                @click="currentID = item.id;updateAppPage(item.edit_href)"
                              >
                                <AppIcon icon="edit" class="uip-text-l"/>
                                <div class="">{{strings.edit}}</div>
                              </a>

                              <div
                                v-if="item.type != 'attachment'"
                                class="uip-flex uip-flex-row uip-gap-s uip-flex-center uip-link-muted uip-flex-reverse uip-flex-between"
                                @click="duplicateItem(item, index, type.content)"
                              >
                                <AppIcon icon="content_copy" class="uip-text-l"/>
                                <div class="">{{strings.duplicate}}</div>
                              </div>
                            </div>

                            <div v-if="item.canDelete" class="uip-padding-xs uip-border-bottom uip-flex uip-flex-column uip-gap-xxxs ">
                              <div class="uip-flex uip-flex-row uip-gap-s uip-flex-center uip-link-danger uip-flex-reverse uip-flex-between" @click="deleteItem(item, index, type)">
                                <AppIcon icon="delete" class="uip-text-l"/>
                                <div class="">{{strings.delete}}</div>
                              </div>
                            </div>
                          </div>
                        </template>
                      </dropdown>
                    </div>
                  </template>
                </VueDraggableNext>

                <div v-if="type.content.length < type.totalFound" class="uip-padding-right-xs">
                  <div class="uip-text-s uip-link-muted uip-border-round uip-padding-xxs uip-padding-left-remove uip-display-inline-flex" @click="loadMore(type)">{{strings.loadMore}}</div>
                </div>
              </div>
            </div>
          </div>
        </template>

        <!-- End base folders -->

        <!-- User folders -->

        <div class="uip-text-muted uip-padding-xxs uip-margin-bottom-xxxs uip-margin-top-xxs">{{strings.folders}}</div>

        <!-- Loop through top level folders -->
        <div class="uip-max-w-100p">
          <VueDraggableNext
            v-if="baseFolders.length > 0"
            :list="baseFolders"
            class="uip-flex uip-flex-column uip-max-w-100p"
            :group="{ name: 'user-folders', pull: true, put: true}"
            animation="300"
            @start="drag = true"
            @end="drag = false"
            @change="itemAdded"
            :sort="false"
            itemKey="id"
          >
            <template v-for="(folder, index) in baseFolders" :key="folder.id" :index="index">
              <ContentFolder :folder="folder" :removeSelf="function(){baseFolders.splice(index, 1)}" :currentID="currentID" :updateID="function(d){currentID = d}" />
            </template>
          </VueDraggableNext>

          <!--FOOTER-->
          <template>
            <NewFolder :list="baseFolders" parent="uipfalse" />
          </template>
        </div>
      </div>
    </div>
  `},pa={metadata:pi,component:la},{__:X,_x:Yr,_n:Jr,_nx:zr}=wp.i18n,ua={name:X("Grouped Date range","uipress-pro"),moduleName:"uip-grouped-date-range",description:X("Outputs a grouped date picker. This date picker is used for controlling it's siblings range such as analytic blocks.","uipress-pro"),category:X("Dynamic","uipress-pro"),group:"dynamic",premium:!0,icon:"event",settings:{},content:[],optionsEnabled:[{name:"block",label:X("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"inputPlaceHolder",label:X("Placeholder","uipress-pro"),value:{string:X("Placeholder text...","uipress-pro")}}]},{name:"style",label:X("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"inputStyle",label:X("Input style","uipress-pro"),icon:"input",styleType:"style",class:".uip-date-input"},{name:"label",label:X("Label","uipress-pro"),icon:"label",styleType:"style",class:".uip-input-label"},{name:"contentArea",label:X("Group area","uipress-pro"),icon:"dashboard_customize",styleType:"style",class:".uip-date-group-area"}]},{__:ca,_x:Wr,_n:Qr,_nx:Zr}=wp.i18n,da={props:{display:String,name:String,block:Object},data(){return{loading:!0,range:!1,picker:!1,dateRange:"",date:{single:"",dateRange:{start:"",end:""},dateRangeComparison:{start:"",end:""}},strings:{placeholder:ca("Input placeholder...","uipress-pro")}}},watch:{range:{handler(e,t){this.picker&&(this.picker.destroy(),this.mountPicker())}}},mounted(){this.mountPicker()},computed:{returnPlaceHolder(){const e=this.get_block_option(this.block,"block","inputPlaceHolder",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnLabel(){const e=this.get_block_option(this.block,"block","inputLabel",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnRequired(){return this.get_block_option(this.block,"block","inputRequired")},returnName(){return this.get_block_option(this.block,"block","inputName")},returnDateRange(){return this.range=this.get_block_option(this.block,"block","dateRange",!0),this.range},returnPickerArgs(){return this.returnDateRange,{element:this.$refs.datepicker,css:[uipProPath+"assets/css/libs/uip-datepicker.css"],lang:this.uipApp.data.options.locale,plugins:[ft,gt,mt],grid:2,calendars:2,LockPlugin:{maxDate:new Date},zIndex:99,RangePlugin:{tooltip:!0}}}},methods:{setGroupDates(e,t){const i=this.getChildIDS(),a=new CustomEvent("uipress/app/daterange/change",{detail:{groupDate:{start:e,end:t},IDS:i}});document.dispatchEvent(a)},getChildIDS(){const e=t=>{if(!Array.isArray(t))return[];let i=[];for(let a of t)i.push(a.uid),Array.isArray(a.content)&&(i=[...i,...e(a.content)]);return i};return this.block.content.length?e(this.block.content):[]},mountPicker(){this.picker=new ht.create(this.returnPickerArgs),this.picker.on("select",this.handleDateChange)},handleDateChange(e){const t=this.picker.getStartDate(),i=this.picker.getEndDate();this.setGroupDates(t,i)}},template:d` <div class="uip-flex uip-flex-column">
    <div class="uip-background-muted uip-border-round uip-overflow-hidden uip-padding-xxs uip-flex uip-gap-xs uip-flex-center uip-date-input uip-inline-flex">
      <AppIcon icon="calendar_month" class="uip-text-l" />
      <input
        ref="datepicker"
        :value="dateRange"
        :name="returnName"
        :range="returnDateRange"
        class="uip-blank-input uip-text-s"
        type="text"
        :placeholder="returnPlaceHolder"
        :required="returnRequired"
      />
    </div>

    <uip-content-area class="uip-date-group-area" :content="block.content" :returnData="(data)=>{block.content = data}" />
  </div>`},ha={metadata:ua,component:da},{__:ie,_x:Xr,_n:en,_nx:tn}=wp.i18n,ma={name:ie("Media library","uipress-pro"),moduleName:"uip-media-library",description:ie("Outputs a media library, with upload, delete and folder features","uipress-pro"),category:ie("Dynamic","uipress-pro"),group:"dynamic",premium:!0,icon:"photo_library",settings:{},optionsEnabled:[{name:"block",label:ie("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"trueFalse",componentName:"choice-select",uniqueKey:"limitToAuthor",label:ie("Private media","uipress-pro"),help:ie("Limits media to users own","uipress-pro")},{option:"number",componentName:"uip-number",uniqueKey:"photosPerPage",label:ie("Photos per page","uipress-pro"),value:20}]},{name:"style",label:ie("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"attachmentArea",label:ie("Image area","uipress-lite"),icon:"image",styleType:"style",class:".uip-attachment-area"}]},{__:ga,_x:an,_n:sn,_nx:rn}=wp.i18n,fa={props:{display:String,name:String,block:Object},data(){return{loading:!0,range:!1,picker:!1,imageEditor:!1,dateRange:"",date:{single:"",dateRange:{start:"",end:""},dateRangeComparison:{start:"",end:""}},strings:{placeholder:ga("Input placeholder...","uipress-pro")}}},mounted(){},computed:{limitToAuthor(){return this.get_block_option(this.block,"block","limitToAuthor",!0)},returnRange(){let e=this.get_block_option(this.block,"block","photosPerPage");return e=isNaN(e)?20:e,e=e>999?999:e,e=e||20,e}},template:d` <uipMediaLibrary />`},ba={metadata:ma,component:fa},{__:ae,_x:nn,_n:on,_nx:ln}=wp.i18n,ya={name:ae("Orders kanban","uipress-lite"),moduleName:"orders-kanban",description:ae("Creates a kanban view of recent woocommerce orders and allows for drag and drop management","uipress-lite"),group:"dynamic",premium:!0,icon:"view_kanban",settings:{},optionsEnabled:[{name:"block",label:ae("Block options","uipress-lite"),icon:"check_box_outline_blank",options:[{option:"trueFalse",uniqueKey:"hideSearch",componentName:"choice-select",label:ae("Hide search","uipress-pro")},{option:"number",componentName:"uip-number",uniqueKey:"postsPerPage",label:ae("Orders per page","uipress-lite"),value:10}]},{name:"style",label:ae("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"statusTitle",label:ae("Status titles","uipress-lite"),icon:"list",styleType:"style",class:".uip-status-title"},{name:"orderItem",label:ae("Order item","uipress-lite"),icon:"title",styleType:"style",class:".uip-order-card"},{name:"advanced",label:ae("Advanced","uipress-lite"),icon:"code"}]},{__:Me,_x:pn,_n:un,_nx:cn}=wp.i18n,va={props:{parent:Object,search:String,fetchMore:Function},data(){return{cancelNotes:"",strings:{loadMore:Me("Load more","uipress-pro"),cancelOrder:Me("Cancel order","uipress-pro"),cancellationNotes:Me("Cancellation notes","uipress-pro"),emptyColumn:Me("No orders found with this status")}}},methods:{returnStatusBG(e){let t="uip-background-orange-wash";switch(e){case"completed":t="uip-background-primary-wash";break;case"processing":t="uip-background-green-wash";break;case"failed":t="uip-background-red-wash";break}return t},returnStateColor(e){return"background-color:"+this.parent.color},itemAdded(e){e.added&&(this.parent.found=parseInt(this.parent.found)+1,this.updateOrderStatus(e.added.element)),e.removed&&(parseInt(this.parent.found)>0&&(this.parent.found=parseInt(this.parent.found)-1),setTimeout(()=>{this.fetchMore(this.parent,!0)},1e3))},async updateOrderStatus(e,t,i){typeof t>"u"&&(t=this.parent.name);let a=new FormData;a.append("action","uip_update_order_status"),a.append("security",uip_ajax.security),a.append("orderID",e.ID),a.append("newStatus",t),a.append("cancelNotes",this.cancelNotes);const s=await this.sendServerRequest(uip_ajax.ajax_url,a);s.error&&this.uipApp.notifications.notify(s.message,"","error"),s.success&&(this.uipApp.notifications.notify(Me("Order updated","uipress-pro"),"","success"),t=="cancelled"&&this.parent.orders.splice(i,1))},returnQuickEdit(e){let t=new URL(e);return t.searchParams.set("uip-framed-page",1),t.href}},template:d`
    <div>
      <!--HEADER-->
      <div class="uip-border-dashed uip-border-round uip-padding-xs uip-text-center uip-text-muted" v-if="parent.orders.length < 1" style="border-color:var(--uip-border-color)">
        {{strings.emptyColumn}}
      </div>

      <component
        :is="globalComponents['VueDraggableNext']"
        v-if="parent.orders"
        :class="parent.orders.length < 1 ? 'uip-min-h-32' : ''"
        :list="parent.orders"
        class="uip-flex uip-flex-column uip-max-w-100p"
        :group="{ name: 'uip-orders', pull: true, put: true, revertClone: true }"
        animation="300"
        @start="drag = true"
        @end="drag = false"
        @change="itemAdded"
        handle=".uip-drag-handle"
        :sort="false"
        itemKey="id"
      >
        <template v-for="(order, index) in parent.orders" :key="order.id" :index="index">
          <div class="uip-border-round uip-padding-xs uip-border uip-shadow-small uip-background-default uip-cursor-drag uip-order-card">
            <div class="uip-flex uip-flex-row uip-gap-xs">
              <div class="uip-flex uip-gap-s uip-flex-start uip-drag-handle uip-flex-grow">
                <div class="uip-border-circle uip-w-22 uip-ratio-1-1 uip-background-cover" :style="'background-image:url(' + order.img + ')'"></div>

                <div class="uip-flex-grow uip-flex uip-flex-column uip-row-gap-xxs">
                  <div class="uip-text-emphasis">{{order.customerName}}</div>

                  <div class="uip-flex uip-gap-xxs uip-flex-center uip-text-s uip-text-muted uip-flex-wrap">
                    <div class="" v-html="order.total"></div>

                    <div class="">{{order.modified}}</div>
                  </div>
                </div>

                <div class="uip-border-round uip-padding-xxxs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label uip-text-s" :style="returnStateColor(parent)">
                  {{order.orderID}}
                </div>
              </div>

              <div class="">
                <dropdown pos="bottom right">
                  <template v-slot:trigger>
                    <AppIcon icon="more_vert" class="uip-text-l uip-link-default" />
                  </template>

                  <template v-slot:content>
                    <div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-xxs uip-border-bottom">
                      <uip-offcanvas position="right" style="padding:0;width:600px;max-width:90%">
                        <template v-slot:trigger>
                          <div class="uip-flex uip-gap-xs uip-link-default">
                            <AppIcon icon="visibility" class="uip-text-l" />
                            <div class="">Quick view</div>
                          </div>
                        </template>
                        <template v-slot:content>
                          <iframe class="uip-w-100p uip-h-viewport" :src="returnQuickEdit(order.editLink)"></iframe>
                        </template>
                      </uip-offcanvas>

                      <a class="uip-flex uip-gap-xs uip-link-default uip-no-underline" :href="order.editLink">
                        <AppIcon icon="edit" class="uip-text-l" />
                        <div class="">Edit</div>
                      </a>
                    </div>

                    <div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-xxs">
                      <div class="uip-flex uip-gap-xs uip-link-danger uip-no-underline">
                        <AppIcon icon="cancel" class=" uip-text-l" />

                        <dropdown pos="bottom right">
                          <template v-slot:trigger>
                            <div class="">{{strings.cancelOrder}}</div>
                          </template>
                          <template v-slot:content>
                            <div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-xs">
                              <textarea rows="4" class="uip-input" v-model="cancelNotes" :placeholder="strings.cancellationNotes + '...'"></textarea>
                              <button class="uip-button-danger" @click="updateOrderStatus(order, 'cancelled', index)">{{strings.cancelOrder}}</button>
                            </div>
                          </template>
                        </dropdown>
                      </div>
                    </div>
                  </template>
                </dropdown>
              </div>
            </div>
          </div>
        </template>

        <!--FOOTER-->
        <template #footer>
          <div class="uip-flex uip-flex-center uip-flex-middle uip-padding-s" v-if="parent.loading"><loading-chart></loading-chart></div>

          <div class="uip-flex uip-gap-xxs uip-link-muted uip-margin-top-xs uip-flex-center" v-if="parent.orders.length < parent.found" @click="fetchMore(parent)">
            <AppIcon icon="add" />
            <div>{{strings.loadMore}}</div>
          </div>
        </template>
      </component>
    </div>
  `},{__:Y,_x:dn,_n:hn,_nx:mn}=wp.i18n,xa={components:{OrderList:va},props:{display:String,name:String,block:Object},data(){return{searchString:"",globalLoading:!1,strings:{nothingFound:Y("No posts found","uipress-pro"),by:Y("By","uipress-pro"),order:Y("Order","uipress-pro"),status:Y("Status","uipress-pro"),total:Y("Total","uipress-pro"),searchOrders:Y("Search by customer name or email","uipress-pro"),loadMore:Y("Load more","uipress-pro")},searching:!1,states:{onHold:{page:1,totalPages:0,found:0,label:Y("On hold","uipress-pro"),name:"on-hold",orders:[],color:"var(--uip-color-red-lighter)"},pendingPayment:{page:1,totalPages:0,found:0,label:Y("Payment pending","uipress-pro"),name:"pending",orders:[],color:"var(--uip-color-orange-lighter)"},processing:{page:1,totalPages:0,found:0,label:Y("Processing","uipress-pro"),name:"processing",orders:[],color:"var(--uip-color-green-lighter)"},completed:{page:1,totalPages:0,found:0,label:Y("Completed","uipress-pro"),name:"completed",orders:[],color:"var(--uip-color-primary-lighter)"}}}},mounted(){this.getOrders()},watch:{searchString:{handler(e,t){if(e==""){for(let i in this.states)this.states[i].page=1;this.getOrders()}},deep:!0}},computed:{returnPerPage(){return this.block.settings.block.options.postsPerPage.value},returnStates(){return this.states},returnSearch(){return this.get_block_option(this.block,"block","hideSearch")}},methods:{fireFromSearch(){for(let e in this.states)this.states[e].page=1;this.getOrders()},async getOrders(){if(this.globalLoading)return;this.globalLoading=!0;let e=new FormData;e.append("action","uip_get_orders_for_kanban"),e.append("security",uip_ajax.security),e.append("states",JSON.stringify(this.returnStates)),e.append("search",this.searchString);const t=await this.sendServerRequest(uip_ajax.ajax_url,e);t.error&&(this.uipApp.notifications.notify(t.message,"","error",!0),this.globalLoading=!1),t.success&&(this.globalLoading=!1,this.states=t.states)},async getStateOrders(e,t){t||(e.loading=!0,e.page=parseInt(e.page)+1);let i=new FormData;i.append("action","uip_get_orders_for_kanban_by_state"),i.append("security",uip_ajax.security),i.append("state",JSON.stringify(e)),i.append("search",this.searchString);const a=await this.sendServerRequest(uip_ajax.ajax_url,i);a.error&&(this.uipApp.notifications.notify(a.message,"","error",!0),e.loading=!1),a.success&&(e.loading=!1,e.orders=a.state.orders,e.found=a.state.found)}},template:d` <div class="uip-flex uip-flex-column uip-row-gap-s">
    <div class="uip-flex uip-margin-bottom-xs" v-if="!returnSearch">
      <div class="uip-flex uip-padding-xxs uip-border uip-search-block uip-border-round uip-min-w-300">
        <AppIcon class=" uip-text-muted uip-margin-right-xs uip-text-l" icon="search" />
        <input class="uip-blank-input uip-flex-grow uip-text-s" type="text" :placeholder="strings.searchOrders" v-model="searchString" v-on:keyup.enter="fireFromSearch()" />
        <AppIcon icon="keyboard_return" class="uip-text-muted uip-margin-right-xs uip-text-l " v-if="searchString != ''" />
      </div>
    </div>

    <div class="uip-grid-col-4 uip-list-area" style="--grid-layout-gap:var(--uip-margin-m);--grid-item--min-width:220px">
      <template v-for="state in returnStates">
        <div class="uip-flex-grow uip-flex uip-flex-column uip-gap-s">
          <!--title area-->
          <div class="uip-flex uip-gap-xs uip-flex-center">
            <div class="uip-text-muted uip-status-title">{{state.label}}</div>
            <div class="uip-border-round uip-padding-left-xxs uip-padding-right-xxs uip-text-s uip-background-muted">{{state.found}}</div>
          </div>
          <!--title area-->

          <!--Order area-->
          <div class="uip-flex uip-flex-column uip-row-gap-xs">
            <div class="uip-flex uip-flex-center uip-flex-middle uip-padding-s" v-if="globalLoading"><loading-chart /></div>
            <OrderList v-else :parent="state" :updateOrders="function(d){state.orders == d}" :fetchMore="getStateOrders" />
          </div>
          <!--End of order area-->
        </div>
      </template>
    </div>
  </div>`},_a={metadata:ya,component:xa},{__:oe,_x:gn,_n:fn,_nx:bn}=wp.i18n,wa={name:oe("Plugin search","uipress-pro"),moduleName:"uip-plugin-search",description:oe("Search the plugin directory with quick filters, discover new plugins and install all from one block","uipress-pro"),category:oe("Dynamic","uipress-pro"),group:"dynamic",premium:!0,path:uipProPath+"assets/js/uip/blocks/dynamic/plugin-search.min.js",icon:"extension",settings:{},optionsEnabled:[{name:"block",label:oe("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"inputPlaceHolder",label:oe("Placeholder","uipress-pro"),value:{string:oe("Search plugins...","uipress-pro")}}]},{name:"style",label:oe("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"search",label:oe("Search Input","uipress-pro"),icon:"input",styleType:"style",class:".uip-search-input"}]},{__:k,_x:yn,_n:vn,_nx:xn}=wp.i18n,ka={props:{display:String,name:String,block:Object},data(){return{loading:!1,search:"",plugins:[],page:0,totalFound:0,totalPages:0,wpVersion:this.uipApp.data.dynamicOptions.wpversion.value,hasSearched:!1,image:{pos:{}},strings:{placeholder:k("Input placeholder...","uipress-pro"),update:k("Update","uipress-pro"),install:k("Install","uipress-pro"),details:k("Details","uipress-pro"),newVersion:k("New verasion","uipress-pro"),watchOut:k("Watch out","uipress-pro"),watchOutDescription:k("This plugin has not been tested with your platform version","uipress-pro"),nothingFound:k("No plugins found for query","uipress-pro"),results:k("Results","uipress-pro"),activate:k("Activate","uipress-pro"),rating:k("Rating","uipress-pro"),lastUpdated:k("Last updated","uipress-pro"),downloads:k("Downloads","uipress-pro"),activeInstalls:k("Active installs","uipress-pro"),requiresWP:k("Requires wp","uipress-pro"),requiresPHP:k("Requires PHP","uipress-pro"),orHigher:k("or higher","uipress-pro"),images:k("Images","uipress-pro")}}},computed:{returnPlaceHolder(){const e=this.get_block_option(this.block,"block","inputPlaceHolder",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnPlugins(){return this.plugins}},methods:{mouseMoveHandler(e){const t=document.getElementById("uip-image-scroller"),i=e.clientX-this.image.pos.x,a=e.clientY-this.image.pos.y;t.scrollTop=this.image.pos.top-a,t.scrollLeft=this.image.pos.left-i},mouseUpHandler(){const e=document.getElementById("uip-image-scroller");e.removeEventListener("mousemove",this.mouseMoveHandler),e.removeEventListener("mouseup",this.mouseUpHandler),e.style.cursor="grab",e.style.removeProperty("user-select")},mouseDownHandler(e){const t=document.getElementById("uip-image-scroller");this.image.pos={left:t.scrollLeft,top:t.scrollTop,x:e.clientX,y:e.clientY},t.style.cursor="grabbing",t.style.userSelect="none",t.addEventListener("mousemove",this.mouseMoveHandler),t.addEventListener("mouseup",this.mouseUpHandler)},async getPluginupdates(){let e=new FormData;e.append("action","uip_get_plugin_updates"),e.append("security",uip_ajax.security);const t=await this.sendServerRequest(uip_ajax.ajax_url,e);if(t.error){this.uipApp.notifications.notify(t.message,"","error",!0);return}this.loading=!1,this.updates=t.updates},async searchPlugins(){if(this.search==""){this.plugins=[];return}this.hasSearched=!1,this.loading=!0;let e=new FormData;e.append("action","uip_search_directory"),e.append("security",uip_ajax.security),e.append("search",this.search),e.append("page",this.page);const t=await this.sendServerRequest(uip_ajax.ajax_url,e);if(t.error){this.uipApp.notifications.notify(t.message,"","error",!0);return}this.loading=!1,this.hasSearched=!0,this.plugins=t.plugins,this.totalFound=t.totalFound,this.totalPages=t.totalPages},returnRating(e){const t=e>0?(e/20).toFixed(1):0;let i="";for(let a=0;a<5;a++)t-a>=1?i+='<span class="uip-star-icon-full"></span>':t-a>=.5?i+='<span class="uip-star-icon-half"></span>':i+='<span class="uip-star-icon-empty">star</span>';return i},async getPluginupdates(){let e=new FormData;e.append("action","uip_get_plugin_updates"),e.append("security",uip_ajax.security);const t=await this.sendServerRequest(uip_ajax.ajax_url,e);if(t.error){this.uipApp.notifications.notify(t.message,"","error",!0);return}this.loading=!1,this.updates=t.updates},goBack(){this.page>1&&(this.page=this.page-1,this.searchPlugins())},goForward(){this.page<this.totalPages&&(this.page=this.page+1,this.searchPlugins())},async installPlugin(e){e[0].loading=!0;let t=e[0].download_link,i=new FormData;if(i.append("action","uip_install_plugin"),i.append("security",uip_ajax.security),i.append("downloadLink",t),(await this.sendServerRequest(uip_ajax.ajax_url,i,!0)).error)return;e[0].loading=!1,e[0].activateAvailable=!0;const s=e[0].name+" "+k("was succesfully installed","uipress-pro");this.uipApp.notifications.notify(k("Success","uipress-pro"),s,"success",!0)},async activatePlugin(e){e[0].loading=!0;let t=e[0].slug,i=new FormData;i.append("action","uip_activate_plugin"),i.append("security",uip_ajax.security),i.append("slug",t);const a=await this.sendServerRequest(uip_ajax.ajax_url,i,!0);if(a.error){this.uipApp.notifications.notify(a.message,"","error",!0);return}e[0].loading=!1,e[0].finished=!0,e[0].activateAvailable=!1;const s=e[0].name+" "+k("was succesfully activated. You may need to refresh the page for any menu links to update","uipress-pro");this.uipApp.notifications.notify(k("Success","uipress-pro"),s,"success",!0)},formatResults(e){return new Intl.NumberFormat(this.uipApp.data.options.locale).format(e)},formatToReadable(e){let t=e.split(" ")[0];e.split(" ")[1],e.split(" ")[2];let i=new Date(Date.parse(t));return this.timeSince(i,new Date)},isInstalled(e){return!!JSON.stringify(this.uipApp.data.options.installedPlugins).includes(e)},isActive(e){return!!JSON.stringify(this.uipApp.data.options.activePlugins).includes(e)},timeSince(e,t){const i=Math.floor((t-e)/1e3),a=[{name:"year",seconds:31536e3},{name:"month",seconds:2592e3},{name:"day",seconds:86400},{name:"hour",seconds:3600},{name:"minute",seconds:60}];for(const{name:s,seconds:r}of a){const n=Math.floor(i/r);if(n>=1)return`${n} ${s}${n>1?"s":""}`}return`${i} second${i!==1?"s":""}`}},template:d` <div>
    <div class="uip-flex uip-flex-column uip-row-gap-s uip-max-h-viewport">
      <div class="uip-flex uip-padding-xxs uip-border uip-border-round uip-search-block uip-flex-grow uip-gap-xs uip-flex-center uip-search-input">
        <AppIcon icon="search" class="uip-text-muted " />
        <input v-model="search" class="uip-blank-input uip-flex-grow uip-text-s" type="text" :placeholder="returnPlaceHolder" autofocus="" v-on:keyup.enter="searchPlugins" />
        <AppIcon icon="keyboard_return" class="uip-text-muted  uip-text-muted" />
      </div>

      <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle"><loading-chart></loading-chart></div>
      <div v-else-if="returnPlugins.length > 0" class="uip-grid-col-4 uip-grid-min-width-medium uip-grid-gap-m uip-padding-xxs uip-max-h-viewport uip-overflow-hidden uip-scrollbar">
        <div class="uip-flex uip-flex-center uip-gap-xs uip-text-muted" v-if="returnPlugins.length < 1 && search != '' && !loading && hasSearched">
          <span>{{strings.nothingFound}}</span>
        </div>

        <component is="style" scoped>
          .plugin-list-enter-active, .plugin-list-leave-active { transition: all 0.5s ease; } .plugin-list-enter-from, .plugin-list-leave-to { opacity: 0; transform: translateX(30px); }
        </component>

        <TransitionGroup name="plugin-list">
          <div v-for="(item, index) in returnPlugins" class="uip-flex uip-flex-column uip-row-gap-xs uip-border-round " :key="item.name">
            <div class="uip-flex uip-flex-row uip-gap-s uip-flex-no-wrap uip-flex-center uip-cursor-pointer" @click="item.open = !item.open">
              <img :src="Object.values(item.icons)[0]" class="uip-border uip-border-circle uip-w-28 uip-ratio-1-1" />

              <div class=" uip-flex-grow">
                <div class=" uip-line-height-1 uip-overflow-hidden uip-no-wrap uip-text-ellipsis uip-margin-bottom-xxs" v-html="item.name"></div>

                <div class="uip-flex uip-flex-row uip-no-wrap uip-text-m uip-text-muted" v-html="returnRating(item.rating)"></div>
              </div>
            </div>

            <template v-if="item.open">
              <div class="uip-text-muted uip-text-s uip-scale-in-center" v-html="item.short_description"></div>

              <div class="uip-flex uip-flex-row uip-flex-center uip-gap-xs uip-scale-in-center">
                <template v-if="!item.finished">
                  <div v-if="!item.activateAvailable && !isInstalled(item.slug)" class="">
                    <uip-save-button :saving="item.loading" size="small" :saveFunction="installPlugin" :saveArg="[item, index]" :buttonText="strings.install"> </uip-save-button>
                  </div>

                  <div v-if="item.activateAvailable || (!isActive(item.slug) && isInstalled(item.slug))" class="">
                    <uip-save-button :saving="item.loading" size="small" :buttonSecondary="true" :saveFunction="activatePlugin" :saveArg="[item, index]" :buttonText="strings.activate">
                    </uip-save-button>
                  </div>
                </template>

                <button @click="$refs['detailsModal'+index][0].open()" class="uip-button-default uip-flex uip-gap-xxs uip-no-underline uip-background-grey uip-link-default">
                  <span class="uip-text-s uip-line-height-1">{{strings.details}}</span>
                </button>

                <uipModal :ref="'detailsModal'+index">
                  <div class="uip-flex uip-flex-column uip-row-gap-m uip-max-width-100p uip-overflow-hidden uip-scrollbar-hidden  uip-max-w-700" style="overflow-y:auto">
                    <div class="uip-padding-m uip-padding-remove-bottom uip-flex uip-flex-column uip-row-gap-m">
                      <div class="uip-flex uip-flex-row uip-gap-s uip-flex-no-wrap uip-flex-center uip-cursor-pointer">
                        <img :src="Object.values(item.icons)[0]" class="uip-border uip-border-circle uip-w-50 uip-ratio-1-1" />

                        <div class=" uip-flex-grow">
                          <div class="uip-text-l" v-html="item.name"></div>
                          <a class="uip-text-muted uip-link-muted uip-no-underline" :href="item.homepage" target="_BLANK">{{item.author.replace(/<[^>]*>?/gm, '')}}</a>
                        </div>
                      </div>

                      <!--Meta-->
                      <div class="uip-flex uip-flex-row uip-gap-xs">
                        <div class="uip-flex uip-flex-column uip-row-gap-xxxs uip-flex-center">
                          <div class="uip-text-muted uip-text-s uip-text-center">{{strings.rating}}</div>
                          <span class="uip-flex uip-flex-row uip-no-wrap uip-text-m uip-text-muted" v-html="returnRating(item.rating)"></span>
                        </div>

                        <div class="uip-border-right"></div>

                        <div class="uip-flex uip-flex-column uip-row-gap-xxxs uip-flex-center">
                          <div class="uip-text-muted uip-text-s uip-line-height-1 uip-text-center">{{strings.lastUpdated}}</div>
                          <span class="uip-text-m uip-text-muted">{{formatToReadable(item.last_updated)}}</span>
                        </div>

                        <div class="uip-border-right"></div>

                        <div class="uip-flex uip-flex-column uip-row-gap-xxxs uip-flex-center">
                          <div class="uip-text-muted uip-text-s uip-line-height-1 uip-text-center">{{strings.activeInstalls}}</div>
                          <span class="uip-text-m uip-text-muted uip-text-bold">{{formatResults(item.active_installs)}}+</span>
                        </div>

                        <div class="uip-border-right"></div>

                        <div class="uip-flex uip-flex-column uip-row-gap-xxxs uip-flex-center">
                          <div class="uip-text-muted uip-text-s uip-line-height-1 uip-text-center">{{strings.downloads}}</div>
                          <span class="uip-text-m uip-text-muted uip-text-bold">{{formatResults(item.downloaded)}}</span>
                        </div>

                        <div class="uip-border-right"></div>

                        <div class="uip-flex uip-flex-column uip-row-gap-xxxs uip-flex-center">
                          <div class="uip-text-muted uip-text-s uip-line-height-1 uip-text-center">{{strings.requiresWP}}</div>
                          <span class="uip-text-m uip-text-muted uip-text-bold">{{item.requires}} {{strings.orHigher}}</span>
                        </div>

                        <div class="uip-border-right"></div>

                        <div class="uip-flex uip-flex-column uip-row-gap-xxxs uip-flex-center">
                          <div class="uip-text-muted uip-text-s uip-line-height-1 uip-text-center">{{strings.requiresPHP}}</div>
                          <span class="uip-text-m uip-text-muted uip-text-bold">{{item.requires_php}} {{strings.orHigher}}</span>
                        </div>
                      </div>
                      <!--End Meta-->

                      <div v-if="!item.finished" class="uip-flex uip-flex-row uip-gap-s">
                        <div v-if="!item.activateAvailable && !isInstalled(item.slug)" class="">
                          <uip-save-button :saving="item.loading" size="small" :saveFunction="installPlugin" :saveArg="[item, index]" :buttonText="strings.install"> </uip-save-button>
                        </div>

                        <div v-if="item.activateAvailable || (!isActive(item.slug) && isInstalled(item.slug))" class="">
                          <uip-save-button :saving="item.loading" size="small" :buttonSecondary="true" :saveFunction="activatePlugin" :saveArg="[item, index]" :buttonText="strings.activate">
                          </uip-save-button>
                        </div>
                      </div>
                    </div>

                    <div class="uip-padding-m uip-padding-remove-top uip-padding-remove-bottom uip-max-h-500 uip-overflow-auto uip-scrollbar">
                      <!-- Description -->
                      <div v-if="!item.showFull" class="uip-fade-bottom uip-cursor-pointer uip-max-h-150 uip-overflow-hidden" @click="item.showFull = true">
                        <div class="uip-text-muted uip-text-s uip-scale-in-center" v-html="item.description"></div>
                      </div>

                      <div v-if="item.showFull" class="uip-text-muted uip-text-s uip-scale-in-center uip-max-w-100p uip-scale-in" v-html="item.description"></div>
                      <!--End description -->
                    </div>

                    <div class="uip-padding-left-m uip-padding-right-m uip-text-bold">{{strings.images}}</div>

                    <div id="uip-image-scroller" class="uip-max-w-100p uip-overflow-auto uip-scrollbar-hidden uip-flex uip-padding-bottom-m" @mousedown="mouseDownHandler" @mouseup="mouseUpHandler">
                      <template v-for="img in item.screenshots">
                        <img :src="img.src" :alt="img.caption" class="uip-max-h-200 uip-border-round uip-border uip-margin-left-m uip-remove-drag" />
                      </template>
                    </div>
                  </div>
                </uipModal>
              </div>

              <div v-if="wpVersion > item.tested" class="uip-background-orange-wash uip-padding-xs uip-border-round uip-scale-in-center">
                <div class="uip-text-bold">{{strings.watchOut}}</div>
                <div class="uip-text-muted uip-text-s">{{strings.watchOutDescription}}</div>
              </div>
            </template>
          </div>
        </TransitionGroup>
      </div>

      <div v-if="hasSearched" class="uip-flex uip-flex-between uip-flex-center uip-w-100p">
        <div class="uip-padding-xxs uip-post-count">{{formatResults(totalFound)}} {{strings.results}}</div>
        <div class="uip-flex uip-gap-xs uip-padding-xs" v-if="totalPages > 1">
          <button @click="goBack" class="uip-button-default uip-nav-button">
            <AppIcon icon="chevron_left" />
          </button>
          <button @click="goForward" v-if="page < totalPages" class="uip-button-default uip-nav-button">
            <AppIcon icon="chevron_right" />
          </button>
        </div>
      </div>
    </div>
  </div>`},Da={metadata:wa,component:ka},{__:Ne,_x:_n,_n:wn,_nx:kn}=wp.i18n,Aa={name:Ne("Plugin updates","uipress-pro"),moduleName:"uip-plugin-updates",description:Ne("Outputs a list of available plugin updates and allows you update from the block","uipress-pro"),category:Ne("Dynamic","uipress-pro"),group:"dynamic",premium:!0,icon:"upgrade",settings:{},optionsEnabled:[{name:"block",label:Ne("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[]},{name:"style",label:Ne("Style","uipress-pro"),icon:"palette",styleType:"style"}]},{__:se,_x:Dn,_n:An,_nx:Cn}=wp.i18n,Ca={props:{display:String,name:String,block:Object},data(){return{loading:!0,updates:[],wpVersion:this.uipApp.data.dynamicOptions.wpversion.value,strings:{placeholder:se("Input placeholder...","uipress-pro"),update:se("Update","uipress-pro"),details:se("Details","uipress-pro"),newVersion:se("New verasion","uipress-pro"),watchOut:se("Watch out","uipress-pro"),watchOutDescription:se("This plugin has not been tested with your platform version","uipress-pro"),noPluginUpdates:se("Plugins are all up to date","uipress-pro")}}},mounted(){this.getPluginupdates()},computed:{returnPlaceHolder(){const e=this.get_block_option(this.block,"block","inputPlaceHolder",!0);return e?this.isObject(e)?e.string?e.string:"":e:""},returnUpdates(){return this.updates}},methods:{async getPluginupdates(){let e=new FormData;e.append("action","uip_get_plugin_updates"),e.append("security",uip_ajax.security);const t=await this.sendServerRequest(uip_ajax.ajax_url,e);if(t.error){this.uipApp.notifications.notify(t.message,"","error",!0);return}this.loading=!1,this.updates=t.updates},async updatePlugin(e){e[0].loading=!0,e[0].update.slug;let t=new FormData;if(t.append("action","uip_update_plugin"),t.append("security",uip_ajax.security),t.append("slug",e[1]),(await this.sendServerRequest(uip_ajax.ajax_url,t,!0)).error)return;delete this.updates[e[1]],e[0].loading=!0;const a=e[0].Title+" "+se("was succesfully updated","uipress-pro");this.uipApp.notifications.notify(se("Success","uipress-pro"),a,"success",!0)},returnIcon(e){return!("icons"in e)||!("1x"in e.icons)?!1:e.icons["1x"]}},template:d` <div ref="uipmedialibrary">
    <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle"><loading-chart></loading-chart></div>
    <div v-else class="uip-grid-col-4 uip-grid-min-width-medium uip-grid-gap-m">
      <div class="uip-flex uip-flex-center uip-gap-xs uip-text-muted" v-if="returnUpdates.length < 1">
        <AppIcon icon="check_circle" />
        <span>{{strings.noPluginUpdates}}</span>
      </div>

      <component is="style" scoped>
        .plugin-list-enter-active, .plugin-list-leave-active { transition: all 0.5s ease; } .plugin-list-enter-from, .plugin-list-leave-to { opacity: 0; transform: translateX(30px); }
      </component>

      <TransitionGroup name="plugin-list">
        <div v-for="(item, index) in returnUpdates" class="uip-flex uip-flex-column uip-row-gap-xs uip-border-round " :key="item.Title">
          <div class="uip-flex uip-flex-row uip-gap-s uip-flex-no-wrap uip-flex-center uip-cursor-pointer" @click="item.open = !item.open">
            <img v-if="returnIcon(item.update)" :src="returnIcon(item.update)" class="uip-border uip-border-circle uip-w-28 uip-ratio-1-1" />
            <div v-else class="uip-border uip-border-circle uip-w-28 uip-ratio-1-1 uip-background-primary"></div>

            <div class=" uip-flex-grow">
              <div class="uip-text-emphasis uip-line-height-1">{{item.Title}}</div>
              <a class="uip-text-muted uip-text-s uip-link-muted uip-no-underline" :href="item.PluginURI" target="_BLANK">{{item.Author}}</a>
            </div>

            <uip-tooltip :message="strings.newVersion" :delay="200">
              <div class="uip-background-orange-wash uip-border-round uip-text-s uip-border-round uip-line-height-1 uip-padding-xxs uip-flex uip-flex-row uip-gap-xxxs uip-text-muted">
                <AppIcon icon="upgrade" />
                <span>{{item.update.new_version}}</span>
              </div>
            </uip-tooltip>
          </div>

          <template v-if="item.open">
            <div class="uip-text-muted uip-text-s uip-scale-in-center" v-html="item.Description"></div>

            <div class="uip-flex uip-flex-row uip-flex-center uip-gap-xs uip-scale-in-center">
              <div class="">
                <uip-save-button :saving="item.loading" size="small" :saveFunction="updatePlugin" :saveArg="[item, index]" :buttonText="strings.update"> </uip-save-button>
              </div>

              <div class="">
                <a :href="item.update.url" target="_BLANK" class="uip-button-default uip-flex uip-gap-xxs uip-no-underline uip-background-grey uip-link-default">
                  <span class=" uip-text-s uip-line-height-1">{{strings.details}}</span>
                </a>
              </div>
            </div>

            <div v-if="wpVersion > item.update.tested" class="uip-background-orange-wash uip-padding-xs uip-border-round uip-scale-in-center">
              <div class="uip-text-bold">{{strings.watchOut}}</div>
              <div class="uip-text-muted uip-text-s">{{strings.watchOutDescription}}</div>
            </div>
          </template>
        </div>
      </TransitionGroup>
    </div>
  </div>`},Sa={metadata:Aa,component:Ca},{__:V,_x:Sn,_n:Tn,_nx:Rn}=wp.i18n,Ta={name:V("Recent orders","uipress-lite"),moduleName:"recent-orders",description:V("Create a list of recent woocommerce orders","uipress-lite"),group:"dynamic",premium:!0,path:uipProPath+"assets/js/uip/blocks/dynamic/recent-orders.min.js",icon:"shopping_bag",settings:{},optionsEnabled:[{name:"block",label:V("Block options","uipress-lite"),icon:"check_box_outline_blank",options:[{option:"trueFalse",componentName:"choice-select",uniqueKey:"hideSearch",label:V("Hide search","uipress-pro"),args:{options:{false:{value:!1,label:V("Show","uipress-lite")},true:{value:!0,label:V("Hide","uipress-lite")}}}},{option:"number",componentName:"uip-number",uniqueKey:"postsPerPage",label:V("Orders per page","uipress-lite"),value:10}]},{name:"container",label:V("Block container","uipress-lite"),icon:"crop_free",styleType:"style"},{name:"style",label:V("Style","uipress-lite"),icon:"palette",styleType:"style"},{name:"listArea",label:V("Posts list","uipress-lite"),icon:"list",styleType:"style",class:".uip-list-area"},{name:"itemHeader",label:V("Item title","uipress-lite"),icon:"title",styleType:"style",class:".uip-post-title"},{name:"itemMeta",label:V("Item meta","uipress-lite"),icon:"info",styleType:"style",class:".uip-post-meta"},{name:"navButtons",label:V("Pagination buttons","uipress-lite"),icon:"smart_button",styleType:"style",class:".uip-nav-button"},{name:"typeLabel",label:V("Post type label","uipress-lite"),icon:"label",styleType:"style",class:".uip-post-type-label"},{name:"advanced",label:V("Advanced","uipress-lite"),icon:"code"}]},{__:Te,_x:Pn,_n:Mn,_nx:Nn}=wp.i18n,Ra={props:{display:String,name:String,block:Object},data(){return{searchString:"",results:[],page:1,totalPages:0,perPage:this.block.settings.block.options.postsPerPage.value,postTypes:["shop_order"],limitToAuthor:!1,loading:!1,strings:{nothingFound:Te("No posts found","uipress-lite"),by:Te("By","uipress-lite"),order:Te("Order","uipress-lite"),status:Te("Status","uipress-lite"),total:Te("Total","uipress-lite"),searchOrders:Te("Search orders","uipress-lite")},searching:!1}},mounted(){this.getRecentOrders()},watch:{page:{handler(e,t){this.getRecentOrders()},deep:!0},perPage:{handler(e,t){this.getRecentOrders()},deep:!0},searchString:{handler(e,t){this.page!=1?this.page=1:this.getRecentOrders()},deep:!0},"block.settings.block.options.postsPerPage.value":{handler(e,t){this.getRecentOrders()},deep:!0}},computed:{returnPerPage(){return this.block.settings.block.options.postsPerPage.value},hasSearch(){return this.get_block_option(this.block,"block","hideSearch")}},methods:{async getRecentOrders(){if(this.loading)return;this.loading=!0;let e=new FormData;e.append("action","uip_get_recent_orders"),e.append("security",uip_ajax.security),e.append("search",this.searchString),e.append("page",this.page),e.append("perPage",this.returnPerPage),e.append("searchString",this.searchString);const t=await this.sendServerRequest(uip_ajax.ajax_url,e);t.error&&(this.uipApp.notifications.notify(t.message,"","error",!0),this.searching=!1,this.loading=!1),t.success&&(this.loading=!1,this.results=t.posts,this.totalPages=t.totalPages)},goBack(){this.page>1&&(this.page=this.page-1)},goForward(){this.page<this.totalPages&&(this.page=this.page+1)},returnStatusBG(e){let t="uip-background-orange-wash";switch(e){case"completed":t="uip-background-primary-wash";break;case"processing":t="uip-background-green-wash";break;case"failed":t="uip-background-red-wash";break}return t}},template:d` <div class="uip-flex uip-flex-column uip-row-gap-s">
    <div class="uip-flex uip-flex-column uip-row-gap-xs uip-list-area">
      <div v-if="!hasSearch" class="uip-flex uip-padding-xxs uip-border uip-search-block uip-border-round uip-margin-bottom-s">
        <AppIcon icon="search" class="uip-text-muted uip-margin-right-xs uip-text-l" />
        <input class="uip-blank-input uip-flex-grow uip-text-s" type="search" :placeholder="strings.searchOrders" v-model="searchString" />
      </div>

      <div v-if="loading" class="uip-flex uip-flex-center uip-flex-middle uip-padding-m"><loading-chart></loading-chart></div>

      <div v-if="!loading" class="uip-max-w-100p uip-overflow-auto uip-scrollbar">
        <table class="uip-min-w-250 uip-w-100p uip-table">
          <thead>
            <tr class="">
              <th class="uip-text-muted uip-text-weight-normal uip-text-left uip-padding-bottom-xxs">{{strings.order}}</th>
              <th class="uip-text-muted uip-text-weight-normal uip-text-right uip-padding-bottom-xxs">{{strings.status}}</th>
              <th class="uip-text-right uip-text-muted uip-text-weight-normal uip-padding-bottom-xxs">{{strings.total}}</th>
            </tr>
          </thead>
          <tbody>
            <tr v-for="item in results">
              <td class="uip-text-bold uip-padding-bottom-xxs"><a class="uip-link-default uip-no-underline" :href="item.editLink">{{item.name}}</a></td>

              <td class="uip-text-right uip-padding-bottom-xxs uip-flex uip-flex-right">
                <div class="uip-text-s uip-border-round uip-padding-xxxs uip-post-type-label" :class="returnStatusBG(item.status)">{{item.status}}</div>
              </td>

              <td class="uip-text-right uip-padding-bottom-xxs">
                <div class=" uip-background-orange-wash uip-border-round uip-padding-xxxs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label uip-inline-flex">
                  <span class="" v-html="item.total"></span>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div v-if="results.length == 0 && searchString.length > 0" class="uip-text-muted uip-text-s">{{strings.nothingFound}}</div>
    </div>
    <div class="uip-flex uip-gap-xs" v-if="totalPages > 1">
      <button @click="goBack" class="uip-button-default uip-nav-button"><AppIcon icon="chevron_left" /></button>
      <button @click="goForward" v-if="page < totalPages" class="uip-button-default uip-nav-button">
        <AppIcon icon="chevron_right" />
      </button>
    </div>
  </div>`},Pa={metadata:Ta,component:Ra},{__:le,_x:Ln,_n:$n,_nx:En}=wp.i18n,Ma={name:le("Site notifications","uipress-lite"),moduleName:"site-notifications",description:le("Collects all site notifications and displays theme inside thise block.","uipress-pro"),category:le("Dynamic","uipress-pro"),group:"dynamic",premium:!0,icon:"notifications",settings:{},optionsEnabled:[{name:"block",label:le("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"textField",componentName:"uip-dynamic-input",uniqueKey:"emptyMessage",label:le("No notifications message","uipress-lite"),args:{password:!1}}]},{name:"style",label:le("Style","uipress-pro"),icon:"palette",styleType:"style",presets:{flexLayout:{direction:"column",distribute:"start",align:"stretch",wrap:"nowrap",type:"stack",placeContent:"normal",gap:{value:12,units:"px"}}}},{name:"notificationWrap",label:le("Notification wrap","uipress-pro"),icon:"crop_free",styleType:"style",class:".uip-site-notification-holder"},{name:"notification",label:le("Notification","uipress-pro"),icon:"notifications",styleType:"style",class:".notice"}]},{__:lt,_x:On,_n:In,_nx:Fn}=wp.i18n,Na={props:{display:String,name:String,block:Object},data(){return{loading:!0,strings:{placeholder:lt("Input placeholder...","uipress-pro")}}},inject:["uiTemplate"],computed:{returnEmptyMessage(){let e=this.get_block_option(this.block,"block","emptyMessage",!0);return e||lt("No notifications at the moment","uipress-pro")},returnPlaceHolder(){const e=this.get_block_option(this.block,"block","inputPlaceHolder",!0);return e?this.isObject(e)?e.string?e.string:"":e:""}},template:d` <div class="">
    <component is="style" scoped> .notice{ display: block !important; margin-left: 0; margin-right: 0; } </component>

    <div v-if="uiTemplate.notifications.length < 1">{{returnEmptyMessage}}</div>

    <template v-for="notification in uiTemplate.notifications">
      <div class="uip-site-notification-holder uip-text-normal" v-html="notification"></div>
    </template>
  </div>`},La={metadata:Ma,component:Na},{__:_,_x:jn,_n:qn,_nx:Vn}=wp.i18n,$a={name:_("WC charts","uipress-pro"),moduleName:"uip-woocommerce-analytics-charts",description:_("Outputs your choice of order data from woocommerce as a chart","uipress-pro"),group:"storeanalytics",premium:!0,path:uipProPath+"assets/js/uip/blocks/storeanalytics/woocommerce-analytics-charts.min.js",icon:"bar_chart",settings:{},optionsEnabled:[{name:"block",label:_("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"chartName",label:_("Chart title","uipress-pro"),value:{string:_("Sales chart","uipress-pro")}},{option:"defaultSelect",componentName:"default-select",uniqueKey:"chartDataType",label:_("Chart metric","uipress-pro"),args:{options:[{value:"total_orders",label:_("Total orders","uipress-pro")},{value:"total_revenue",label:_("Total revenue","uipress-pro")},{value:"failed_orders",label:_("Failed orders","uipress-pro")},{value:"refunded_orders",label:_("Refunded orders","uipress-pro")}]},value:""},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"chartStyle",label:_("Chart type","uipress-pro"),args:{options:{line:{value:"line",label:_("Line","uipress-pro")},bar:{value:"bar",label:_("Bar","uipress-pro")}}},value:{value:"line"}},{option:"number",componentName:"uip-number",uniqueKey:"dateRange",label:_("Default date range (days)","uipress-pro"),value:14},{option:"color-select",componentName:"color-select",uniqueKey:"chartColour",label:_("Line colour","uipress-pro")},{option:"color-select",componentName:"color-select",uniqueKey:"chartCompColour",label:_("Comparison line colour","uipress-pro")},{option:"chartOptions",componentName:"uip-chart-options",componentName:"uip-chart-options",uniqueKey:"chartOptions",label:_("Chart style","uipress-pro")},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"hideChart",label:_("Chart","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:_("Show","uipress-pro")},true:{value:!0,label:_("Hide","uipress-pro")}}}}]},{name:"style",label:_("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"title",label:_("Table title","uipress-pro"),icon:"title",styleType:"style",class:".uip-chart-title"},{name:"chartCanvas",label:_("Chart canvas","uipress-pro"),icon:"monitoring",styleType:"style",class:".uip-chart-canvas"},{name:"chartLabels",label:_("Chart labels","uipress-pro"),icon:"input",styleType:"style",class:".uip-chart-label"},{name:"percentChange",label:_("Percentage change","uipress-pro"),icon:"label",styleType:"style",class:".uip-tag-label"}]},{__:Be,_x:Un,_n:Bn,_nx:Kn}=wp.i18n,Ea={props:{display:String,name:String,block:Object},data(){return{loading:!0,rendered:!0,error:!1,apiLoaded:!1,errorMessage:"",total:0,comparisonTotal:0,percentChange:0,fetchingQuery:!1,requestFromGroupDate:!1,currentRequest:!1,chartData:{data:{main:[],comparison:[]},labels:{main:[],comparisons:[]},title:"",colors:{main:this.returnLineColor,comp:this.returnCompLineColor}},groupDate:{},strings:{lastPeriod:Be("last period","uipress-pro"),selectDataMetric:Be("Please select a chart metric in this block's options to show chart data.","uipress-pro"),changeAccount:Be("Switch account","uipress-pro")}}},watch:{"block.settings.block.options.chartDataType":{handler(e,t){this.currentRequest&&this.processResponse()}},"uipApp.woocommerce.ready":{handler(e,t){this.getAnalytics()},deep:!0},"uipApp.woocommerce":{handler(e,t){e.ready&&this.getAnalytics()},deep:!0,immediate:!0}},mounted(){document.addEventListener("uipress/app/daterange/change",this.handleDateChange)},beforeUnmount(){document.removeEventListener("uipress/app/daterange/change",this.handleDateChange)},computed:{returnTotal(){if(this.returnChartType=="total_revenue"){if(this.currentRequest.currency_pos=="left")return this.currentRequest.currency+this.total;if(this.currentRequest.currency_pos=="left_space")return this.currentRequest.currency+" "+this.total;if(this.currentRequest.currency_pos=="right")return this.total+this.currentRequest.currency;if(this.currentRequest.currency_pos=="right_space")return this.total+" "+this.currentRequest.currency}return this.total},returnChartSettings(){return this.get_block_option(this.block,"block","chartOptions")},returnComparisonTotal(){return this.comparisonTotal},returnChartData(){return this.chartData},returnName(){let e=this.get_block_option(this.block,"block","chartName",!0);return e?(e=this.isObject(e)?e.string:e,e):""},returnChartType(){return this.get_block_option(this.block,"block","chartDataType")},returnChartStyle(){let e=this.get_block_option(this.block,"block","chartStyle");return e?(e=this.isObject(e)?e.value:"line",e):"line"},returnLineColor(){let e=this.get_block_option(this.block,"block","chartColour");return e?(e=this.isObject(e)?e.value:e,e):""},returnCompLineColor(){let e=this.get_block_option(this.block,"block","chartCompColour");return e?(e=this.isObject(e)?e.value:e,e):""},hideChart(){let e=this.get_block_option(this.block,"block","hideChart");return e?(e=this.isObject(e)?e.value:e,e):""},inlineAccountSwitch(){let e=this.get_block_option(this.block,"block","inlineAccountSwitch");return e?(e=this.isObject(e)?e.value:e,e):!0},returnRange(){let e=this.get_block_option(this.block,"block","dateRange");return e?(e=isNaN(e)?14:e,e=e>60?60:e,e):14},hasGlobalDate(){return!!this.hasNestedPath(this.groupDate,"start")}},methods:{handleDateChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.groupDate.start=e.detail.groupDate.start,this.groupDate.end=e.detail.groupDate.end,this.getAnalytics())},async getAnalytics(){if(this.loading=!0,this.error=!1,this.errorMessage="",!this.isObject(this.uipApp.woocommerce)){this.apiLoaded=!1;return}if(!("ready"in this.uipApp.woocommerce)){this.apiLoaded=!1;return}if(!this.uipApp.woocommerce.ready){this.apiLoaded=!1;return}this.apiLoaded=!0;let e,t;this.hasGlobalDate?(e=new Date(Date.parse(this.groupDate.start)),t=new Date(Date.parse(this.groupDate.end))):(t=new Date,t.setDate(t.getDate()-1),e=new Date,e.setDate(e.getDate()-this.returnRange));const i=await this.uipApp.woocommerce.api("get",e,t);if(i.error){this.loading=!1,this.error=!0,this.errorMessage=i.message;return}this.loading=!1,this.currentRequest=i.data,this.processResponse()},processResponse(){let e=this.currentRequest,t=e.timeline.report.dates,i=e.timeline.report_comparison.dates,a=this.returnChartType,s=[],r=[];for(let[n,o]of e.timeline.report.data.entries())s.push(o[a]),typeof e.timeline.report_comparison.data[n]<"u"&&a in e.timeline.report_comparison.data[n]?r.push(e.timeline.report_comparison.data[n][a]):r.push("0");this.returnChartSettings&&(this.chartData.custom=this.returnChartSettings),this.chartData.colors.main=this.returnLineColor,this.chartData.colors.comp=this.returnCompLineColor,this.chartData.title=this.returnName,this.chartData.type=this.returnChartStyle,this.chartData.data.main=s,this.chartData.data.comparison=r,this.chartData.labels.main=t,this.chartData.labels.comparison=i,this.total=e.timeline.report.totals[a],a in e.timeline.report_comparison.totals?this.comparisonTotal=e.timeline.report_comparison.totals[a]:this.comparisonTotal="NA",this.percentChange=e.timeline.report.totals_change[a],this.total!=""&&(this.total=new Intl.NumberFormat(this.uipApp.data.options.locale).format(this.total)),this.comparisonTotal!=""&&this.comparisonTotal!="NA"&&(this.comparisonTotal=new Intl.NumberFormat(this.uipApp.data.options.locale).format(this.comparisonTotal))},secondsToTime(e){if(isNaN(e)||e<0)return"0m 0s";const t=Math.floor(e/60).toString().padStart(2,"0"),i=(e%60).toString().padStart(2,"0");return`${t}m ${i}s`},returnErrrorMessage(){try{JSON.parse(this.errorMessage)}catch{return this.errorMessage}if(this.isObject(JSON.parse(this.errorMessage))){let e=JSON.parse(this.errorMessage);return`
                <h5 style="margin:0">${e.status}</h5>
                <p style="margin-bottom:0;">${e.message}</p>
              `}return this.errorMessage}},template:d` <div class="uip-flex uip-flex-column">
    <div class="uip-flex uip-flex-between">
      <div class="uip-margin-bottom-xxs uip-text-normal uip-chart-title">{{returnName}}</div>
    </div>
    <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle uip-min-w-200 uip-w-100p uip-ratio-16-10 uip-border-box"><loading-chart></loading-chart></div>
    <div
      v-else-if="error && errorMessage"
      class="uip-padding-xs uip-border-round uip-background-orange-wash uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-100p"
      v-html="returnErrrorMessage()"
    ></div>
    <div v-else-if="!returnChartType" class="uip-padding-xxs uip-border-round uip-background-green-wash uip-text-green uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-200">
      {{strings.selectDataMetric}}
    </div>
    <div v-else class="uip-min-w-200">
      <div class="uip-flex uip-flex-column uip-row-gap-xs">
        <div class="uip-flex uip-flex-between uip-gap-xxs uip-flex-center">
          <div class="uip-text-xl uip-text-bold">{{returnTotal}}</div>
          <div
            class="uip-text-s uip-background-orange-wash uip-border-round uip-padding-xxxs uip-padding-left-xs uip-padding-right-xs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label"
          >
            <AppIcon v-if="percentChange > 0" icon="arrow_upward" />
            <AppIcon v-if="percentChange < 0" icon="arrow_downward" />
            <span>{{percentChange}}%</span>
          </div>
        </div>
        <div class="uip-text-muted uip-margin-bottom-xs">vs. {{returnComparisonTotal}} {{strings.lastPeriod}}</div>
        <uip-chart v-if="!hideChart && rendered" :chartData="returnChartData" class="uip-chart-canvas" />
        <div class="uip-flex uip-flex-row uip-flex-between" v-if="!hideChart">
          <div class="uip-text-s uip-text-muted uip-chart-label">{{chartData.labels.main[0]}}</div>
          <div class="uip-text-s uip-text-muted uip-chart-label">{{chartData.labels.main[chartData.labels.main.length - 1]}}</div>
        </div>
      </div>
    </div>
  </div>`},Oa={metadata:$a,component:Ea},{__:$,_x:Hn,_n:Gn,_nx:Yn}=wp.i18n,Ia={name:$("WC map","uipress-pro"),moduleName:"uip-woocommerce-analytics-map",description:$("Outputs order data from woocommerce as a interactive map","uipress-pro"),group:"storeanalytics",premium:!0,icon:"map",settings:{},optionsEnabled:[{name:"block",label:$("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"chartName",label:$("Chart title","uipress-pro"),value:{string:$("Sales map","uipress-pro")}},{option:"defaultSelect",componentName:"default-select",uniqueKey:"chartDataType",label:$("Chart metric","uipress-pro"),args:{options:[{value:"total_orders",label:$("Total orders","uipress-pro")},{value:"total_revenue",label:$("Total revenue","uipress-pro")},{value:"failed_orders",label:$("Failed orders","uipress-pro")},{value:"refunded_orders",label:$("Refunded orders","uipress-pro")}]},value:""},{option:"number",componentName:"uip-number",uniqueKey:"dateRange",label:$("Default date range (days)","uipress-pro"),value:14},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"darkMode",label:$("Map style","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:$("Light","uipress-pro")},true:{value:!0,label:$("Dark","uipress-pro")}}}}]},{name:"style",label:$("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"title",label:$("Chart title","uipress-pro"),icon:"title",styleType:"style",class:".uip-chart-title"},{name:"dates",label:$("Dates","uipress-pro"),icon:"date_range",styleType:"style",class:".uip-dates"},{name:"map",label:$("Map","uipress-pro"),icon:"map",styleType:"style",class:".uip-wc-map"}]},Fe=[{country:"Albania",alpha2:"AL",alpha3:"ALB",numeric:8,latitude:41,longitude:20},{country:"Algeria",alpha2:"DZ",alpha3:"DZA",numeric:12,latitude:28,longitude:3},{country:"American Samoa",alpha2:"AS",alpha3:"ASM",numeric:16,latitude:-14.3333,longitude:-170},{country:"Andorra",alpha2:"AD",alpha3:"AND",numeric:20,latitude:42.5,longitude:1.6},{country:"Angola",alpha2:"AO",alpha3:"AGO",numeric:24,latitude:-12.5,longitude:18.5},{country:"Anguilla",alpha2:"AI",alpha3:"AIA",numeric:660,latitude:18.25,longitude:-63.1667},{country:"Antarctica",alpha2:"AQ",alpha3:"ATA",numeric:10,latitude:-90,longitude:0},{country:"Antigua and Barbuda",alpha2:"AG",alpha3:"ATG",numeric:28,latitude:17.05,longitude:-61.8},{country:"Argentina",alpha2:"AR",alpha3:"ARG",numeric:32,latitude:-34,longitude:-64},{country:"Armenia",alpha2:"AM",alpha3:"ARM",numeric:51,latitude:40,longitude:45},{country:"Aruba",alpha2:"AW",alpha3:"ABW",numeric:533,latitude:12.5,longitude:-69.9667},{country:"Australia",alpha2:"AU",alpha3:"AUS",numeric:36,latitude:-27,longitude:133},{country:"Austria",alpha2:"AT",alpha3:"AUT",numeric:40,latitude:47.3333,longitude:13.3333},{country:"Azerbaijan",alpha2:"AZ",alpha3:"AZE",numeric:31,latitude:40.5,longitude:47.5},{country:"Bahamas",alpha2:"BS",alpha3:"BHS",numeric:44,latitude:24.25,longitude:-76},{country:"Bahrain",alpha2:"BH",alpha3:"BHR",numeric:48,latitude:26,longitude:50.55},{country:"Bangladesh",alpha2:"BD",alpha3:"BGD",numeric:50,latitude:24,longitude:90},{country:"Barbados",alpha2:"BB",alpha3:"BRB",numeric:52,latitude:13.1667,longitude:-59.5333},{country:"Belarus",alpha2:"BY",alpha3:"BLR",numeric:112,latitude:53,longitude:28},{country:"Belgium",alpha2:"BE",alpha3:"BEL",numeric:56,latitude:50.8333,longitude:4},{country:"Belize",alpha2:"BZ",alpha3:"BLZ",numeric:84,latitude:17.25,longitude:-88.75},{country:"Benin",alpha2:"BJ",alpha3:"BEN",numeric:204,latitude:9.5,longitude:2.25},{country:"Bermuda",alpha2:"BM",alpha3:"BMU",numeric:60,latitude:32.3333,longitude:-64.75},{country:"Bhutan",alpha2:"BT",alpha3:"BTN",numeric:64,latitude:27.5,longitude:90.5},{country:"Bolivia, Plurinational State of",alpha2:"BO",alpha3:"BOL",numeric:68,latitude:-17,longitude:-65},{country:"Bosnia and Herzegovina",alpha2:"BA",alpha3:"BIH",numeric:70,latitude:44,longitude:18},{country:"Botswana",alpha2:"BW",alpha3:"BWA",numeric:72,latitude:-22,longitude:24},{country:"Bouvet Island",alpha2:"BV",alpha3:"BVT",numeric:74,latitude:-54.4333,longitude:3.4},{country:"Brazil",alpha2:"BR",alpha3:"BRA",numeric:76,latitude:-10,longitude:-55},{country:"British Indian Ocean Territory",alpha2:"IO",alpha3:"IOT",numeric:86,latitude:-6,longitude:71.5},{country:"Brunei Darussalam",alpha2:"BN",alpha3:"BRN",numeric:96,latitude:4.5,longitude:114.6667},{country:"Bulgaria",alpha2:"BG",alpha3:"BGR",numeric:100,latitude:43,longitude:25},{country:"Burkina Faso",alpha2:"BF",alpha3:"BFA",numeric:854,latitude:13,longitude:-2},{country:"Burundi",alpha2:"BI",alpha3:"BDI",numeric:108,latitude:-3.5,longitude:30},{country:"Cambodia",alpha2:"KH",alpha3:"KHM",numeric:116,latitude:13,longitude:105},{country:"Cameroon",alpha2:"CM",alpha3:"CMR",numeric:120,latitude:6,longitude:12},{country:"Canada",alpha2:"CA",alpha3:"CAN",numeric:124,latitude:60,longitude:-95},{country:"Cape Verde",alpha2:"CV",alpha3:"CPV",numeric:132,latitude:16,longitude:-24},{country:"Cayman Islands",alpha2:"KY",alpha3:"CYM",numeric:136,latitude:19.5,longitude:-80.5},{country:"Central African Republic",alpha2:"CF",alpha3:"CAF",numeric:140,latitude:7,longitude:21},{country:"Chad",alpha2:"TD",alpha3:"TCD",numeric:148,latitude:15,longitude:19},{country:"Chile",alpha2:"CL",alpha3:"CHL",numeric:152,latitude:-30,longitude:-71},{country:"China",alpha2:"CN",alpha3:"CHN",numeric:156,latitude:35,longitude:105},{country:"Christmas Island",alpha2:"CX",alpha3:"CXR",numeric:162,latitude:-10.5,longitude:105.6667},{country:"Cocos (Keeling) Islands",alpha2:"CC",alpha3:"CCK",numeric:166,latitude:-12.5,longitude:96.8333},{country:"Colombia",alpha2:"CO",alpha3:"COL",numeric:170,latitude:4,longitude:-72},{country:"Comoros",alpha2:"KM",alpha3:"COM",numeric:174,latitude:-12.1667,longitude:44.25},{country:"Congo",alpha2:"CG",alpha3:"COG",numeric:178,latitude:-1,longitude:15},{country:"Congo, the Democratic Republic of the",alpha2:"CD",alpha3:"COD",numeric:180,latitude:0,longitude:25},{country:"Cook Islands",alpha2:"CK",alpha3:"COK",numeric:184,latitude:-21.2333,longitude:-159.7667},{country:"Costa Rica",alpha2:"CR",alpha3:"CRI",numeric:188,latitude:10,longitude:-84},{country:"Côte d'Ivoire",alpha2:"CI",alpha3:"CIV",numeric:384,latitude:8,longitude:-5},{country:"Croatia",alpha2:"HR",alpha3:"HRV",numeric:191,latitude:45.1667,longitude:15.5},{country:"Cuba",alpha2:"CU",alpha3:"CUB",numeric:192,latitude:21.5,longitude:-80},{country:"Cyprus",alpha2:"CY",alpha3:"CYP",numeric:196,latitude:35,longitude:33},{country:"Czech Republic",alpha2:"CZ",alpha3:"CZE",numeric:203,latitude:49.75,longitude:15.5},{country:"Denmark",alpha2:"DK",alpha3:"DNK",numeric:208,latitude:56,longitude:10},{country:"Djibouti",alpha2:"DJ",alpha3:"DJI",numeric:262,latitude:11.5,longitude:43},{country:"Dominica",alpha2:"DM",alpha3:"DMA",numeric:212,latitude:15.4167,longitude:-61.3333},{country:"Dominican Republic",alpha2:"DO",alpha3:"DOM",numeric:214,latitude:19,longitude:-70.6667},{country:"Ecuador",alpha2:"EC",alpha3:"ECU",numeric:218,latitude:-2,longitude:-77.5},{country:"Egypt",alpha2:"EG",alpha3:"EGY",numeric:818,latitude:27,longitude:30},{country:"El Salvador",alpha2:"SV",alpha3:"SLV",numeric:222,latitude:13.8333,longitude:-88.9167},{country:"Equatorial Guinea",alpha2:"GQ",alpha3:"GNQ",numeric:226,latitude:2,longitude:10},{country:"Eritrea",alpha2:"ER",alpha3:"ERI",numeric:232,latitude:15,longitude:39},{country:"Estonia",alpha2:"EE",alpha3:"EST",numeric:233,latitude:59,longitude:26},{country:"Ethiopia",alpha2:"ET",alpha3:"ETH",numeric:231,latitude:8,longitude:38},{country:"Falkland Islands (Malvinas)",alpha2:"FK",alpha3:"FLK",numeric:238,latitude:-51.75,longitude:-59},{country:"Faroe Islands",alpha2:"FO",alpha3:"FRO",numeric:234,latitude:62,longitude:-7},{country:"Fiji",alpha2:"FJ",alpha3:"FJI",numeric:242,latitude:-18,longitude:175},{country:"Finland",alpha2:"FI",alpha3:"FIN",numeric:246,latitude:64,longitude:26},{country:"France",alpha2:"FR",alpha3:"FRA",numeric:250,latitude:46,longitude:2},{country:"French Guiana",alpha2:"GF",alpha3:"GUF",numeric:254,latitude:4,longitude:-53},{country:"French Polynesia",alpha2:"PF",alpha3:"PYF",numeric:258,latitude:-15,longitude:-140},{country:"French Southern Territories",alpha2:"TF",alpha3:"ATF",numeric:260,latitude:-43,longitude:67},{country:"Gabon",alpha2:"GA",alpha3:"GAB",numeric:266,latitude:-1,longitude:11.75},{country:"Gambia",alpha2:"GM",alpha3:"GMB",numeric:270,latitude:13.4667,longitude:-16.5667},{country:"Georgia",alpha2:"GE",alpha3:"GEO",numeric:268,latitude:42,longitude:43.5},{country:"Germany",alpha2:"DE",alpha3:"DEU",numeric:276,latitude:51,longitude:9},{country:"Ghana",alpha2:"GH",alpha3:"GHA",numeric:288,latitude:8,longitude:-2},{country:"Gibraltar",alpha2:"GI",alpha3:"GIB",numeric:292,latitude:36.1833,longitude:-5.3667},{country:"Greece",alpha2:"GR",alpha3:"GRC",numeric:300,latitude:39,longitude:22},{country:"Greenland",alpha2:"GL",alpha3:"GRL",numeric:304,latitude:72,longitude:-40},{country:"Grenada",alpha2:"GD",alpha3:"GRD",numeric:308,latitude:12.1167,longitude:-61.6667},{country:"Guadeloupe",alpha2:"GP",alpha3:"GLP",numeric:312,latitude:16.25,longitude:-61.5833},{country:"Guam",alpha2:"GU",alpha3:"GUM",numeric:316,latitude:13.4667,longitude:144.7833},{country:"Guatemala",alpha2:"GT",alpha3:"GTM",numeric:320,latitude:15.5,longitude:-90.25},{country:"Guernsey",alpha2:"GG",alpha3:"GGY",numeric:831,latitude:49.5,longitude:-2.56},{country:"Guinea",alpha2:"GN",alpha3:"GIN",numeric:324,latitude:11,longitude:-10},{country:"Guinea-Bissau",alpha2:"GW",alpha3:"GNB",numeric:624,latitude:12,longitude:-15},{country:"Guyana",alpha2:"GY",alpha3:"GUY",numeric:328,latitude:5,longitude:-59},{country:"Haiti",alpha2:"HT",alpha3:"HTI",numeric:332,latitude:19,longitude:-72.4167},{country:"Heard Island and McDonald Islands",alpha2:"HM",alpha3:"HMD",numeric:334,latitude:-53.1,longitude:72.5167},{country:"Holy See (Vatican City State)",alpha2:"VA",alpha3:"VAT",numeric:336,latitude:41.9,longitude:12.45},{country:"Honduras",alpha2:"HN",alpha3:"HND",numeric:340,latitude:15,longitude:-86.5},{country:"Hong Kong",alpha2:"HK",alpha3:"HKG",numeric:344,latitude:22.25,longitude:114.1667},{country:"Hungary",alpha2:"HU",alpha3:"HUN",numeric:348,latitude:47,longitude:20},{country:"Iceland",alpha2:"IS",alpha3:"ISL",numeric:352,latitude:65,longitude:-18},{country:"India",alpha2:"IN",alpha3:"IND",numeric:356,latitude:20,longitude:77},{country:"Indonesia",alpha2:"ID",alpha3:"IDN",numeric:360,latitude:-5,longitude:120},{country:"Iran, Islamic Republic of",alpha2:"IR",alpha3:"IRN",numeric:364,latitude:32,longitude:53},{country:"Iraq",alpha2:"IQ",alpha3:"IRQ",numeric:368,latitude:33,longitude:44},{country:"Ireland",alpha2:"IE",alpha3:"IRL",numeric:372,latitude:53,longitude:-8},{country:"Isle of Man",alpha2:"IM",alpha3:"IMN",numeric:833,latitude:54.23,longitude:-4.55},{country:"Israel",alpha2:"IL",alpha3:"ISR",numeric:376,latitude:31.5,longitude:34.75},{country:"Italy",alpha2:"IT",alpha3:"ITA",numeric:380,latitude:42.8333,longitude:12.8333},{country:"Jamaica",alpha2:"JM",alpha3:"JAM",numeric:388,latitude:18.25,longitude:-77.5},{country:"Japan",alpha2:"JP",alpha3:"JPN",numeric:392,latitude:36,longitude:138},{country:"Jersey",alpha2:"JE",alpha3:"JEY",numeric:832,latitude:49.21,longitude:-2.13},{country:"Jordan",alpha2:"JO",alpha3:"JOR",numeric:400,latitude:31,longitude:36},{country:"Kazakhstan",alpha2:"KZ",alpha3:"KAZ",numeric:398,latitude:48,longitude:68},{country:"Kenya",alpha2:"KE",alpha3:"KEN",numeric:404,latitude:1,longitude:38},{country:"Kiribati",alpha2:"KI",alpha3:"KIR",numeric:296,latitude:1.4167,longitude:173},{country:"Korea, Democratic People's Republic of",alpha2:"KP",alpha3:"PRK",numeric:408,latitude:40,longitude:127},{country:"Korea, Republic of",alpha2:"KR",alpha3:"KOR",numeric:410,latitude:37,longitude:127.5},{country:"Kuwait",alpha2:"KW",alpha3:"KWT",numeric:414,latitude:29.3375,longitude:47.6581},{country:"Kyrgyzstan",alpha2:"KG",alpha3:"KGZ",numeric:417,latitude:41,longitude:75},{country:"Lao People's Democratic Republic",alpha2:"LA",alpha3:"LAO",numeric:418,latitude:18,longitude:105},{country:"Latvia",alpha2:"LV",alpha3:"LVA",numeric:428,latitude:57,longitude:25},{country:"Lebanon",alpha2:"LB",alpha3:"LBN",numeric:422,latitude:33.8333,longitude:35.8333},{country:"Lesotho",alpha2:"LS",alpha3:"LSO",numeric:426,latitude:-29.5,longitude:28.5},{country:"Liberia",alpha2:"LR",alpha3:"LBR",numeric:430,latitude:6.5,longitude:-9.5},{country:"Libyan Arab Jamahiriya",alpha2:"LY",alpha3:"LBY",numeric:434,latitude:25,longitude:17},{country:"Liechtenstein",alpha2:"LI",alpha3:"LIE",numeric:438,latitude:47.1667,longitude:9.5333},{country:"Lithuania",alpha2:"LT",alpha3:"LTU",numeric:440,latitude:56,longitude:24},{country:"Luxembourg",alpha2:"LU",alpha3:"LUX",numeric:442,latitude:49.75,longitude:6.1667},{country:"Macao",alpha2:"MO",alpha3:"MAC",numeric:446,latitude:22.1667,longitude:113.55},{country:"Macedonia, the former Yugoslav Republic of",alpha2:"MK",alpha3:"MKD",numeric:807,latitude:41.8333,longitude:22},{country:"Madagascar",alpha2:"MG",alpha3:"MDG",numeric:450,latitude:-20,longitude:47},{country:"Malawi",alpha2:"MW",alpha3:"MWI",numeric:454,latitude:-13.5,longitude:34},{country:"Malaysia",alpha2:"MY",alpha3:"MYS",numeric:458,latitude:2.5,longitude:112.5},{country:"Maldives",alpha2:"MV",alpha3:"MDV",numeric:462,latitude:3.25,longitude:73},{country:"Mali",alpha2:"ML",alpha3:"MLI",numeric:466,latitude:17,longitude:-4},{country:"Malta",alpha2:"MT",alpha3:"MLT",numeric:470,latitude:35.8333,longitude:14.5833},{country:"Marshall Islands",alpha2:"MH",alpha3:"MHL",numeric:584,latitude:9,longitude:168},{country:"Martinique",alpha2:"MQ",alpha3:"MTQ",numeric:474,latitude:14.6667,longitude:-61},{country:"Mauritania",alpha2:"MR",alpha3:"MRT",numeric:478,latitude:20,longitude:-12},{country:"Mauritius",alpha2:"MU",alpha3:"MUS",numeric:480,latitude:-20.2833,longitude:57.55},{country:"Mayotte",alpha2:"YT",alpha3:"MYT",numeric:175,latitude:-12.8333,longitude:45.1667},{country:"Mexico",alpha2:"MX",alpha3:"MEX",numeric:484,latitude:23,longitude:-102},{country:"Micronesia, Federated States of",alpha2:"FM",alpha3:"FSM",numeric:583,latitude:6.9167,longitude:158.25},{country:"Moldova, Republic of",alpha2:"MD",alpha3:"MDA",numeric:498,latitude:47,longitude:29},{country:"Monaco",alpha2:"MC",alpha3:"MCO",numeric:492,latitude:43.7333,longitude:7.4},{country:"Mongolia",alpha2:"MN",alpha3:"MNG",numeric:496,latitude:46,longitude:105},{country:"Montenegro",alpha2:"ME",alpha3:"MNE",numeric:499,latitude:42,longitude:19},{country:"Montserrat",alpha2:"MS",alpha3:"MSR",numeric:500,latitude:16.75,longitude:-62.2},{country:"Morocco",alpha2:"MA",alpha3:"MAR",numeric:504,latitude:32,longitude:-5},{country:"Mozambique",alpha2:"MZ",alpha3:"MOZ",numeric:508,latitude:-18.25,longitude:35},{country:"Myanmar",alpha2:"MM",alpha3:"MMR",numeric:104,latitude:22,longitude:98},{country:"Namibia",alpha2:"NA",alpha3:"NAM",numeric:516,latitude:-22,longitude:17},{country:"Nauru",alpha2:"NR",alpha3:"NRU",numeric:520,latitude:-.5333,longitude:166.9167},{country:"Nepal",alpha2:"NP",alpha3:"NPL",numeric:524,latitude:28,longitude:84},{country:"Netherlands",alpha2:"NL",alpha3:"NLD",numeric:528,latitude:52.5,longitude:5.75},{country:"Netherlands Antilles",alpha2:"AN",alpha3:"ANT",numeric:530,latitude:12.25,longitude:-68.75},{country:"New Caledonia",alpha2:"NC",alpha3:"NCL",numeric:540,latitude:-21.5,longitude:165.5},{country:"New Zealand",alpha2:"NZ",alpha3:"NZL",numeric:554,latitude:-41,longitude:174},{country:"Nicaragua",alpha2:"NI",alpha3:"NIC",numeric:558,latitude:13,longitude:-85},{country:"Niger",alpha2:"NE",alpha3:"NER",numeric:562,latitude:16,longitude:8},{country:"Nigeria",alpha2:"NG",alpha3:"NGA",numeric:566,latitude:10,longitude:8},{country:"Niue",alpha2:"NU",alpha3:"NIU",numeric:570,latitude:-19.0333,longitude:-169.8667},{country:"Norfolk Island",alpha2:"NF",alpha3:"NFK",numeric:574,latitude:-29.0333,longitude:167.95},{country:"Northern Mariana Islands",alpha2:"MP",alpha3:"MNP",numeric:580,latitude:15.2,longitude:145.75},{country:"Norway",alpha2:"NO",alpha3:"NOR",numeric:578,latitude:62,longitude:10},{country:"Oman",alpha2:"OM",alpha3:"OMN",numeric:512,latitude:21,longitude:57},{country:"Pakistan",alpha2:"PK",alpha3:"PAK",numeric:586,latitude:30,longitude:70},{country:"Palau",alpha2:"PW",alpha3:"PLW",numeric:585,latitude:7.5,longitude:134.5},{country:"Palestinian Territory, Occupied",alpha2:"PS",alpha3:"PSE",numeric:275,latitude:32,longitude:35.25},{country:"Panama",alpha2:"PA",alpha3:"PAN",numeric:591,latitude:9,longitude:-80},{country:"Papua New Guinea",alpha2:"PG",alpha3:"PNG",numeric:598,latitude:-6,longitude:147},{country:"Paraguay",alpha2:"PY",alpha3:"PRY",numeric:600,latitude:-23,longitude:-58},{country:"Peru",alpha2:"PE",alpha3:"PER",numeric:604,latitude:-10,longitude:-76},{country:"Philippines",alpha2:"PH",alpha3:"PHL",numeric:608,latitude:13,longitude:122},{country:"Pitcairn",alpha2:"PN",alpha3:"PCN",numeric:612,latitude:-24.7,longitude:-127.4},{country:"Poland",alpha2:"PL",alpha3:"POL",numeric:616,latitude:52,longitude:20},{country:"Portugal",alpha2:"PT",alpha3:"PRT",numeric:620,latitude:39.5,longitude:-8},{country:"Puerto Rico",alpha2:"PR",alpha3:"PRI",numeric:630,latitude:18.25,longitude:-66.5},{country:"Qatar",alpha2:"QA",alpha3:"QAT",numeric:634,latitude:25.5,longitude:51.25},{country:"Réunion",alpha2:"RE",alpha3:"REU",numeric:638,latitude:-21.1,longitude:55.6},{country:"Romania",alpha2:"RO",alpha3:"ROU",numeric:642,latitude:46,longitude:25},{country:"Russian Federation",alpha2:"RU",alpha3:"RUS",numeric:643,latitude:60,longitude:100},{country:"Rwanda",alpha2:"RW",alpha3:"RWA",numeric:646,latitude:-2,longitude:30},{country:"Saint Helena, Ascension and Tristan da Cunha",alpha2:"SH",alpha3:"SHN",numeric:654,latitude:-15.9333,longitude:-5.7},{country:"Saint Kitts and Nevis",alpha2:"KN",alpha3:"KNA",numeric:659,latitude:17.3333,longitude:-62.75},{country:"Saint Lucia",alpha2:"LC",alpha3:"LCA",numeric:662,latitude:13.8833,longitude:-61.1333},{country:"Saint Pierre and Miquelon",alpha2:"PM",alpha3:"SPM",numeric:666,latitude:46.8333,longitude:-56.3333},{country:"Saint Vincent and the Grenadines",alpha2:"VC",alpha3:"VCT",numeric:670,latitude:13.25,longitude:-61.2},{country:"Samoa",alpha2:"WS",alpha3:"WSM",numeric:882,latitude:-13.5833,longitude:-172.3333},{country:"San Marino",alpha2:"SM",alpha3:"SMR",numeric:674,latitude:43.7667,longitude:12.4167},{country:"Sao Tome and Principe",alpha2:"ST",alpha3:"STP",numeric:678,latitude:1,longitude:7},{country:"Saudi Arabia",alpha2:"SA",alpha3:"SAU",numeric:682,latitude:25,longitude:45},{country:"Senegal",alpha2:"SN",alpha3:"SEN",numeric:686,latitude:14,longitude:-14},{country:"Serbia",alpha2:"RS",alpha3:"SRB",numeric:688,latitude:44,longitude:21},{country:"Seychelles",alpha2:"SC",alpha3:"SYC",numeric:690,latitude:-4.5833,longitude:55.6667},{country:"Sierra Leone",alpha2:"SL",alpha3:"SLE",numeric:694,latitude:8.5,longitude:-11.5},{country:"Singapore",alpha2:"SG",alpha3:"SGP",numeric:702,latitude:1.3667,longitude:103.8},{country:"Slovakia",alpha2:"SK",alpha3:"SVK",numeric:703,latitude:48.6667,longitude:19.5},{country:"Slovenia",alpha2:"SI",alpha3:"SVN",numeric:705,latitude:46,longitude:15},{country:"Solomon Islands",alpha2:"SB",alpha3:"SLB",numeric:90,latitude:-8,longitude:159},{country:"Somalia",alpha2:"SO",alpha3:"SOM",numeric:706,latitude:10,longitude:49},{country:"South Africa",alpha2:"ZA",alpha3:"ZAF",numeric:710,latitude:-29,longitude:24},{country:"South Georgia and the South Sandwich Islands",alpha2:"GS",alpha3:"SGS",numeric:239,latitude:-54.5,longitude:-37},{country:"Spain",alpha2:"ES",alpha3:"ESP",numeric:724,latitude:40,longitude:-4},{country:"Sri Lanka",alpha2:"LK",alpha3:"LKA",numeric:144,latitude:7,longitude:81},{country:"Sudan",alpha2:"SD",alpha3:"SDN",numeric:736,latitude:15,longitude:30},{country:"Suriname",alpha2:"SR",alpha3:"SUR",numeric:740,latitude:4,longitude:-56},{country:"Svalbard and Jan Mayen",alpha2:"SJ",alpha3:"SJM",numeric:744,latitude:78,longitude:20},{country:"Swaziland",alpha2:"SZ",alpha3:"SWZ",numeric:748,latitude:-26.5,longitude:31.5},{country:"Sweden",alpha2:"SE",alpha3:"SWE",numeric:752,latitude:62,longitude:15},{country:"Switzerland",alpha2:"CH",alpha3:"CHE",numeric:756,latitude:47,longitude:8},{country:"Syrian Arab Republic",alpha2:"SY",alpha3:"SYR",numeric:760,latitude:35,longitude:38},{country:"Taiwan, Province of China",alpha2:"TW",alpha3:"TWN",numeric:158,latitude:23.5,longitude:121},{country:"Tajikistan",alpha2:"TJ",alpha3:"TJK",numeric:762,latitude:39,longitude:71},{country:"Tanzania, United Republic of",alpha2:"TZ",alpha3:"TZA",numeric:834,latitude:-6,longitude:35},{country:"Thailand",alpha2:"TH",alpha3:"THA",numeric:764,latitude:15,longitude:100},{country:"Timor-Leste",alpha2:"TL",alpha3:"TLS",numeric:626,latitude:-8.55,longitude:125.5167},{country:"Togo",alpha2:"TG",alpha3:"TGO",numeric:768,latitude:8,longitude:1.1667},{country:"Tokelau",alpha2:"TK",alpha3:"TKL",numeric:772,latitude:-9,longitude:-172},{country:"Tonga",alpha2:"TO",alpha3:"TON",numeric:776,latitude:-20,longitude:-175},{country:"Trinidad and Tobago",alpha2:"TT",alpha3:"TTO",numeric:780,latitude:11,longitude:-61},{country:"Tunisia",alpha2:"TN",alpha3:"TUN",numeric:788,latitude:34,longitude:9},{country:"Turkey",alpha2:"TR",alpha3:"TUR",numeric:792,latitude:39,longitude:35},{country:"Turkmenistan",alpha2:"TM",alpha3:"TKM",numeric:795,latitude:40,longitude:60},{country:"Turks and Caicos Islands",alpha2:"TC",alpha3:"TCA",numeric:796,latitude:21.75,longitude:-71.5833},{country:"Tuvalu",alpha2:"TV",alpha3:"TUV",numeric:798,latitude:-8,longitude:178},{country:"Uganda",alpha2:"UG",alpha3:"UGA",numeric:800,latitude:1,longitude:32},{country:"Ukraine",alpha2:"UA",alpha3:"UKR",numeric:804,latitude:49,longitude:32},{country:"United Arab Emirates",alpha2:"AE",alpha3:"ARE",numeric:784,latitude:24,longitude:54},{country:"United Kingdom",alpha2:"GB",alpha3:"GBR",numeric:826,latitude:54,longitude:-2},{country:"United States",alpha2:"US",alpha3:"USA",numeric:840,latitude:38,longitude:-97},{country:"United States Minor Outlying Islands",alpha2:"UM",alpha3:"UMI",numeric:581,latitude:19.2833,longitude:166.6},{country:"Uruguay",alpha2:"UY",alpha3:"URY",numeric:858,latitude:-33,longitude:-56},{country:"Uzbekistan",alpha2:"UZ",alpha3:"UZB",numeric:860,latitude:41,longitude:64},{country:"Vanuatu",alpha2:"VU",alpha3:"VUT",numeric:548,latitude:-16,longitude:167},{country:"Venezuela, Bolivarian Republic of",alpha2:"VE",alpha3:"VEN",numeric:862,latitude:8,longitude:-66},{country:"Viet Nam",alpha2:"VN",alpha3:"VNM",numeric:704,latitude:16,longitude:106},{country:"Virgin Islands, British",alpha2:"VG",alpha3:"VGB",numeric:92,latitude:18.5,longitude:-64.5},{country:"Virgin Islands, U.S.",alpha2:"VI",alpha3:"VIR",numeric:850,latitude:18.3333,longitude:-64.8333},{country:"Wallis and Futuna",alpha2:"WF",alpha3:"WLF",numeric:876,latitude:-13.3,longitude:-176.2},{country:"Western Sahara",alpha2:"EH",alpha3:"ESH",numeric:732,latitude:24.5,longitude:-13},{country:"Yemen",alpha2:"YE",alpha3:"YEM",numeric:887,latitude:15,longitude:48},{country:"Zambia",alpha2:"ZM",alpha3:"ZMB",numeric:894,latitude:-15,longitude:30},{country:"Zimbabwe",alpha2:"ZW",alpha3:"ZWE",numeric:716,latitude:-20,longitude:30},{country:"Afghanistan",alpha2:"AF",alpha3:"AFG",numeric:4,latitude:33,longitude:65}],{__:pe,_x:Jn,_n:zn,_nx:Wn}=wp.i18n;let ye;const Fa={props:{display:String,name:String,block:Object},data(){return{loading:!0,error:!1,map:!1,apiLoaded:!1,errorMessage:"",total:0,comparisonTotal:0,percentChange:0,fetchingQuery:!1,requestFromGroupDate:!1,currentRequest:!1,startDate:"",endDate:"",currentData:[],groupDate:{},chartData:{data:{main:[],comparison:[]},labels:{main:[],comparisons:[]},title:"",colors:{main:this.returnLineColor,comp:this.returnCompLineColor}},strings:{lastPeriod:pe("last period","uipress-pro"),selectDataMetric:pe("Please select a chart metric in this block's options to show chart data.","uipress-pro"),changeAccount:pe("Switch account","uipress-pro"),count:pe("Count","uipress-pro"),change:pe("Change","uipress-pro"),current:pe("Current","uipress-pro"),previous:pe("Previous","uipress-pro"),users:pe("users","uipress-pro")}}},inject:["uiTemplate"],watch:{currentData:{handler(){this.buildMap()},immediate:!0,deep:!0},"block.settings.block.options.chartDataType":{handler(e,t){this.getAnalytics()},deep:!0},"uipApp.woocommerce":{handler(e,t){e.ready&&this.getAnalytics()},deep:!0,immediate:!0},"uiTemplate.globalSettings.options.analytics.saveAccountToUser":{handler(e,t){this.refreshAnalytics()}}},mounted(){document.addEventListener("uipress/app/daterange/change",this.handleDateChange)},beforeUnmount(){document.removeEventListener("uipress/app/daterange/change",this.handleDateChange),this.map&&(this.map.remove(),this.map=!1)},computed:{returnTableData(){return this.isObject(this.currentData)?this.currentData:{}},returnMappCss(){return uipProPath+"assets/css/libs/mapbox.css"},returnTotal(){return this.total},returnComparisonTotal(){return this.comparisonTotal},returnChartData(){return this.chartData},returnName(){let e=this.get_block_option(this.block,"block","chartName",!0);return e?(e=this.isObject(e)?e.string:e,e):""},returnChartType(){return this.get_block_option(this.block,"block","chartDataType")},returnChartSettings(){return this.get_block_option(this.block,"block","chartOptions")},returnChartStyle(){let e=this.get_block_option(this.block,"block","chartStyle");return e?(e=this.isObject(e)?e.value:"line",e):"line"},returnLineColor(){let e=this.get_block_option(this.block,"block","chartColour");return e?(e=this.isObject(e)?e.value:e,e):""},returnCompLineColor(){let e=this.get_block_option(this.block,"block","chartCompColour");return e?(e=this.isObject(e)?e.value:e,e):""},hideChart(){let e=this.get_block_option(this.block,"block","hideChart");return e?(e=this.isObject(e)?e.value:e,e):""},inlineAccountSwitch(){let e=this.get_block_option(this.block,"block","inlineAccountSwitch");return e?(e=this.isObject(e)?e.value:e,e):!0},returnRange(){let e=this.get_block_option(this.block,"block","dateRange");return e?(e=isNaN(e)?14:e,e=e>60?60:e,e):14},hasGlobalDate(){return!!this.hasNestedPath(this.groupDate,"start")},isApiReady(){return this.hasNestedPath(this.uipApp,"woocommerce","ready")},darkMapTheme(){let e=this.get_block_option(this.block,"block","darkMode");return e?(e=this.isObject(e)?e.value:!1,e):!1}},methods:{handleDateChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.groupDate.start=e.detail.groupDate.start,this.groupDate.end=e.detail.groupDate.end,this.getAnalytics())},returnSymbolTotal(e){if(this.returnChartType=="total_revenue"){if(this.currentRequest.data.currency_pos=="left")return this.currentRequest.data.currency+e;if(this.currentRequest.data.currency_pos=="left_space")return this.currentRequest.data.currency+" "+e;if(this.currentRequest.data.currency_pos=="right")return e+this.currentRequest.data.currency;if(this.currentRequest.data.currency_pos=="right_space")return e+" "+this.currentRequest.data.currency}return e},async getAnalytics(){if(this.resetErrorState(),this.apiLoaded=this.isApiReady,!this.apiLoaded)return;this.loading=!0;const{startDate:e,endDate:t}=this.calculateDateRange(),i=await this.fetchAnalyticsData(e,t);i.error?this.handleApiError(i):(this.currentRequest=i,this.processResponse(i)),this.loading=!1},resetErrorState(){this.error=!1,this.errorMessage=""},calculateDateRange(){let e,t;return this.hasGlobalDate?(e=new Date(Date.parse(this.groupDate.start)),t=new Date(Date.parse(this.groupDate.end))):(t=new Date,t.setDate(t.getDate()-1),e=new Date,e.setDate(e.getDate()-this.returnRange)),this.startDate=e,this.endDate=t,{startDate:e,endDate:t}},async fetchAnalyticsData(e,t){return await this.uipApp.woocommerce.api("get",e,t)},handleApiError(e){this.error=!0,this.errorMessage=e.message},processResponse(){let e=this.currentRequest;this.returnChartType&&(e.data.map_data=this.calculateMapPercentages(e.data.map_data),this.currentData=e.data.map_data)},calculateMapPercentages(e){let t=0;const i=this.returnChartType;for(let a in e){let s=e[a][i];t+=s.total}for(let a in e){let s=e[a][i].total,r=s!==0&&t!==0?(s/t*100).toFixed(2):0;e[a][i].percent_total=r}return e},async removeAnalyticsAccount(){this.uipApp.woocommerce.ready=!1,await this.uipApp.woocommerce.api("removeAccount"),await this.uipApp.woocommerce.api("refresh"),this.uipApp.woocommerce.ready=!0,this.getAnalytics()},async refreshAnalytics(){this.uipApp.woocommerce.ready=!1,await this.uipApp.woocommerce.api("refresh")&&(this.uipApp.woocommerce.ready=!0,this.getAnalytics())},returnFormattedDate(e){if(!e)return"";const t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}/${i}/${a}`},returnErrrorMessage(){try{JSON.parse(this.errorMessage)}catch{return this.errorMessage}if(this.isObject(JSON.parse(this.errorMessage))){let e=JSON.parse(this.errorMessage);return`
              <h5 style="margin:0">${e.status}</h5>
              <p style="margin-bottom:0;">${e.message}</p>
            `}return this.errorMessage},async buildMap(){ye||(ye=(await Ie(()=>import("./assets/mapbox-gl-wnhiI-k1.js").then(s=>s.m),__vite__mapDeps([0,1]))).default,ye.accessToken="pk.eyJ1IjoibWFya2FzaHRvbiIsImEiOiJjbGRrZGYyc2IwamRuM3ZsZ2JudXdwMjRtIn0.V_oXBXMGBUBty-fZY0VXfg"),await this.$nextTick(),this.map&&(this.map.remove(),this.map=!1);let e="mapbox://styles/markashton/cldkdgzpx008t01rvfdmhtwet";if((this.darkMapTheme||this.uipApp.data.userPrefs.darkTheme)&&(e="mapbox://styles/markashton/cldklav6v009701rv47a1q7pa"),!this.$refs.mapcontainer)return;const t=new ye.Map({container:"uip-wc-map"+this.block.uid,style:e,zoom:1,center:[-10,14]});this.map=t,t.addControl(new ye.NavigationControl);let i=Fe;for(const a in this.returnTableData){let s=i.find(n=>n.alpha2.toLowerCase()===a.toLowerCase());if(typeof s>"u")continue;const r=this.createToolTip(this.returnTableData[a],s);new ye.Marker(r.el).setLngLat([s.longitude,s.latitude]).setPopup(new ye.Popup({offset:25}).setHTML(r.inner)).addTo(t)}},createToolTip(e,t){const i=e[this.returnChartType],a=document.createElement("div");a.className="marker uip-w-10 uip-ratio-1-1 uip-background-primary-wash uip-border-circle uip-border-primary";let s=i.percent_total*3;a.style.width=s+"px";let r=i.change<0?"uip-arrow-icon-up":"";r=i.change>0?"uip-arrow-icon-down":r;let n=`
          <div class="uip-background-default uip-boder uip-shadow uip-border-round">
            <div class="uip-background-default">
              <div class="uip-padding-xs uip-padding-top-xxs uip-padding-bottom-xxs uip-border-bottom uip-body-font uip-text-left uip-overflow-hidden uip-flex uip-flex-row uip-gap-xs uip-flex-between uip-flex-center">
              
                <div class="uip-text-bold uip-text-emphasis">
                  ${t.country}
                </div>
                
                <div class="uip-text-s uip-background-orange-wash uip-border-round uip-padding-xxxs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label uip-text-normal">
                  <span class="${r}"></span>
                  <span>${i.change}%</span>
                </div>
                
              </div>
              
              <div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-xxs">
                <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-between uip-min-w-130">
                  <div class="uip-text-bold uip-text-primary uip-no-wrap" >${this.returnSymbolTotal(i.total)+" "+i.label}</div>
                  <div class="uip-text-s uip-text-muted">${this.strings.current}</div>
                </div>
                <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-between uip-min-w-130">
                  <div class="uip-text-bold uip-text-orange uip-no-wrap">${this.returnSymbolTotal(i.total_comp)+" "+i.label}</div>
                  <div class="uip-text-s uip-text-muted">${this.strings.previous}</div>
                </div>
              </div>
            </div>
          </div>`;return{el:a,inner:n}}},template:d` <div class="uip-flex uip-flex-column uip-w-300">
    <component is="style">
      @import '{{returnMappCss}}'; .mapboxgl-ctrl-bottom-left, .mapboxgl-ctrl-bottom-right{ display:none; } .marker { border-radius: 50%; cursor: pointer; animation: pulse-outline 2.5s
      cubic-bezier(0.455, 0.03, 0.515, 0.955) -.4s infinite; transition: outline 5s ease, opacity .2s ease; } @keyframes pulse-outline { 0% { outline: 0px solid var(--uip-color-primary-lighter); }
      100% { outline: 12px solid transparent; } } .mapboxgl-popup { max-width: 200px; } .mapboxgl-popup-content { padding:0; box-shadow:none; border-radius:4px; } .mapboxgl-popup-close-button {
      top:5px; display:none; } .uip-dark-mode .mapboxgl-ctrl-top-right{ filter: invert(1); } .mapboxgl-popup-anchor-top .mapboxgl-popup-tip{ border-bottom-color: var(--uip-color-base-0); }
      .mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{ border-top-color: var(--uip-color-base-0); } .mapboxgl-popup-anchor-left .mapboxgl-popup-tip{ border-right-color: var(--uip-color-base-0); }
      .mapboxgl-popup-anchor-right .mapboxgl-popup-tip{ border-left-color: var(--uip-color-base-0); } .mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{ border-bottom-color: var(--uip-color-base-0);
      } .mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{ border-bottom-color: var(--uip-color-base-0); } .mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{ border-top-color:
      var(--uip-color-base-0); } .mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{ border-top-color: var(--uip-color-base-0); }
    </component>

    <!-- Header -->
    <div class="uip-flex uip-flex-between">
      <!--Chart title-->
      <div class="uip-margin-bottom-xxs uip-text-normal uip-chart-title">{{returnName}}</div>
    </div>

    <div class="uip-text-s uip-text-muted uip-margin-bottom-s uip-margin-bottom-s uip-dates">{{returnFormattedDate(startDate)}} - {{returnFormattedDate(endDate)}}</div>

    <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle  uip-w-100p uip-ratio-16-10 uip-border-box"><loading-chart></loading-chart></div>

    <div
      v-else-if="error && errorMessage"
      class="uip-padding-xs uip-border-round uip-background-orange-wash uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-100p"
      v-html="returnErrrorMessage()"
    ></div>

    <div v-else-if="!returnChartType" class="uip-padding-xxs uip-border-round uip-background-green-wash uip-text-green uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-200">
      {{strings.selectDataMetric}}
    </div>

    <div v-else class="uip-position-relative uip-h-100p uip-w-100p" :class="{'uip-dark-mode' : darkMapTheme || uipApp.data.userPrefs.darkTheme}">
      <div ref="mapcontainer" :id="'uip-wc-map'+block.uid" class="uip-wc-map uip-w-100p uip-h-200"></div>
    </div>
  </div>`},ja={metadata:Ia,component:Fa},{__:B,_x:Qn,_n:Zn,_nx:Xn}=wp.i18n,qa={name:B("WC tables","uipress-pro"),moduleName:"uip-woocommerce-analytics-tables",description:B("Outputs your choice of order data from woocommerce as a table","uipress-pro"),group:"storeanalytics",premium:!0,path:uipProPath+"assets/js/uip/blocks/storeanalytics/woocommerce-analytics-tables.min.js",icon:"table_chart",settings:{},optionsEnabled:[{name:"block",label:B("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"chartName",label:B("Chart title","uipress-pro"),value:{string:B("Store products","uipress-pro")}},{option:"defaultSelect",componentName:"default-select",uniqueKey:"chartDataType",label:B("Chart metric","uipress-pro"),args:{options:[{value:"top_products_revenue",label:B("Top products by revenue","uipress-pro")},{value:"top_products_quantity",label:B("Top products by quantity","uipress-pro")}]},value:""},{option:"number",componentName:"uip-number",uniqueKey:"dateRange",label:B("Default date range (days)","uipress-pro"),value:14}]},{name:"style",label:B("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"title",label:B("Table title","uipress-pro"),icon:"title",styleType:"style",class:".uip-chart-title"},{name:"dates",label:B("Dates","uipress-pro"),icon:"date_range",styleType:"style",class:".uip-dates"},{name:"table",label:B("Table","uipress-pro"),icon:"table",styleType:"style",class:".uip-table"},{name:"percentChange",label:B("Percentage change","uipress-pro"),icon:"label",styleType:"style",class:".uip-tag-label"}]},{__:ve,_x:eo,_n:to,_nx:io}=wp.i18n,Va={props:{display:String,name:String,block:Object},data(){return{loading:!0,error:!1,apiLoaded:!1,errorMessage:"",total:0,comparisonTotal:0,percentChange:0,fetchingQuery:!1,requestFromGroupDate:!1,currentRequest:!1,startDate:"",endDate:"",currentData:[],groupDate:{},chartData:{data:{main:[],comparison:[]},labels:{main:[],comparisons:[]},title:"",colors:{main:this.returnLineColor,comp:this.returnCompLineColor}},strings:{lastPeriod:ve("last period","uipress-pro"),selectDataMetric:ve("Please select a chart metric in this block's options to show chart data.","uipress-pro"),changeAccount:ve("Switch account","uipress-pro"),count:ve("Count","uipress-pro"),change:ve("Change","uipress-pro"),sold:ve("Sold","uipress-pro"),revenue:ve("Revenue","uipress-pro")}}},watch:{"block.settings.block.options.chartDataType":{handler(e,t){this.currentRequest&&this.processResponse()}},"uipApp.woocommerce.ready":{handler(e,t){this.getAnalytics()},deep:!0},"uipApp.woocommerce":{handler(e,t){e.ready&&this.getAnalytics()},deep:!0,immediate:!0}},mounted(){document.addEventListener("uipress/app/daterange/change",this.handleDateChange)},beforeUnmount(){document.removeEventListener("uipress/app/daterange/change",this.handleDateChange)},computed:{returnTableData(){return this.currentData},returnTotal(){return this.total},returnComparisonTotal(){return this.comparisonTotal},returnChartData(){return this.chartData},returnName(){let e=this.get_block_option(this.block,"block","chartName",!0);return e?(e=this.isObject(e)?e.string:e,e):""},returnChartType(){return this.get_block_option(this.block,"block","chartDataType")},returnLineColor(){let e=this.get_block_option(this.block,"block","chartColour");return e?(e=this.isObject(e)?e.value:e,e):""},returnCompLineColor(){let e=this.get_block_option(this.block,"block","chartCompColour");return e?(e=this.isObject(e)?e.value:e,e):""},hideChart(){let e=this.get_block_option(this.block,"block","hideChart");return e?(e=this.isObject(e)?e.value:e,e):""},inlineAccountSwitch(){let e=this.get_block_option(this.block,"block","inlineAccountSwitch");return e?(e=this.isObject(e)?e.value:e,e):!0},returnRange(){let e=this.get_block_option(this.block,"block","dateRange");return e?(e=isNaN(e)?14:e,e=e>60?60:e,e):14},hasGlobalDate(){return!!this.hasNestedPath(this.groupDate,"start")}},methods:{handleDateChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.groupDate.start=e.detail.groupDate.start,this.groupDate.end=e.detail.groupDate.end,this.getAnalytics())},async getAnalytics(){if(this.loading=!0,this.error=!1,this.errorMessage="",!this.isObject(this.uipApp.woocommerce)){this.apiLoaded=!1;return}if(!("ready"in this.uipApp.woocommerce)){this.apiLoaded=!1;return}if(!this.uipApp.woocommerce.ready){this.apiLoaded=!1;return}this.apiLoaded=!0;let e,t;this.hasGlobalDate?(e=new Date(Date.parse(this.groupDate.start)),t=new Date(Date.parse(this.groupDate.end))):(t=new Date,t.setDate(t.getDate()-1),e=new Date,e.setDate(e.getDate()-this.returnRange));const i=await this.uipApp.woocommerce.api("get",e,t);if(i.error){this.loading=!1,this.error=!0,this.errorMessage=i.message;return}this.loading=!1,this.currentRequest=i.data,this.processResponse()},processResponse(){let e=this.currentRequest,t=this.returnChartType;t&&(this.currentData=e[t])},secondsToTime(e){if(isNaN(e)||e<0)return"0m 0s";const t=Math.floor(e/60).toString().padStart(2,"0"),i=(e%60).toString().padStart(2,"0");return`${t}m ${i}s`},returnErrrorMessage(){try{JSON.parse(this.errorMessage)}catch{return this.errorMessage}if(this.isObject(JSON.parse(this.errorMessage))){let e=JSON.parse(this.errorMessage);return`
                  <h5 style="margin:0">${e.status}</h5>
                  <p style="margin-bottom:0;">${e.message}</p>
                `}return this.errorMessage},returnFormattedDate(e){if(!e)return"";const t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}/${i}/${a}`},returnSymbolTotal(e){return this.currentRequest.currency_pos=="left"?this.currentRequest.currency+e:this.currentRequest.currency_pos=="left_space"?this.currentRequest.currency+" "+e:this.currentRequest.currency_pos=="right"?e+this.currentRequest.currency:this.currentRequest.currency_pos=="right_space"?e+" "+this.currentRequest.currency:e}},template:d` <div class="uip-flex uip-flex-column">
    <div class="uip-flex uip-flex-between">
      <div class="uip-text-bold uip-margin-bottom-xxs uip-text-normal uip-chart-title">{{returnName}}</div>
    </div>

    <div class="uip-text-s uip-text-muted uip-margin-bottom-s uip-margin-bottom-s uip-dates">{{currentRequest.start_date}} - {{currentRequest.end_date}}</div>

    <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle uip-min-w-200 uip-w-100p uip-ratio-16-10 uip-border-box"><loading-chart /></div>

    <div
      v-else-if="error && errorMessage"
      class="uip-padding-xs uip-border-round uip-background-orange-wash uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-100p"
      v-html="returnErrrorMessage()"
    ></div>

    <div v-else-if="!returnChartType" class="uip-padding-xxs uip-border-round uip-background-green-wash uip-text-green uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-200">
      {{strings.selectDataMetric}}
    </div>

    <div v-else class="uip-min-w-200">
      <div class="uip-flex uip-flex-column uip-row-gap-xs">
        <div class="uip-max-w-100p uip-overflow-auto uip-scrollbar">
          <table class="uip-min-w-250 uip-w-100p uip-table">
            <thead>
              <tr class="">
                <th class="uip-padding-bottom-xxs"></th>
                <th class="uip-text-muted uip-text-weight-normal uip-text-right uip-padding-bottom-xxs">{{strings.sold}}</th>
                <th class="uip-text-right uip-text-muted uip-text-weight-normal uip-padding-bottom-xxs">{{strings.revenue}}</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="item in returnTableData">
                <td class="uip-text-bold uip-padding-bottom-xxs"><a class="uip-link-default uip-no-underline" :href="item.edit_url">{{item.name}}</a></td>
                <td class="uip-text-right uip-padding-bottom-xxs">{{item.total_sold}}</td>
                <td class="uip-text-right uip-padding-bottom-xxs">
                  <div class=" uip-background-orange-wash uip-border-round uip-padding-xxxs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label uip-inline-flex">
                    <span class="">{{returnSymbolTotal(item.total)}}</span>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="uip-flex uip-flex-row uip-flex-between">
          <div class="uip-text-s uip-text-muted uip-chart-label">{{chartData.labels.main[0]}}</div>
          <div class="uip-text-s uip-text-muted uip-chart-label">{{chartData.labels.main[chartData.labels.main.length - 1]}}</div>
        </div>
      </div>
    </div>
  </div>`},Ua={metadata:qa,component:Va},{__:b,_x:ao,_n:so,_nx:ro}=wp.i18n,Ba={name:b("Fathom charts","uipress-pro"),moduleName:"uip-fathom-analytics-chart",description:b("Outputs your choice of charts and options on what data to display from Fathom analytics","uipress-pro"),category:b("Analytics","uipress-pro"),group:"analytics",premium:!0,icon:"bar_chart",settings:{},optionsEnabled:[{name:"block",label:b("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"chartName",label:b("Chart title","uipress-pro"),value:{string:b("Analytics chart","uipress-pro")}},{option:"defaultSelect",componentName:"default-select",uniqueKey:"chartDataType",label:b("Chart metric","uipress-pro"),args:{options:[{value:"uniques",label:b("Users per day","uipress-pro")},{value:"visits",label:b("Visits per day","uipress-pro")},{value:"pageviews",label:b("Page views per day","uipress-pro")},{value:"bounce_rate",label:b("Bounce rate","uipress-pro")},{value:"avg_duration",label:b("Average duration","uipress-pro")}]},value:""},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"chartStyle",label:b("Chart type","uipress-pro"),args:{options:{line:{value:"line",label:b("Line","uipress-pro")},bar:{value:"bar",label:b("Bar","uipress-pro")}}},value:{value:"line"}},{option:"number",componentName:"uip-number",uniqueKey:"dateRange",label:b("Default date range (days)","uipress-pro"),value:14},{option:"color-select",componentName:"color-select",uniqueKey:"chartColour",label:b("Line colour","uipress-pro")},{option:"color-select",componentName:"color-select",uniqueKey:"chartCompColour",label:b("Comparison line colour","uipress-pro")},{option:"chartOptions",componentName:"uip-chart-options",uniqueKey:"chartOptions",label:b("Chart style","uipress-pro")},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"hideChart",label:b("Chart","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:b("Show","uipress-pro")},true:{value:!0,label:b("Hide","uipress-pro")}}}},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inlineAccountSwitch",label:b("Switch account option","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:b("Show","uipress-pro")},true:{value:!0,label:b("Hide","uipress-pro")}}}}]},{name:"container",label:b("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:b("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"title",label:b("Table title","uipress-pro"),icon:"title",styleType:"style",class:".uip-chart-title"},{name:"chartCanvas",label:b("Chart canvas","uipress-pro"),icon:"monitoring",styleType:"style",class:".uip-chart-canvas"},{name:"chartLabels",label:b("Chart labels","uipress-pro"),icon:"input",styleType:"style",class:".uip-chart-label"},{name:"percentChange",label:b("Percentage change","uipress-pro"),icon:"label",styleType:"style",class:".uip-tag-label"}]},{__:xe,_x:no,_n:oo,_nx:lo}=wp.i18n,at={inject:["uiTemplate"],props:{success:Function},data(){return{hover:!1,strings:{conntectAccount:xe("Connect fathom account","uipress-pro"),siteID:xe("Site id","uipress-pro"),authToken:xe("Auth token","uipress-pro"),connect:xe("Connect","uipress-pro")},data:{siteID:"",authToken:""}}},computed:{returnAccountOnUser(){return typeof this.uiTemplate.globalSettings.options>"u"?!1:this.hasNestedPath(this.uiTemplate,"globalSettings","options","analytics","saveAccountToUser")}},methods:{async uip_save_fathom(){if(!this.data.siteID||!this.data.authToken){this.uipApp.notifications.notify(xe("All fields are required","uipress-pro"),xe("Please fill in all fields to connect to fathom","uipress-pro"),"error",!0);return}let e=new FormData;e.append("action","uip_save_fathom_analytics"),e.append("security",uip_ajax.security),e.append("analytics",JSON.stringify(this.data)),e.append("saveAccountToUser",this.returnAccountOnUser);const t=await this.sendServerRequest(uip_ajax.ajax_url,e);if(t.error){this.uipApp.notifications.notify(xe("Unable to save account","uipress-pro"),t.message,"error",!0);return}this.success()}},template:d`
    <dropdown pos="bottom left">
      <template v-slot:trigger>
        <button class="uip-button-default">{{strings.connectAccount}}</button>
      </template>

      <template v-slot:content>
        <div class="uip-padding-s uip-flex uip-flex-column uip-gap-s uip-w-300">
          <div class="uip-grid-col-1-3">
            <div class="uip-text-muted uip-flex uip-flex-center">{{strings.siteID}}</div>
            <input class="uip-input uip-input-small" type="text" v-model="data.siteID" />

            <div class="uip-text-muted uip-flex uip-flex-center">{{strings.authToken}}</div>
            <input class="uip-input uip-input-small" type="password" placeholder="*************" v-model="data.authToken" />
          </div>

          <button class="uip-button-primary" @click="uip_save_fathom()">{{strings.connect}}</button>
        </div>
      </template>
    </dropdown>
  `},{__:Ke,_x:po,_n:uo,_nx:co}=wp.i18n,Ka={components:{ConnectFathom:at},props:{display:String,name:String,block:Object},data(){return{loading:!0,rendered:!0,error:!1,apiLoaded:!1,errorMessage:"",total:0,comparisonTotal:0,percentChange:0,fetchingQuery:!1,showFathomConnection:!1,requestFromGroupDate:!1,currentRequest:!1,groupDate:{},chartData:{data:{main:[],comparison:[]},labels:{main:[],comparison:[]},title:"",colors:{main:this.returnLineColor,comp:this.returnCompLineColor}},strings:{lastPeriod:Ke("last period","uipress-pro"),selectDataMetric:Ke("Please select a chart metric in this block's options to show chart data.","uipress-pro"),changeAccount:Ke("Switch account","uipress-pro")}}},inject:["uiTemplate"],watch:{"block.settings.block.options.chartDataType":{handler(e,t){this.processResponse()},deep:!0},"uipApp.fathomAnalytics.ready":{handler(e,t){e&&this.getAnalytics()},deep:!0,immediate:!0},"uiTemplate.globalSettings.options.analytics.saveAccountToUser":{handler(e,t){this.refreshAnalytics()}},returnRange:{handler(e,t){this.getAnalytics()}}},mounted(){document.addEventListener("uipress/app/daterange/change",this.handleDateChange)},beforeUnmount(){document.removeEventListener("uipress/app/daterange/change",this.handleDateChange)},computed:{returnChartSettings(){return this.get_block_option(this.block,"block","chartOptions")},returnTotal(){return this.total},returnComparisonTotal(){return this.comparisonTotal},returnChartData(){return this.chartData},returnName(){let e=this.get_block_option(this.block,"block","chartName",!0);return e?(e=this.isObject(e)?e.string:e,e):""},returnChartType(){return this.get_block_option(this.block,"block","chartDataType")},returnChartStyle(){let e=this.get_block_option(this.block,"block","chartStyle");return e?(e=this.isObject(e)?e.value:"line",e):"line"},returnLineColor(){let e=this.get_block_option(this.block,"block","chartColour");return e?(e=this.isObject(e)?e.value:e,e):""},returnCompLineColor(){let e=this.get_block_option(this.block,"block","chartCompColour");return e?(e=this.isObject(e)?e.value:e,e):""},hideChart(){let e=this.get_block_option(this.block,"block","hideChart");return e?(e=this.isObject(e)?e.value:e,e):""},inlineAccountSwitch(){let e=this.get_block_option(this.block,"block","inlineAccountSwitch");return e?(e=this.isObject(e)?e.value:e,e):!0},returnRange(){let e=this.get_block_option(this.block,"block","dateRange");return e?(e=isNaN(e)?14:e,e=e>60?60:e,e):14},hasGlobalDate(){return!!this.hasNestedPath(this.groupDate,"start")},isApiReady(){return this.hasNestedPath(this.uipApp,"fathomAnalytics","ready")}},methods:{handleDateChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.groupDate.start=e.detail.groupDate.start,this.groupDate.end=e.detail.groupDate.end,this.getAnalytics())},async getAnalytics(){if(this.resetErrorState(),this.apiLoaded=this.isApiReady,!this.apiLoaded)return;this.loading=!0;const{startDate:e,endDate:t}=this.calculateDateRange(),i=await this.fetchAnalyticsData(e,t);i.error?this.handleApiError(i):(this.currentRequest=i,this.processResponse(i)),this.loading=!1},resetErrorState(){this.error=!1,this.errorMessage="",this.showFathomConnection=!1},calculateDateRange(){let e,t;return this.hasGlobalDate?(e=new Date(Date.parse(this.groupDate.start)),t=new Date(Date.parse(this.groupDate.end))):(t=new Date,t.setDate(t.getDate()-1),e=new Date,e.setDate(e.getDate()-this.returnRange)),{startDate:e,endDate:t}},async fetchAnalyticsData(e,t){return await this.uipApp.fathomAnalytics.api("get",e,t)},handleApiError(e){this.error=!0,this.errorMessage=e.message,e.type==="no_account"&&(this.showFathomConnection=!0)},processResponse(){let e=this.currentRequest,t=[],i=[],a=this.returnChartType,s=[],r=[],n=0,o=0,p=0,m=0;for(let v of e.dates){let te=new Date(v).toLocaleDateString();t.push(te);let u=e.timeline_reports.find(K=>K.date===v);u?(s.push(u[a]),n+=parseInt(u[a]),p+=1):s.push("0")}for(let v of e.comparison_dates){let te=new Date(v).toLocaleDateString();i.push(te);let u=e.timeline_reports_comparison.find(K=>K.date===v);u?(r.push(u[a]),o+=parseInt(u[a]),m+=1):r.push("0")}this.returnChartSettings&&(this.chartData.custom=this.returnChartSettings),a=="bounce_rate"&&(n!==0&&p>0&&(n=(n/p*100).toFixed(2)),o!==0&&m>0&&(o=(o/m*100).toFixed(2))),a=="avg_duration"&&(n!==0&&p>0&&(n=(n/p).toFixed(2),this.total=new Date(n*1e3).toISOString().substring(14,19)),o!==0&&m>0&&(o=(o/m).toFixed(2),this.comparisonTotal=new Date(o*1e3).toISOString().substring(14,19))),this.chartData.colors.main=this.returnLineColor,this.chartData.colors.comp=this.returnCompLineColor,this.chartData.title=this.returnName,this.chartData.type=this.returnChartStyle,this.chartData.data.main=s,this.chartData.data.comparison=r,this.chartData.labels.main=t,this.chartData.labels.comparison=i,a!="avg_duration"&&(this.total=new Intl.NumberFormat(this.uipApp.data.options.locale).format(n),this.comparisonTotal=new Intl.NumberFormat(this.uipApp.data.options.locale).format(o)),a=="bounce_rate"&&(this.total=this.total+"%",this.comparisonTotal=this.comparisonTotal+"%"),n==0||o==0?this.percentChange=(n*100).toFixed(0):this.percentChange=(n/o*100).toFixed(0)},async removeAnalyticsAccount(){this.uipApp.fathomAnalytics.ready=!1,await this.uipApp.fathomAnalytics.api("removeAccount"),await this.uipApp.fathomAnalytics.api("refresh"),this.uipApp.fathomAnalytics.ready=!0,this.getAnalytics()},secondsToTime(e){if(isNaN(e)||e<0)return"0m 0s";const t=Math.floor(e/60).toString().padStart(2,"0"),i=(e%60).toString().padStart(2,"0");return`${t}m ${i}s`},async refreshAnalytics(){this.uipApp.fathomAnalytics.ready=!1,await this.uipApp.fathomAnalytics.api("refresh")&&(this.uipApp.fathomAnalytics.ready=!0,this.getAnalytics())},returnErrrorMessage(){try{JSON.parse(this.errorMessage)}catch{return this.errorMessage}if(this.isObject(JSON.parse(this.errorMessage))){let e=JSON.parse(this.errorMessage);return`
              <h5 style="margin:0">${e.status}</h5>
              <p style="margin-bottom:0;">${e.message}</p>
            `}return this.errorMessage}},template:d` <div class="uip-flex uip-flex-column uip-text-normal uip-w-200">
    <div class="uip-flex uip-flex-between">
      <div class="uip-margin-bottom-xxs uip-text-normal uip-chart-title">{{returnName}}</div>

      <dropdown pos="bottom right" v-if="!inlineAccountSwitch && !showFathomConnection">
        <template v-slot:trigger>
          <AppIcon icon="more_horiz" class="uip-link-muted uip-text-l" />
        </template>
        <template v-slot:content>
          <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-padding-xxxs uip-link-muted" @click="removeAnalyticsAccount()">
            <AppIcon icon="sync" />
            <div class="uip-padding-xxs">{{strings.changeAccount}}</div>
          </div>
        </template>
      </dropdown>
    </div>

    <div class="uip-margin-bottom-xxs"><ConnectFathom v-if="showFathomConnection" :success="refreshAnalytics" /></div>

    <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle uip-w-100p uip-ratio-16-10 uip-border-box"><loading-chart></loading-chart></div>

    <div
      v-else-if="error && errorMessage"
      class="uip-padding-xs uip-border-round uip-background-orange-wash uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-100p"
      v-html="returnErrrorMessage()"
    ></div>

    <div v-else-if="!returnChartType" class="uip-padding-xxs uip-border-round uip-background-green-wash uip-text-green uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-200">
      {{strings.selectDataMetric}}
    </div>

    <div v-else class="uip-flex uip-flex-column uip-row-gap-xs uip-w-100p">
      <div class="uip-flex uip-flex-between uip-gap-xxs uip-flex-center">
        <div class="uip-text-xl uip-text-bold">{{returnTotal}}</div>
        <div
          class="uip-text-s uip-background-orange-wash uip-border-round uip-padding-xxxs uip-padding-left-xs uip-padding-right-xs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label"
        >
          <AppIcon v-if="percentChange > 0" icon="arrow_upward" />
          <AppIcon v-if="percentChange < 0" icon="arrow_downward" />
          <span>{{percentChange}}%</span>
        </div>
      </div>
      <div class="uip-text-muted uip-margin-bottom-xs">vs. {{returnComparisonTotal}} {{strings.lastPeriod}}</div>
      <uip-chart v-if="!hideChart && rendered" :chartData="returnChartData" class="uip-chart-canvas" />
      <div class="uip-flex uip-flex-row uip-flex-between" v-if="!hideChart">
        <div class="uip-text-s uip-text-muted uip-chart-label">{{chartData.labels.main[0]}}</div>
        <div class="uip-text-s uip-text-muted uip-chart-label">{{chartData.labels.main[chartData.labels.main.length - 1]}}</div>
      </div>
    </div>
  </div>`},Ha={metadata:Ba,component:Ka},{__:A,_x:ho,_n:mo,_nx:go}=wp.i18n,Ga={name:A("Fathom map","uipress-pro"),moduleName:"uip-fathom-analytics-map",description:A("Outputs your fathom visitor data to a interactive map","uipress-pro"),category:A("Analytics","uipress-pro"),group:"analytics",premium:!0,path:uipProPath+"assets/js/uip/blocks/analytics/fathom-analytics-map.min.js",icon:"map",settings:{},optionsEnabled:[{name:"block",label:A("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"chartName",label:A("Chart title","uipress-pro"),value:{string:A("Analytics table","uipress-pro")}},{option:"defaultSelect",componentName:"default-select",uniqueKey:"chartDataType",label:A("Chart metric","uipress-pro"),args:{options:[{value:"country_reports",label:A("Visits by Country","uipress-pro")}]},value:""},{option:"number",componentName:"uip-number",uniqueKey:"dateRange",label:A("Default date range (days)","uipress-pro"),value:14},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"darkMode",label:A("Map style","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:A("Light","uipress-pro")},true:{value:!0,label:A("Dark","uipress-pro")}}}},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inlineAccountSwitch",label:A("Switch account option","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:A("Show","uipress-pro")},true:{value:!0,label:A("Hide","uipress-pro")}}}}]},{name:"container",label:A("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:A("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"title",label:A("Table title","uipress-pro"),icon:"title",styleType:"style",class:".uip-chart-title"},{name:"dates",label:A("Dates","uipress-pro"),icon:"date_range",styleType:"style",class:".uip-dates"},{name:"map",label:A("Map","uipress-pro"),icon:"map",styleType:"style",class:".uip-ga-map"}]},{__:ue,_x:fo,_n:bo,_nx:yo}=wp.i18n;let _e;const Ya={components:{ConnectFathom:at},props:{display:String,name:String,block:Object},data(){return{loading:!0,error:!1,map:!1,apiLoaded:!1,errorMessage:"",total:0,comparisonTotal:0,percentChange:0,fetchingQuery:!1,showFathomConnection:!1,requestFromGroupDate:!1,currentRequest:!1,startDate:"",endDate:"",currentData:[],groupDate:{},chartData:{data:{main:[],comparison:[]},labels:{main:[],comparisons:[]},title:"",colors:{main:this.returnLineColor,comp:this.returnCompLineColor}},strings:{lastPeriod:ue("last period","uipress-pro"),selectDataMetric:ue("Please select a chart metric in this block's options to show chart data.","uipress-pro"),changeAccount:ue("Switch account","uipress-pro"),count:ue("Count","uipress-pro"),change:ue("Change","uipress-pro"),current:ue("Current","uipress-pro"),previous:ue("Previous","uipress-pro"),users:ue("users","uipress-pro")}}},inject:["uiTemplate"],watch:{currentData:{handler(){this.buildMap()},immediate:!0,deep:!0},"block.settings.block.options.chartDataType":{handler(e,t){this.getAnalytics()},deep:!0},"uipApp.fathomAnalytics":{handler(e,t){e.ready&&this.getAnalytics()},deep:!0,immediate:!0},"uiTemplate.globalSettings.options.analytics.saveAccountToUser":{handler(e,t){this.refreshAnalytics()}}},mounted(){document.addEventListener("uipress/app/daterange/change",this.handleDateChange)},beforeUnmount(){document.removeEventListener("uipress/app/daterange/change",this.handleDateChange),this.map&&(this.map.remove(),this.map=!1)},computed:{returnTableData(){return this.currentData},returnMappCss(){return uipProPath+"assets/css/libs/mapbox.css"},returnTotal(){return this.total},returnComparisonTotal(){return this.comparisonTotal},returnChartData(){return this.chartData},returnName(){let e=this.get_block_option(this.block,"block","chartName",!0);return e?(e=this.isObject(e)?e.string:e,e):""},returnChartType(){return this.get_block_option(this.block,"block","chartDataType")},returnChartSettings(){return this.get_block_option(this.block,"block","chartOptions")},returnChartStyle(){let e=this.get_block_option(this.block,"block","chartStyle");return e?(e=this.isObject(e)?e.value:"line",e):"line"},returnLineColor(){let e=this.get_block_option(this.block,"block","chartColour");return e?(e=this.isObject(e)?e.value:e,e):""},returnCompLineColor(){let e=this.get_block_option(this.block,"block","chartCompColour");return e?(e=this.isObject(e)?e.value:e,e):""},hideChart(){let e=this.get_block_option(this.block,"block","hideChart");return e?(e=this.isObject(e)?e.value:e,e):""},inlineAccountSwitch(){let e=this.get_block_option(this.block,"block","inlineAccountSwitch");return e?(e=this.isObject(e)?e.value:e,e):!0},returnRange(){let e=this.get_block_option(this.block,"block","dateRange");return e?(e=isNaN(e)?14:e,e=e>60?60:e,e):14},hasGlobalDate(){return!!this.hasNestedPath(this.groupDate,"start")},isApiReady(){return this.hasNestedPath(this.uipApp,"fathomAnalytics","ready")},darkMapTheme(){let e=this.get_block_option(this.block,"block","darkMode");return e?(e=this.isObject(e)?e.value:!1,e):!1}},methods:{handleDateChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.groupDate.start=e.detail.groupDate.start,this.groupDate.end=e.detail.groupDate.end,this.getAnalytics())},async getAnalytics(){if(this.resetErrorState(),this.apiLoaded=this.isApiReady,!this.apiLoaded)return;this.loading=!0;const{startDate:e,endDate:t}=this.calculateDateRange(),i=await this.fetchAnalyticsData(e,t);i.error?this.handleApiError(i):(this.currentRequest=i,this.processResponse(i)),this.loading=!1},resetErrorState(){this.error=!1,this.errorMessage="",this.showFathomConnection=!1},calculateDateRange(){let e,t;return this.hasGlobalDate?(e=new Date(Date.parse(this.groupDate.start)),t=new Date(Date.parse(this.groupDate.end))):(t=new Date,t.setDate(t.getDate()-1),e=new Date,e.setDate(e.getDate()-this.returnRange)),this.startDate=e,this.endDate=t,{startDate:e,endDate:t}},async fetchAnalyticsData(e,t){return await this.uipApp.fathomAnalytics.api("get",e,t)},handleApiError(e){this.error=!0,this.errorMessage=e.message,e.type==="no_account"&&(this.showFathomConnection=!0)},processResponse(){let e=this.currentRequest;if(!this.returnChartType)return;let i=[],a=0;for(let s of e.country_reports)a+=parseInt(s.visits);for(let s of e.country_reports)s.name=s.country_code,s.value=s.visits,s.percent_total=(s.value/a*100).toFixed(2),i.push(s);this.currentData=i},async removeAnalyticsAccount(){this.uipApp.fathomAnalytics.ready=!1,await this.uipApp.fathomAnalytics.api("removeAccount"),await this.uipApp.fathomAnalytics.api("refresh"),this.uipApp.fathomAnalytics.ready=!0,this.getAnalytics()},async refreshAnalytics(){this.uipApp.fathomAnalytics.ready=!1,await this.uipApp.fathomAnalytics.api("refresh")&&(this.uipApp.fathomAnalytics.ready=!0,this.getAnalytics())},returnFormattedDate(e){if(!e)return"";const t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}/${i}/${a}`},returnErrrorMessage(){try{JSON.parse(this.errorMessage)}catch{return this.errorMessage}if(this.isObject(JSON.parse(this.errorMessage))){let e=JSON.parse(this.errorMessage);return`
              <h5 style="margin:0">${e.status}</h5>
              <p style="margin-bottom:0;">${e.message}</p>
            `}return this.errorMessage},async buildMap(){_e||(_e=(await Ie(()=>import("./assets/mapbox-gl-wnhiI-k1.js").then(s=>s.m),__vite__mapDeps([0,1]))).default,_e.accessToken="pk.eyJ1IjoibWFya2FzaHRvbiIsImEiOiJjbGRrZGYyc2IwamRuM3ZsZ2JudXdwMjRtIn0.V_oXBXMGBUBty-fZY0VXfg"),await this.$nextTick(),this.map&&(this.map.remove(),this.map=!1);let e="mapbox://styles/markashton/cldkdgzpx008t01rvfdmhtwet";if((this.darkMapTheme||this.uipApp.data.userPrefs.darkTheme)&&(e="mapbox://styles/markashton/cldklav6v009701rv47a1q7pa"),!this.$refs.mapcontainer)return;const t=new _e.Map({container:"uip-fathom-map",style:e,zoom:1,center:[-10,14]});this.map=t,t.addControl(new _e.NavigationControl);let i=Fe;for(const a of this.returnTableData){let s=i.find(n=>n.alpha2.toLowerCase()===a.name.toLowerCase());if(typeof s>"u")continue;const r=this.createToolTip(a);new _e.Marker(r.el).setLngLat([s.longitude,s.latitude]).setPopup(new _e.Popup({offset:25}).setHTML(r.inner)).addTo(t)}},createToolTip(e){const t=document.createElement("div");t.className="marker uip-w-10 uip-ratio-1-1 uip-background-primary-wash uip-border-circle uip-border-primary";let i=e.percent_total*3;t.style.width=i+"px";let a=`
          <div class="uip-background-default uip-boder uip-shadow uip-border-rounder uip-overflow-hidden uip-text-normal">
            <div class="uip-background-default">
              <div class="uip-padding-xs uip-padding-top-xxs uip-padding-bottom-xxs uip-border-bottom uip-body-font uip-text-left uip-overflow-hidden uip-flex uip-flex-row uip-gap-xs uip-flex-between uip-flex-center">
              
                <div class="uip-text-bold uip-text-emphasis">
                  ${e.name}
                </div>
                
              </div>
              
              <div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-xxs">
                <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-between uip-w-125">
                  <div class="uip-text-bold uip-text-primary" >${e.value+" "+this.strings.visits}</div>
                  <div class="uip-text-s uip-text-muted">${this.strings.current}</div>
                </div>
              </div>
            </div>
          </div>`;return{el:t,inner:a}}},template:d` <div class="uip-flex uip-flex-column uip-w-300">
    <component is="style">
      @import '{{returnMappCss}}'; .mapboxgl-ctrl-bottom-left, .mapboxgl-ctrl-bottom-right{ display:none; } .marker { border-radius: 50%; cursor: pointer; animation: pulse-outline 2.5s
      cubic-bezier(0.455, 0.03, 0.515, 0.955) -.4s infinite; transition: outline 5s ease, opacity .2s ease; } @keyframes pulse-outline { 0% { outline: 0px solid var(--uip-color-primary-lighter); }
      100% { outline: 12px solid transparent; } } .mapboxgl-popup { max-width: 200px; } .mapboxgl-popup-content { padding:0; box-shadow:none; border-radius:4px; } .mapboxgl-popup-close-button {
      top:5px; display:none; } .uip-dark-mode .mapboxgl-ctrl-top-right{ filter: invert(1); } .mapboxgl-popup-anchor-top .mapboxgl-popup-tip{ border-bottom-color: var(--uip-color-base-0); }
      .mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{ border-top-color: var(--uip-color-base-0); } .mapboxgl-popup-anchor-left .mapboxgl-popup-tip{ border-right-color: var(--uip-color-base-0); }
      .mapboxgl-popup-anchor-right .mapboxgl-popup-tip{ border-left-color: var(--uip-color-base-0); } .mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{ border-bottom-color: var(--uip-color-base-0);
      } .mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{ border-bottom-color: var(--uip-color-base-0); } .mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{ border-top-color:
      var(--uip-color-base-0); } .mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{ border-top-color: var(--uip-color-base-0); }
    </component>

    <!-- Header -->
    <div class="uip-flex uip-flex-between">
      <!--Chart title-->
      <div class="uip-margin-bottom-xxs uip-text-normal uip-chart-title">{{returnName}}</div>

      <!-- Account switcher-->
      <dropdown pos="bottom right" v-if="!inlineAccountSwitch && !showFathomConnection">
        <template v-slot:trigger>
          <AppIcon icon="more_horiz" class="uip-link-muted uip-text-l" />
        </template>
        <template v-slot:content>
          <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-padding-xxxs uip-link-muted" @click="removeAnalyticsAccount()">
            <AppIcon icon="sync" />
            <div class="uip-padding-xxs">{{strings.changeAccount}}</div>
          </div>
        </template>
      </dropdown>
    </div>

    <div class="uip-text-s uip-text-muted uip-margin-bottom-s uip-margin-bottom-s uip-dates">{{returnFormattedDate(startDate)}} - {{returnFormattedDate(endDate)}}</div>

    <div class="uip-margin-bottom-xxs" v-if="showFathomConnection"><ConnectFathom :success="refreshAnalytics" /></div>

    <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle  uip-w-100p uip-ratio-16-10 uip-border-box"><loading-chart></loading-chart></div>

    <div
      v-else-if="error && errorMessage"
      class="uip-padding-xs uip-border-round uip-background-orange-wash uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-100p"
      v-html="returnErrrorMessage()"
    ></div>

    <div v-else-if="!returnChartType" class="uip-padding-xxs uip-border-round uip-background-green-wash uip-text-green uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-200">
      {{strings.selectDataMetric}}
    </div>

    <div v-else class="uip-position-relative uip-h-100p uip-w-100p" :class="{'uip-dark-mode' : darkMapTheme || uipApp.data.userPrefs.darkTheme}">
      <div ref="mapcontainer" id="uip-fathom-map" class="uip-fathom-map uip-w-100p uip-h-200"></div>
    </div>
  </div>`},Ja={metadata:Ga,component:Ya},{__:G,_x:vo,_n:xo,_nx:_o}=wp.i18n,za={name:G("Fathom realtime","uipress-pro"),moduleName:"uip-fathom-analytics-realtime",description:G("Outputs realtime site visitor data from Fathom analytics","uipress-pro"),category:G("Analytics","uipress-pro"),group:"analytics",premium:!0,path:uipProPath+"assets/js/uip/blocks/analytics/fathom-analytics-realtime.min.js",icon:"schedule",settings:{},optionsEnabled:[{name:"block",label:G("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"chartName",label:G("Chart title","uipress-pro"),value:{string:G("Active now","uipress-pro")}},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inlineAccountSwitch",label:G("Switch account option","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:G("Show","uipress-pro")},true:{value:!0,label:G("Hide","uipress-pro")}}}}]},{name:"container",label:G("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:G("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"title",label:G("Table title","uipress-pro"),icon:"title",styleType:"style",class:".uip-chart-title"}]},{__:Re,_x:wo,_n:ko,_nx:Do}=wp.i18n,Wa={components:{ConnectFathom:at},props:{display:String,name:String,block:Object},data(){return{loading:!0,rendered:!0,error:!1,apiLoaded:!1,errorMessage:"",total:0,comparisonTotal:0,percentChange:0,fetchingQuery:!1,showFathomConnection:!1,requestFromGroupDate:!1,currentRequest:!1,groupDate:{},chartData:{data:{main:[],comparison:[]},labels:{main:[],comparison:[]},title:"",colors:{main:this.returnLineColor,comp:this.returnCompLineColor}},strings:{lastPeriod:Re("last period","uipress-pro"),selectDataMetric:Re("Please select a chart metric in this block's options to show chart data.","uipress-pro"),changeAccount:Re("Switch account","uipress-pro"),usersActive:Re("Users active","uipress-lite"),page:Re("Page","uipress-lite"),active:Re("Active","uipress-lite")}}},inject:["uiTemplate"],watch:{"block.settings.block.options.chartDataType":{handler(e,t){this.processResponse()},deep:!0},"uipApp.fathomAnalytics.ready":{handler(e,t){this.getAnalytics()},deep:!0},"uiTemplate.globalSettings.options.analytics.saveAccountToUser":{handler(e,t){this.refreshAnalytics()}},returnRange:{handler(e,t){this.getAnalytics()}}},mounted(){document.addEventListener("uipress/app/daterange/change",this.handleDateChange)},beforeUnmount(){document.removeEventListener("uipress/app/daterange/change",this.handleDateChange)},computed:{returnChartSettings(){return this.get_block_option(this.block,"block","chartOptions")},returnTotal(){return this.total},returnComparisonTotal(){return this.comparisonTotal},returnChartData(){return this.chartData},returnName(){let e=this.get_block_option(this.block,"block","chartName",!0);return e?(e=this.isObject(e)?e.string:e,e):""},hideChart(){let e=this.get_block_option(this.block,"block","hideChart");return e?(e=this.isObject(e)?e.value:e,e):""},inlineAccountSwitch(){let e=this.get_block_option(this.block,"block","inlineAccountSwitch");return e?(e=this.isObject(e)?e.value:e,e):!0},returnRange(){let e=this.get_block_option(this.block,"block","dateRange");return e?(e=isNaN(e)?14:e,e=e>60?60:e,e):14},hasGlobalDate(){return!!this.hasNestedPath(this.groupDate,"start")},isApiReady(){return this.hasNestedPath(this.uipApp,"fathomAnalytics","ready")}},methods:{handleDateChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.groupDate.start=e.detail.groupDate.start,this.groupDate.end=e.detail.groupDate.end,this.getAnalytics())},async getAnalytics(){if(this.resetErrorState(),this.apiLoaded=this.isApiReady,!this.apiLoaded)return;this.loading=!0;const{startDate:e,endDate:t}=this.calculateDateRange(),i=await this.fetchAnalyticsData(e,t);i.error?this.handleApiError(i):(this.currentRequest=i,this.processResponse(i)),this.loading=!1},resetErrorState(){this.error=!1,this.errorMessage="",this.showFathomConnection=!1},calculateDateRange(){let e,t;return this.hasGlobalDate?(e=new Date(Date.parse(this.groupDate.start)),t=new Date(Date.parse(this.groupDate.end))):(t=new Date,t.setDate(t.getDate()-1),e=new Date,e.setDate(e.getDate()-this.returnRange)),{startDate:e,endDate:t}},async fetchAnalyticsData(e,t){return await this.uipApp.fathomAnalytics.api("get",e,t)},handleApiError(e){this.error=!0,this.errorMessage=e.message,e.type==="no_account"&&(this.showFathomConnection=!0)},processResponse(){let e=this.currentRequest;this.total=e.realtime.total,this.tableData=e.realtime.content,console.log(this.tableData)},async removeAnalyticsAccount(){this.uipApp.fathomAnalytics.ready=!1,await this.uipApp.fathomAnalytics.api("removeAccount"),await this.uipApp.fathomAnalytics.api("refresh"),this.uipApp.fathomAnalytics.ready=!0,this.getAnalytics()},secondsToTime(e){if(isNaN(e)||e<0)return"0m 0s";const t=Math.floor(e/60).toString().padStart(2,"0"),i=(e%60).toString().padStart(2,"0");return`${t}m ${i}s`},async refreshAnalytics(){this.uipApp.fathomAnalytics.ready=!1,await this.uipApp.fathomAnalytics.api("refresh")&&(this.uipApp.fathomAnalytics.ready=!0,this.getAnalytics())},returnErrrorMessage(){try{JSON.parse(this.errorMessage)}catch{return this.errorMessage}if(this.isObject(JSON.parse(this.errorMessage))){let e=JSON.parse(this.errorMessage);return`
              <h5 style="margin:0">${e.status}</h5>
              <p style="margin-bottom:0;">${e.message}</p>
            `}return this.errorMessage}},template:d` <div class="uip-flex uip-flex-column uip-text-normal uip-w-200">
    <div class="uip-flex uip-flex-between">
      <div class="uip-margin-bottom-xxs uip-text-normal uip-chart-title">{{returnName}}</div>

      <dropdown pos="bottom right" v-if="!inlineAccountSwitch && !showFathomConnection">
        <template v-slot:trigger>
          <AppIcon icon="more_horiz" class=" uip-link-muted uip-text-l" />
        </template>
        <template v-slot:content>
          <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-padding-xxxs uip-link-muted" @click="removeAnalyticsAccount()">
            <AppIcon icon="sync" />
            <div class="uip-padding-xxs">{{strings.changeAccount}}</div>
          </div>
        </template>
      </dropdown>
    </div>

    <div class="uip-margin-bottom-xxs"><ConnectFathom v-if="showFathomConnection" :success="refreshAnalytics" /></div>

    <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle uip-w-100p uip-ratio-16-10 uip-border-box"><loading-chart></loading-chart></div>

    <div
      v-else-if="error && errorMessage"
      class="uip-padding-xs uip-border-round uip-background-orange-wash uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-100p"
      v-html="returnErrrorMessage()"
    ></div>

    <div v-else class="uip-flex uip-flex-column uip-row-gap-xs uip-w-100p">
      <div class="uip-flex uip-flex-between uip-gap-xxs uip-flex-center">
        <div class="uip-text-xl uip-text-bold">{{returnTotal}}</div>
      </div>

      <table class="uip-w-100p uip-table">
        <thead>
          <tr class="">
            <th class="uip-text-muted uip-text-weight-normal uip-padding-bottom-xxs uip-text-left">{{strings.page}}</th>
            <th class="uip-text-right uip-text-muted uip-text-weight-normal uip-padding-bottom-xxs">{{strings.active}}</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="item in tableData">
            <td class="uip-text-bold uip-padding-bottom-xxs">
              <a :href="item.hostname + item.pathname" target="_BLANK" class="uip-link-default uip-no-underline">{{item.pathname}}</a>
            </td>
            <td class="uip-text-right uip-padding-bottom-xxs">{{item.total}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>`},Qa={metadata:za,component:Wa},{__:g,_x:Ao,_n:Co,_nx:So}=wp.i18n,Za={name:g("GA charts","uipress-pro"),moduleName:"uip-google-analytics",description:g("Outputs your choice of charts and options on what data to display","uipress-pro"),category:g("Analytics","uipress-pro"),group:"analytics",premium:!0,path:uipProPath+"assets/js/uip/blocks/analytics/google-analytics-charts.min.js",icon:"bar_chart",settings:{},optionsEnabled:[{name:"block",label:g("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"chartName",label:g("Chart title","uipress-pro"),value:{string:g("Analytics chart","uipress-pro")}},{option:"defaultSelect",componentName:"default-select",uniqueKey:"chartDataType",label:g("Chart metric","uipress-pro"),args:{options:[{value:"totalUsers",label:g("Users","uipress-pro")},{value:"totalRevenue",label:g("Revenue","uipress-pro")},{value:"sessions",label:g("Sessions","uipress-pro")},{value:"screenPageViews",label:g("Page views","uipress-pro")},{value:"purchaserConversionRate",label:g("Conversion rate","uipress-pro")},{value:"engagementRate",label:g("Engagement rate","uipress-pro")},{value:"ecommercePurchases",label:g("Purchases","uipress-pro")},{value:"checkouts",label:g("Checkouts","uipress-pro")},{value:"addToCarts",label:g("Add to carts","uipress-pro")},{value:"userEngagementDuration",label:g("Average engagement time","uipress-pro")}]},value:""},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"chartStyle",label:g("Chart type","uipress-pro"),args:{options:{line:{value:"line",label:g("Line","uipress-pro")},bar:{value:"bar",label:g("Bar","uipress-pro")}}},value:{value:"line"}},{option:"number",componentName:"uip-number",uniqueKey:"dateRange",label:g("Default date range (days)","uipress-pro"),value:14},{option:"color-select",componentName:"color-select",uniqueKey:"chartColour",label:g("Line colour","uipress-pro")},{option:"color-select",componentName:"color-select",uniqueKey:"chartCompColour",label:g("Comparison line colour","uipress-pro")},{option:"chartOptions",componentName:"uip-chart-options",uniqueKey:"chartOptions",label:g("Chart style","uipress-pro")},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"hideChart",label:g("Chart","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:g("Show","uipress-pro")},true:{value:!0,label:g("Hide","uipress-pro")}}}},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inlineAccountSwitch",label:g("Switch account option","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:g("Show","uipress-pro")},true:{value:!0,label:g("Hide","uipress-pro")}}}}]},{name:"style",label:g("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"title",label:g("Table title","uipress-pro"),icon:"title",styleType:"style",class:".uip-chart-title"},{name:"chartTotals",label:g("Chart totals","uipress-pro"),icon:"percent",styleType:"style",class:".uip-chart-totals"},{name:"chartCanvas",label:g("Chart canvas","uipress-pro"),icon:"monitoring",styleType:"style",class:".uip-chart-canvas"},{name:"chartLabels",label:g("Chart labels","uipress-pro"),icon:"input",styleType:"style",class:".uip-chart-label"},{name:"percentChange",label:g("Percentage change","uipress-pro"),icon:"label",styleType:"style",class:".uip-tag-label"}]},{__:He,_x:To,_n:Ro,_nx:Po}=wp.i18n,je={inject:["uiTemplate"],props:{success:Function},data(){return{googliconNoHover:uipProPath+"assets/img/ga_btn_light.png",googliconHover:uipProPath+"assets/img/ga_btn_dark.png",hover:!1,analyticsWindow:null}},computed:{returnHoverImg(){return this.googliconHover},returnNoHoverImg(){return this.googliconNoHover},returnAccountOnUser(){return typeof this.uiTemplate.globalSettings.options>"u"?!1:this.hasNestedPath(this.uiTemplate,"globalSettings","options","analytics","saveAccountToUser")},returnStyle(){return this.hover?"opacity:1":"opacity:0"}},methods:{gauthWindow(){const e=this.buildOAuthUrl(),{x:t,y:i}=this.calculateWindowPosition(450,600),a=window.open(e,"name",`height=600,width=450,top=${i},left=${t}`);window.focus&&a.focus();const s=r=>{if(!(r.origin!=="https://analytics.uipress.co"||!r.data))try{const n=JSON.parse(r.data);n.code&&n.view&&(a.close(),this.uip_save_analytics(n),window.removeEventListener("message",s))}catch(n){console.error("Error processing the message event:",n)}};window.addEventListener("message",s)},buildOAuthUrl(){return"https://accounts.google.com/o/oauth2/auth/oauthchooseaccount?response_type=code&client_id=285756954789-dp7lc40aqvjpa4jcqnfihcke3o43hmt1.apps.googleusercontent.com&redirect_uri=https://analytics.uipress.co&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.readonly&access_type=offline&approval_prompt=force&flowName=GeneralOAuthFlow"},calculateWindowPosition(e,t){return{x:window.outerWidth/2+window.screenX-e/2,y:window.outerHeight/2+window.screenY-t/2}},handleWindowMessage(e){if(!(e.origin!="https://analytics.uipress.co"||!e.data))try{const t=JSON.parse(e.data);t.code&&t.view&&(this.analyticsWindow.close(),this.uip_save_analytics(t))}catch(t){console.log(t)}},async uip_save_analytics(e){if(!("view"in e)||!("code"in e)){this.uipApp.notifications.notify(He("Connection failed","uipress-pro"),He("Incorrect credentials returned from account. Please try again","uipress-pro"),"error",!0);return}let t=new FormData;t.append("action","uip_save_google_analytics"),t.append("security",uip_ajax.security),t.append("analytics",JSON.stringify(e)),t.append("saveAccountToUser",this.returnAccountOnUser);const i=await this.sendServerRequest(uip_ajax.ajax_url,t);if(i.error){this.uipApp.notifications.notify(He("Unable to save account","uipress-pro"),i.message,"error",!0);return}this.success()}},template:d` <a @mouseenter="hover = true" @mouseleave="hover = false" class="uip-position-relative uip-cursor-pointer" @click="gauthWindow()" style="width:120px;height:26px">
    <img width="120" :src="returnNoHoverImg" />
    <img width="120" class="uip-position-absolute uip-left-0" :style="returnStyle" :src="returnHoverImg" />
  </a>`},{__:Ge,_x:Mo,_n:No,_nx:Lo}=wp.i18n,Xa={components:{ConnectGoogle:je},props:{display:String,name:String,block:Object},data(){return{loading:!0,rendered:!0,error:!1,apiLoaded:!1,errorMessage:"",total:0,comparisonTotal:0,percentChange:0,fetchingQuery:!1,showGoogleConnection:!1,requestFromGroupDate:!1,currentRequest:!1,groupDate:{},chartData:{data:{main:[],comparison:[]},labels:{main:[],comparisons:[]},title:"",colors:{main:this.returnLineColor,comp:this.returnCompLineColor}},strings:{lastPeriod:Ge("last period","uipress-pro"),selectDataMetric:Ge("Please select a chart metric in this block's options to show chart data.","uipress-pro"),changeAccount:Ge("Switch account","uipress-pro")}}},inject:["uiTemplate"],watch:{"block.settings.block.options.chartDataType":{handler(e,t){this.getAnalytics()},deep:!0},returnChartSettings:{handler(e,t){this.getAnalytics()},deep:!0},"uipApp.googleAnalytics":{handler(e,t){e&&e.ready&&this.getAnalytics()},deep:!0,immediate:!0},"uiTemplate.globalSettings.options.analytics.saveAccountToUser":{handler(e,t){this.refreshAnalytics()}}},mounted(){document.addEventListener("uipress/app/daterange/change",this.handleDateChange)},beforeUnmount(){document.removeEventListener("uipress/app/daterange/change",this.handleDateChange)},computed:{returnTotal(){return this.total},returnComparisonTotal(){return this.comparisonTotal},returnChartData(){return this.chartData},returnName(){let e=this.get_block_option(this.block,"block","chartName",!0);return e?(e=this.isObject(e)?e.string:e,e):""},returnChartType(){return this.get_block_option(this.block,"block","chartDataType")},returnChartSettings(){return this.get_block_option(this.block,"block","chartOptions")},returnChartStyle(){let e=this.get_block_option(this.block,"block","chartStyle");return e?(e=this.isObject(e)?e.value:"line",e):"line"},returnLineColor(){let e=this.get_block_option(this.block,"block","chartColour");return e?(e=this.isObject(e)?e.value:e,e):""},returnCompLineColor(){let e=this.get_block_option(this.block,"block","chartCompColour");return e?(e=this.isObject(e)?e.value:e,e):""},hideChart(){let e=this.get_block_option(this.block,"block","hideChart");return e?(e=this.isObject(e)?e.value:e,e):""},inlineAccountSwitch(){let e=this.get_block_option(this.block,"block","inlineAccountSwitch");return e?(e=this.isObject(e)?e.value:e,e):!0},returnRange(){let e=this.get_block_option(this.block,"block","dateRange");return e?(e=isNaN(e)?14:e,e=e>60?60:e,e):14},hasGlobalDate(){return!!this.hasNestedPath(this.groupDate,"start")},isApiReady(){return this.hasNestedPath(this.uipApp,"googleAnalytics","ready")}},methods:{handleDateChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.groupDate.start=e.detail.groupDate.start,this.groupDate.end=e.detail.groupDate.end,this.getAnalytics())},async getAnalytics(){if(this.resetErrorState(),this.apiLoaded=this.isApiReady,!this.apiLoaded)return;this.loading=!0;const{startDate:e,endDate:t}=this.calculateDateRange(),i=await this.fetchAnalyticsData(e,t);i.error?this.handleApiError(i):(this.currentRequest=i,this.processResponse(i)),this.loading=!1},resetErrorState(){this.error=!1,this.errorMessage="",this.showGoogleConnection=!1},calculateDateRange(){let e,t;return this.hasGlobalDate?(e=new Date(Date.parse(this.groupDate.start)),t=new Date(Date.parse(this.groupDate.end))):(t=new Date,t.setDate(t.getDate()-1),e=new Date,e.setDate(e.getDate()-this.returnRange)),{startDate:e,endDate:t}},async fetchAnalyticsData(e,t){return await this.uipApp.googleAnalytics.api("get",e,t)},handleApiError(e){this.error=!0,this.errorMessage=e.message,e.type==="no_account"&&(this.showGoogleConnection=!0)},processResponse(){const e=this.currentRequest,t=this.returnChartType,{chartData:i,chartComparisonData:a}=this.extractAndProcessChartData(e,t);this.setChartDataAndLabels(e,i,a,t),this.setTotalsAndPercentageChange(e,t),this.formatTotals(t,e)},extractAndProcessChartData(e,t){let i=[],a=[];for(let[s,r]of e.timeline.report.data.entries())i.push(this.calculateActualValue(r,t)),a.push(this.calculateComparisonValue(e,s,t));return{chartData:i,chartComparisonData:a}},calculateActualValue(e,t){return t==="userEngagementDuration"?this.calculateEngagementDuration(e[t],e.totalUsers):e[t]},calculateComparisonValue(e,t,i){const a=e.timeline.report_comparison.data[t];return a&&i in a?i==="userEngagementDuration"?this.calculateEngagementDuration(a[i],a.totalUsers):a[i]:"0"},calculateEngagementDuration(e,t){return e!==0||t!==0?(e/t).toFixed(2):0},setChartDataAndLabels(e,t,i,a){this.chartData.colors.main=this.returnLineColor,this.chartData.colors.comp=this.returnCompLineColor,this.chartData.title=this.returnName,this.chartData.type=this.returnChartStyle,this.chartData.data.main=t,this.chartData.data.comparison=i,this.chartData.labels.main=e.timeline.report.dates,this.chartData.labels.comparison=e.timeline.report_comparison.dates,this.chartData.custom=this.returnChartSettings},setTotalsAndPercentageChange(e,t){this.total=e.timeline.report.totals[t],this.percentChange=e.timeline.report.totals_change[t],t in e.timeline.report_comparison.totals?this.comparisonTotal=e.timeline.report_comparison.totals[t]:this.comparisonTotal="NA"},formatTotals(e,t){this.total!==""&&(this.total=new Intl.NumberFormat(this.uipApp.data.options.locale).format(this.total)),this.comparisonTotal!==""&&this.comparisonTotal!=="NA"&&(this.comparisonTotal=new Intl.NumberFormat(this.uipApp.data.options.locale).format(this.comparisonTotal)),e==="engagementRate"?(this.total=(this.total/t.timeline.report.dates.length).toFixed(2)+"%",this.comparisonTotal=(this.comparisonTotal/t.timeline.report_comparison.dates.length).toFixed(2)+"%"):e==="purchaserConversionRate"?(this.total+="%",this.comparisonTotal+="%"):e==="userEngagementDuration"&&(this.total=this.secondsToTime(t.timeline.report.totals[e]/t.timeline.report.totals.totalUsers),this.comparisonTotal=this.secondsToTime(t.timeline.report_comparison.totals[e]/t.timeline.report_comparison.totals.totalUsers))},async removeAnalyticsAccount(){this.uipApp.googleAnalytics.ready=!1,await this.uipApp.googleAnalytics.api("removeAccount"),await this.uipApp.googleAnalytics.api("refresh"),this.uipApp.googleAnalytics.ready=!0,this.getAnalytics()},secondsToTime(e){if(isNaN(e)||e<0)return"0m 0s";const t=Math.floor(e/60).toString().padStart(2,"0"),i=parseFloat((e%60).toFixed(2)).toString().padStart(2,"0");return`${t}m ${i}s`},async refreshAnalytics(){this.uipApp.googleAnalytics.ready=!1,await this.uipApp.googleAnalytics.api("refresh")&&(this.uipApp.googleAnalytics.ready=!0,this.getAnalytics())},returnErrrorMessage(){try{JSON.parse(this.errorMessage)}catch{return this.errorMessage}if(this.isObject(JSON.parse(this.errorMessage))){let e=JSON.parse(this.errorMessage);return`
              <h5 style="margin:0">${e.status}</h5>
              <p style="margin-bottom:0;">${e.message}</p>
            `}return this.errorMessage}},template:d` <div class="uip-flex uip-flex-column uip-text-normal uip-w-200">
    <!-- Header -->
    <div class="uip-flex uip-flex-between">
      <!--Chart title-->
      <div class="uip-margin-bottom-xxs uip-text-normal uip-chart-title">{{returnName}}</div>

      <!-- Account switcher-->
      <dropdown pos="bottom right" v-if="!inlineAccountSwitch && !showGoogleConnection">
        <template v-slot:trigger>
          <AppIcon icon="more_horiz" class="uip-link-muted uip-text-l" />
        </template>
        <template v-slot:content>
          <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-padding-xxxs uip-link-muted" @click="removeAnalyticsAccount()">
            <AppIcon icon="sync" />
            <div class="uip-padding-xxs">{{strings.changeAccount}}</div>
          </div>
        </template>
      </dropdown>
    </div>

    <div class="uip-margin-bottom-xxs"><ConnectGoogle v-if="showGoogleConnection" :success="refreshAnalytics" /></div>

    <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle uip-w-100p uip-ratio-16-10 uip-border-box"><loading-chart></loading-chart></div>

    <div
      v-else-if="error && errorMessage"
      class="uip-padding-xs uip-border-round uip-background-orange-wash uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-100p"
      v-html="returnErrrorMessage()"
    ></div>

    <div v-else-if="!returnChartType" class="uip-padding-xxs uip-border-round uip-background-green-wash uip-text-green uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-200">
      {{strings.selectDataMetric}}
    </div>

    <!--Chart data-->
    <div v-else class="uip-flex uip-flex-column uip-row-gap-xs uip-w-100p">
      <div class="uip-flex uip-flex-column uip-row-gap-xs uip-chart-totals">
        <div class="uip-flex uip-flex-between uip-gap-xxs uip-flex-center">
          <div class="uip-text-xl uip-text-bold">{{returnTotal}}</div>
          <div
            class="uip-text-s uip-background-orange-wash uip-border-round uip-padding-xxxs uip-padding-left-xs uip-padding-right-xs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label"
          >
            <AppIcon v-if="percentChange > 0" icon="arrow_upward" />
            <AppIcon v-if="percentChange < 0" icon="arrow_downward" />
            <span>{{percentChange}}%</span>
          </div>
        </div>

        <div class="uip-text-muted uip-margin-bottom-xs">vs. {{returnComparisonTotal}} {{strings.lastPeriod}}</div>
      </div>

      <uip-chart v-if="!hideChart && rendered" :chartData="returnChartData" class="uip-chart-canvas" />

      <div class="uip-flex uip-flex-row uip-flex-between" v-if="!hideChart">
        <div class="uip-text-s uip-text-muted uip-chart-label">{{chartData.labels.main[0]}}</div>
        <div class="uip-text-s uip-text-muted uip-chart-label">{{chartData.labels.main[chartData.labels.main.length - 1]}}</div>
      </div>
    </div>
  </div>`},es={metadata:Za,component:Xa},{__:C,_x:$o,_n:Eo,_nx:Oo}=wp.i18n,ts={name:C("GA map","uipress-pro"),moduleName:"uip-google-analytics-map",description:C("Outputs your visitor data to a interactive map","uipress-pro"),category:C("Analytics","uipress-pro"),group:"analytics",premium:!0,path:uipProPath+"assets/js/uip/blocks/analytics/google-analytics-map.min.js",icon:"map",settings:{},optionsEnabled:[{name:"block",label:C("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"chartName",label:C("Chart title","uipress-pro"),value:{string:C("Analytics table","uipress-pro")}},{option:"defaultSelect",componentName:"default-select",uniqueKey:"chartDataType",label:C("Chart metric","uipress-pro"),args:{options:[{value:"countries",label:C("Visits by Country","uipress-pro")}]},value:""},{option:"number",componentName:"uip-number",uniqueKey:"dateRange",label:C("Default date range (days)","uipress-pro"),value:14},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"darkMode",label:C("Map style","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:C("Light","uipress-pro")},true:{value:!0,label:C("Dark","uipress-pro")}}}},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inlineAccountSwitch",label:C("Switch account option","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:C("Show","uipress-pro")},true:{value:!0,label:C("Hide","uipress-pro")}}}}]},{name:"container",label:C("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:C("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"title",label:C("Table title","uipress-pro"),icon:"title",styleType:"style",class:".uip-chart-title"},{name:"dates",label:C("Dates","uipress-pro"),icon:"date_range",styleType:"style",class:".uip-dates"},{name:"map",label:C("Map","uipress-pro"),icon:"map",styleType:"style",class:".uip-ga-map"}]},{__:ce,_x:Io,_n:Fo,_nx:jo}=wp.i18n;let we;const is={components:{ConnectGoogle:je},props:{display:String,name:String,block:Object},data(){return{loading:!0,error:!1,map:!1,apiLoaded:!1,errorMessage:"",total:0,comparisonTotal:0,percentChange:0,fetchingQuery:!1,showGoogleConnection:!1,requestFromGroupDate:!1,currentRequest:!1,groupDate:{},startDate:"",endDate:"",currentData:[],chartData:{data:{main:[],comparison:[]},labels:{main:[],comparisons:[]},title:"",colors:{main:this.returnLineColor,comp:this.returnCompLineColor}},strings:{lastPeriod:ce("last period","uipress-pro"),selectDataMetric:ce("Please select a chart metric in this block's options to show chart data.","uipress-pro"),changeAccount:ce("Switch account","uipress-pro"),count:ce("Count","uipress-pro"),change:ce("Change","uipress-pro"),current:ce("Current","uipress-pro"),previous:ce("Previous","uipress-pro"),users:ce("users","uipress-pro")}}},inject:["uiTemplate"],watch:{currentData:{handler(){this.buildMap()},immediate:!0,deep:!0},"block.settings.block.options.chartDataType":{handler(e,t){this.getAnalytics()},deep:!0},"uipApp.googleAnalytics":{handler(e,t){e&&e.ready&&this.getAnalytics()},deep:!0,immediate:!0},"uiTemplate.globalSettings.options.analytics.saveAccountToUser":{handler(e,t){this.refreshAnalytics()}}},beforeUnmount(){document.removeEventListener("uipress/app/daterange/change",this.handleDateChange),this.map&&(this.map.remove(),this.map=!1)},mounted(){document.addEventListener("uipress/app/daterange/change",this.handleDateChange)},computed:{returnTableData(){return this.currentData},returnMappCss(){return uipProPath+"assets/css/libs/mapbox.css"},returnTotal(){return this.total},returnComparisonTotal(){return this.comparisonTotal},returnChartData(){return this.chartData},returnName(){let e=this.get_block_option(this.block,"block","chartName",!0);return e?(e=this.isObject(e)?e.string:e,e):""},returnChartType(){return this.get_block_option(this.block,"block","chartDataType")},returnChartSettings(){return this.get_block_option(this.block,"block","chartOptions")},returnChartStyle(){let e=this.get_block_option(this.block,"block","chartStyle");return e?(e=this.isObject(e)?e.value:"line",e):"line"},returnLineColor(){let e=this.get_block_option(this.block,"block","chartColour");return e?(e=this.isObject(e)?e.value:e,e):""},returnCompLineColor(){let e=this.get_block_option(this.block,"block","chartCompColour");return e?(e=this.isObject(e)?e.value:e,e):""},hideChart(){let e=this.get_block_option(this.block,"block","hideChart");return e?(e=this.isObject(e)?e.value:e,e):""},inlineAccountSwitch(){let e=this.get_block_option(this.block,"block","inlineAccountSwitch");return e?(e=this.isObject(e)?e.value:e,e):!0},returnRange(){let e=this.get_block_option(this.block,"block","dateRange");return e?(e=isNaN(e)?14:e,e=e>60?60:e,e):14},hasGlobalDate(){return!!this.hasNestedPath(this.groupDate,"start")},isApiReady(){return this.hasNestedPath(this.uipApp,"googleAnalytics","ready")},darkMapTheme(){let e=this.get_block_option(this.block,"block","darkMode");return e?(e=this.isObject(e)?e.value:!1,e):!1}},methods:{handleDateChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.groupDate.start=e.detail.groupDate.start,this.groupDate.end=e.detail.groupDate.end,this.getAnalytics())},async getAnalytics(){if(this.resetErrorState(),this.apiLoaded=this.isApiReady,!this.apiLoaded)return;this.loading=!0;const{startDate:e,endDate:t}=this.calculateDateRange(),i=await this.fetchAnalyticsData(e,t);i.error?this.handleApiError(i):(this.currentRequest=i,this.processResponse(i)),this.loading=!1},resetErrorState(){this.error=!1,this.errorMessage="",this.showGoogleConnection=!1},calculateDateRange(){let e,t;return this.hasGlobalDate?(e=new Date(Date.parse(this.groupDate.start)),t=new Date(Date.parse(this.groupDate.end))):(t=new Date,t.setDate(t.getDate()-1),e=new Date,e.setDate(e.getDate()-this.returnRange)),this.startDate=e,this.endDate=t,{startDate:e,endDate:t}},async fetchAnalyticsData(e,t){return await this.uipApp.googleAnalytics.api("get",e,t)},handleApiError(e){this.error=!0,this.errorMessage=e.message,e.type==="no_account"&&(this.showGoogleConnection=!0)},processResponse(){let e=this.currentRequest,t=this.returnChartType;t&&(this.currentData=e[t].report.data)},async removeAnalyticsAccount(){this.uipApp.googleAnalytics.ready=!1,await this.uipApp.googleAnalytics.api("removeAccount"),await this.uipApp.googleAnalytics.api("refresh"),this.uipApp.googleAnalytics.ready=!0,this.getAnalytics()},async refreshAnalytics(){this.uipApp.googleAnalytics.ready=!1,await this.uipApp.googleAnalytics.api("refresh")&&(this.uipApp.googleAnalytics.ready=!0,this.getAnalytics())},returnFormattedDate(e){if(!e)return"";const t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}/${i}/${a}`},returnErrrorMessage(){try{JSON.parse(this.errorMessage)}catch{return this.errorMessage}if(this.isObject(JSON.parse(this.errorMessage))){let e=JSON.parse(this.errorMessage);return`
              <h5 style="margin:0">${e.status}</h5>
              <p style="margin-bottom:0;">${e.message}</p>
            `}return this.errorMessage},async buildMap(){we||(we=(await Ie(()=>import("./assets/mapbox-gl-wnhiI-k1.js").then(s=>s.m),__vite__mapDeps([0,1]))).default,we.accessToken="pk.eyJ1IjoibWFya2FzaHRvbiIsImEiOiJjbGRrZGYyc2IwamRuM3ZsZ2JudXdwMjRtIn0.V_oXBXMGBUBty-fZY0VXfg"),await this.$nextTick(),this.map&&(this.map.remove(),this.map=!1);let e="mapbox://styles/markashton/cldkdgzpx008t01rvfdmhtwet";if((this.darkMapTheme||this.uipApp.data.userPrefs.darkTheme)&&(e="mapbox://styles/markashton/cldklav6v009701rv47a1q7pa"),!this.$refs.mapcontainer)return;const t=new we.Map({container:"uip-ga-map",style:e,zoom:1,center:[-10,14]});this.map=t,t.addControl(new we.NavigationControl);let i=Fe;for(const a of this.returnTableData){let s=i.find(n=>n.country.toLowerCase()===a.name.toLowerCase());if(typeof s>"u")continue;const r=this.createToolTip(a);new we.Marker(r.el).setLngLat([s.longitude,s.latitude]).setPopup(new we.Popup({offset:25}).setHTML(r.inner)).addTo(t)}},createToolTip(e){const t=document.createElement("div");t.className="marker uip-w-10 uip-ratio-1-1 uip-background-primary-wash uip-border-circle uip-border-primary";let i=e.percent_total*3;t.style.width=i+"px";let a=e.change<0?"uip-arrow-icon-down":"";a=e.change>0?"uip-arrow-icon-up":a;let s=`
          <div class="uip-background-default uip-boder uip-shadow uip-border-rounder uip-overflow-hidden uip-text-normal">
            <div class="uip-background-default">
              <div class="uip-padding-xs uip-padding-top-xxs uip-padding-bottom-xxs uip-border-bottom uip-body-font uip-text-left uip-overflow-hidden uip-flex uip-flex-row uip-gap-xs uip-flex-between uip-flex-center">
              
                <div class="uip-text-bold uip-text-emphasis">
                  ${e.name}
                </div>
                
                <div class="uip-text-s uip-background-orange-wash uip-border-round uip-padding-xxxs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label uip-text-muted">
                  <span class="${a}"></span>
                  <span>${e.change}%</span>
                </div>
                
              </div>
              
              <div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-xxs">
                <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-between uip-w-125">
                  <div class="uip-text-bold uip-text-primary" >${e.value+" "+this.strings.users}</div>
                  <div class="uip-text-s uip-text-muted">${this.strings.current}</div>
                </div>
                <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-between uip-w-125">
                  <div class="uip-text-bold uip-text-orange">${e.value_comp+" "+this.strings.users}</div>
                  <div class="uip-text-s uip-text-muted">${this.strings.previous}</div>
                </div>
              </div>
            </div>
          </div>`;return{el:t,inner:s}}},template:d` <div class="uip-flex uip-flex-column uip-w-300">
    <component is="style">
      @import '{{returnMappCss}}'; .mapboxgl-ctrl-bottom-left, .mapboxgl-ctrl-bottom-right{ display:none; } .marker { border-radius: 50%; cursor: pointer; animation: pulse-outline 2.5s
      cubic-bezier(0.455, 0.03, 0.515, 0.955) -.4s infinite; transition: outline 5s ease, opacity .2s ease; } @keyframes pulse-outline { 0% { outline: 0px solid var(--uip-color-primary-lighter); }
      100% { outline: 12px solid transparent; } } .mapboxgl-popup { max-width: 200px; } .mapboxgl-popup-content { padding:0; box-shadow:none; border-radius:4px; } .mapboxgl-popup-close-button {
      top:5px; display:none; } .uip-dark-mode .mapboxgl-ctrl-top-right{ filter: invert(1); } .mapboxgl-popup-anchor-top .mapboxgl-popup-tip{ border-bottom-color: var(--uip-color-base-0); }
      .mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{ border-top-color: var(--uip-color-base-0); } .mapboxgl-popup-anchor-left .mapboxgl-popup-tip{ border-right-color: var(--uip-color-base-0); }
      .mapboxgl-popup-anchor-right .mapboxgl-popup-tip{ border-left-color: var(--uip-color-base-0); } .mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{ border-bottom-color: var(--uip-color-base-0);
      } .mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{ border-bottom-color: var(--uip-color-base-0); } .mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{ border-top-color:
      var(--uip-color-base-0); } .mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{ border-top-color: var(--uip-color-base-0); }
    </component>

    <!-- Header -->
    <div class="uip-flex uip-flex-between">
      <!--Chart title-->
      <div class="uip-margin-bottom-xxs uip-text-normal uip-chart-title">{{returnName}}</div>

      <!-- Account switcher-->
      <dropdown pos="bottom right" v-if="!inlineAccountSwitch && !showGoogleConnection">
        <template v-slot:trigger>
          <AppIcon icon="more_horiz" class="uip-link-muted uip-text-l" />
        </template>
        <template v-slot:content>
          <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-padding-xxxs uip-link-muted" @click="removeAnalyticsAccount()">
            <AppIcon icon="sync" />
            <div class="uip-padding-xxs">{{strings.changeAccount}}</div>
          </div>
        </template>
      </dropdown>
    </div>

    <div class="uip-text-s uip-text-muted uip-margin-bottom-s uip-margin-bottom-s uip-dates">{{returnFormattedDate(startDate)}} - {{returnFormattedDate(endDate)}}</div>

    <div class="uip-margin-bottom-xxs" v-if="showGoogleConnection"><ConnectGoogle :success="refreshAnalytics" /></div>

    <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle  uip-w-100p uip-ratio-16-10 uip-border-box"><loading-chart></loading-chart></div>

    <div
      v-else-if="error && errorMessage"
      class="uip-padding-xs uip-border-round uip-background-orange-wash uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-100p"
      v-html="returnErrrorMessage()"
    ></div>

    <div v-else-if="!returnChartType" class="uip-padding-xxs uip-border-round uip-background-green-wash uip-text-green uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-200">
      {{strings.selectDataMetric}}
    </div>

    <div v-else class="uip-position-relative uip-h-100p uip-w-100p" :class="{'uip-dark-mode' : darkMapTheme || uipApp.data.userPrefs.darkTheme}">
      <div ref="mapcontainer" id="uip-ga-map" class="uip-ga-map uip-w-100p uip-h-200"></div>
    </div>
  </div>`},as={metadata:ts,component:is},{__:S,_x:qo,_n:Vo,_nx:Uo}=wp.i18n,ss={name:S("GA realtime","uipress-pro"),moduleName:"uip-google-realtime",description:S("Displays live visitor data about your site","uipress-pro"),category:S("Analytics","uipress-pro"),group:"analytics",premium:!0,icon:"schedule",settings:{},optionsEnabled:[{name:"block",label:S("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"chartName",label:S("Chart title","uipress-pro"),value:{string:S("Analytics realtime","uipress-pro")}},{option:"defaultSelect",componentName:"default-select",uniqueKey:"chartDataType",label:S("Chart metric","uipress-pro"),args:{options:[{value:"activeUsers",label:S("Active users","uipress-pro")},{value:"conversions",label:S("Conversions","uipress-pro")}]},value:""},{option:"color-select",componentName:"color-select",uniqueKey:"chartColour",label:S("Line colour","uipress-pro")},{option:"chartOptions",componentName:"uip-chart-options",uniqueKey:"chartOptions",label:S("Chart style","uipress-pro")},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inlineAccountSwitch",label:S("Switch account option","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:S("Show","uipress-pro")},true:{value:!0,label:S("Hide","uipress-pro")}}}}]},{name:"container",label:S("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:S("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"title",label:S("Table title","uipress-pro"),icon:"title",styleType:"style",class:".uip-chart-title"},{name:"chartLabels",label:S("Chart labels","uipress-pro"),icon:"input",styleType:"style",class:".uip-chart-label"},{name:"chartCanvas",label:S("Chart canvas","uipress-pro"),icon:"monitoring",styleType:"style",class:".uip-chart-canvas"},{name:"percentChange",label:S("Percentage change","uipress-pro"),icon:"label",styleType:"style",class:".uip-tag-label"}]},{__:Pe,_x:Bo,_n:Ko,_nx:Ho}=wp.i18n,rs={components:{ConnectGoogle:je},props:{display:String,name:String,block:Object},data(){return{loading:!0,rendered:!0,error:!1,apiLoaded:!1,errorMessage:"",total:0,comparisonTotal:0,percentChange:0,fetchingQuery:!1,showGoogleConnection:!1,requestFromGroupDate:!1,currentRequest:!1,chartData:{data:{main:[],comparison:[]},labels:{main:[],comparisons:[]},title:"",colors:{main:this.returnLineColor,comp:this.returnCompLineColor}},groupDate:{},strings:{lastPeriod:Pe("last period","uipress-pro"),selectDataMetric:Pe("Please select a chart metric in this block's options to show chart data.","uipress-pro"),changeAccount:Pe("Switch account","uipress-pro"),minutesAgo:Pe("minutes ago","uipress-pro"),thirtyMinutesAgo:Pe("Thirty minutes ago","uipress-pro"),now:Pe("Now","uipress-pro")}}},inject:["uiTemplate"],watch:{"block.settings.block.options.chartDataType":{handler(e,t){this.getAnalytics()},deep:!0},"uipApp.googleAnalytics":{handler(e,t){e&&e.ready&&this.getAnalytics()},deep:!0,immediate:!0},"uiTemplate.globalSettings.options.analytics.saveAccountToUser":{handler(e,t){this.refreshAnalytics()}}},computed:{returnTotal(){return this.total},returnComparisonTotal(){return this.comparisonTotal},returnChartData(){return this.chartData},returnName(){let e=this.get_block_option(this.block,"block","chartName",!0);return e?(e=this.isObject(e)?e.string:e,e):""},returnChartType(){return this.get_block_option(this.block,"block","chartDataType")},returnChartSettings(){return this.get_block_option(this.block,"block","chartOptions")},returnChartStyle(){let e=this.get_block_option(this.block,"block","chartStyle");return e?(e=this.isObject(e)?e.value:"line",e):"line"},returnLineColor(){let e=this.get_block_option(this.block,"block","chartColour");return e?(e=this.isObject(e)?e.value:e,e):""},returnCompLineColor(){let e=this.get_block_option(this.block,"block","chartCompColour");return e?(e=this.isObject(e)?e.value:e,e):""},hideChart(){let e=this.get_block_option(this.block,"block","hideChart");return e?(e=this.isObject(e)?e.value:e,e):""},inlineAccountSwitch(){let e=this.get_block_option(this.block,"block","inlineAccountSwitch");return e?(e=this.isObject(e)?e.value:e,e):!0},returnRange(){let e=this.get_block_option(this.block,"block","dateRange");return e?(e=isNaN(e)?14:e,e=e>60?60:e,e):14},isApiReady(){return this.hasNestedPath(this.uipApp,"googleAnalytics","ready")}},mounted(){setInterval(this.getAnalytics,6e4)},methods:{async getAnalytics(){if(this.resetErrorState(),this.apiLoaded=this.isApiReady,!this.apiLoaded)return;this.loading=!0;const{startDate:e,endDate:t}=this.calculateDateRange(),i=await this.fetchAnalyticsData(e,t);i.error?this.handleApiError(i):(this.currentRequest=i,this.processResponse(i)),this.loading=!1},resetErrorState(){this.error=!1,this.errorMessage="",this.showGoogleConnection=!1},calculateDateRange(){let e,t;return t=new Date,t.setDate(t.getDate()-1),e=new Date,e.setDate(e.getDate()-this.returnRange),{startDate:e,endDate:t}},async fetchAnalyticsData(e,t){return await this.uipApp.googleAnalytics.api("get",e,t)},handleApiError(e){this.error=!0,this.errorMessage=e.message,e.type==="no_account"&&(this.showGoogleConnection=!0)},processResponse(){const e=this.currentRequest,t=this.returnChartType,i=e.active_now.report,{labels:a,dataset:s}=this.generateLabelsAndDataset(t,i);this.setChartData(a,s,t),this.total=i.totals[t]},generateLabelsAndDataset(e,t){let i=[],a=[];for(let s=0;s<=29;s++){i.push(`${s} ${this.strings.minutesAgo}`);const r=s.toString().padStart(2,"0"),n=t.data.find(o=>o.minutesAgo===r);a.push(n?n[e]:0)}return{labels:i.reverse(),dataset:a.reverse()}},setChartData(e,t,i){this.returnChartSettings&&(this.chartData.custom=this.returnChartSettings),this.chartData.colors.main=this.returnLineColor,this.chartData.title=this.returnName,this.chartData.type="bar",this.chartData.data.main=t,this.chartData.labels.main=e},async removeAnalyticsAccount(){this.uipApp.googleAnalytics.ready=!1,await this.uipApp.googleAnalytics.api("removeAccount"),await this.uipApp.googleAnalytics.api("refresh"),this.uipApp.googleAnalytics.ready=!0,this.getAnalytics()},secondsToTime(e){if(isNaN(e)||e<0)return"0m 0s";const t=Math.floor(e/60).toString().padStart(2,"0"),i=(e%60).toString().padStart(2,"0");return`${t}m ${i}s`},async refreshAnalytics(){this.uipApp.googleAnalytics.ready=!1,await this.uipApp.googleAnalytics.api("refresh")&&(this.uipApp.googleAnalytics.ready=!0,this.getAnalytics())},returnErrrorMessage(){try{JSON.parse(this.errorMessage)}catch{return this.errorMessage}if(this.isObject(JSON.parse(this.errorMessage))){let e=JSON.parse(this.errorMessage);return`
              <h5 style="margin:0">${e.status}</h5>
              <p style="margin-bottom:0;">${e.message}</p>
            `}return this.errorMessage}},template:d` <div class="uip-flex uip-flex-column uip-text-normal uip-w-200">
    <!-- Header -->
    <div class="uip-flex uip-flex-between">
      <!--Chart title-->
      <div class="uip-margin-bottom-xxs uip-text-normal uip-chart-title">{{returnName}}</div>

      <!-- Account switcher-->
      <dropdown pos="bottom right" v-if="!inlineAccountSwitch && !showGoogleConnection">
        <template v-slot:trigger>
          <AppIcon icon="more_horiz" class="uip-link-muted uip-text-l" />
        </template>
        <template v-slot:content>
          <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-padding-xxxs uip-link-muted" @click="removeAnalyticsAccount()">
            <AppIcon icon="sync" />
            <div class="uip-padding-xxs">{{strings.changeAccount}}</div>
          </div>
        </template>
      </dropdown>
    </div>

    <div class="uip-margin-bottom-xxs"><ConnectGoogle v-if="showGoogleConnection" :success="refreshAnalytics" /></div>

    <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle uip-w-100p uip-ratio-16-10 uip-border-box"><loading-chart></loading-chart></div>

    <div
      v-else-if="error && errorMessage"
      class="uip-padding-xs uip-border-round uip-background-orange-wash uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-100p"
      v-html="returnErrrorMessage()"
    ></div>

    <div v-else-if="!returnChartType" class="uip-padding-xxs uip-border-round uip-background-green-wash uip-text-green uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-200">
      {{strings.selectDataMetric}}
    </div>

    <!--Chart data-->
    <div v-else class="uip-flex uip-flex-column uip-row-gap-xs uip-w-100p">
      <div class="uip-flex uip-flex-between uip-gap-xxs uip-flex-center uip-margin-bottom-xs">
        <div class="uip-text-xl uip-text-bold">{{returnTotal}}</div>

        <div
          class="uip-text-s uip-background-orange-wash uip-border-round uip-padding-xxxs uip-padding-left-xs uip-padding-right-xs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label"
        >
          live
        </div>
      </div>

      <uip-chart v-if="!hideChart && rendered" :chartData="returnChartData" class="uip-chart-canvas" />

      <div class="uip-flex uip-flex-row uip-flex-between" v-if="!hideChart">
        <div class="uip-text-s uip-text-muted uip-chart-label">{{strings.thirtyMinutesAgo}}</div>
        <div class="uip-text-s uip-text-muted uip-chart-label">{{strings.now}}</div>
      </div>
    </div>
  </div>`},ns={metadata:ss,component:rs},{__:w,_x:Go,_n:Yo,_nx:Jo}=wp.i18n,os={name:w("GA tables","uipress-pro"),moduleName:"uip-google-analytics-tables",description:w("Outputs your choice of tables and options on what data to display","uipress-pro"),category:w("Analytics","uipress-pro"),group:"analytics",premium:!0,icon:"table",settings:{},optionsEnabled:[{name:"block",label:w("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"chartName",label:w("Chart title","uipress-pro"),value:{string:w("Analytics table","uipress-pro")}},{option:"defaultSelect",componentName:"default-select",uniqueKey:"chartDataType",label:w("Chart metric","uipress-pro"),args:{options:[{value:"cities",label:w("Visits by City","uipress-pro")},{value:"countries",label:w("Visits by Country","uipress-pro")},{value:"sources",label:w("Visits by source","uipress-pro")},{value:"paths",label:w("Visits by page","uipress-pro")},{value:"events",label:w("Events","uipress-pro")},{value:"devices",label:w("Devices","uipress-pro")}]},value:""},{option:"number",componentName:"uip-number",uniqueKey:"dateRange",label:w("Default date range (days)","uipress-pro"),value:14},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inlineAccountSwitch",label:w("Switch account option","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:w("Show","uipress-pro")},true:{value:!0,label:w("Hide","uipress-pro")}}}}]},{name:"container",label:w("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:w("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"title",label:w("Table title","uipress-pro"),icon:"title",styleType:"style",class:".uip-chart-title"},{name:"dates",label:w("Dates","uipress-pro"),icon:"date_range",styleType:"style",class:".uip-dates"},{name:"table",label:w("Table","uipress-pro"),icon:"table",styleType:"style",class:".uip-table"},{name:"percentChange",label:w("Percentage change","uipress-pro"),icon:"label",styleType:"style",class:".uip-tag-label"}]},{__:Le,_x:zo,_n:Wo,_nx:Qo}=wp.i18n,ls={components:{ConnectGoogle:je},props:{display:String,name:String,block:Object},data(){return{loading:!0,rendered:!0,error:!1,apiLoaded:!1,errorMessage:"",total:0,comparisonTotal:0,percentChange:0,fetchingQuery:!1,showGoogleConnection:!1,requestFromGroupDate:!1,currentRequest:!1,groupDate:{},startDate:"",endDate:"",currentData:[],chartData:{labels:{main:[],comparisons:[]}},strings:{lastPeriod:Le("last period","uipress-pro"),selectDataMetric:Le("Please select a chart metric in this block's options to show chart data.","uipress-pro"),changeAccount:Le("Switch account","uipress-pro"),count:Le("Count","uipress-pro"),change:Le("Change","uipress-pro")}}},inject:["uiTemplate"],watch:{"block.settings.block.options.chartDataType":{handler(e,t){this.getAnalytics()},deep:!0},"uipApp.googleAnalytics":{handler(e,t){e&&e.ready&&this.getAnalytics()},deep:!0,immediate:!0},"uiTemplate.globalSettings.options.analytics.saveAccountToUser":{handler(e,t){this.refreshAnalytics()}}},beforeUnmount(){document.removeEventListener("uipress/app/daterange/change",this.handleDateChange)},mounted(){document.addEventListener("uipress/app/daterange/change",this.handleDateChange)},computed:{returnTableData(){return this.currentData},returnTotal(){return this.total},returnComparisonTotal(){return this.comparisonTotal},returnName(){let e=this.get_block_option(this.block,"block","chartName",!0);return e?(e=this.isObject(e)?e.string:e,e):""},returnChartType(){return this.get_block_option(this.block,"block","chartDataType")},returnChartSettings(){return this.get_block_option(this.block,"block","chartOptions")},returnChartStyle(){let e=this.get_block_option(this.block,"block","chartStyle");return e?(e=this.isObject(e)?e.value:"line",e):"line"},returnLineColor(){let e=this.get_block_option(this.block,"block","chartColour");return e?(e=this.isObject(e)?e.value:e,e):""},returnCompLineColor(){let e=this.get_block_option(this.block,"block","chartCompColour");return e?(e=this.isObject(e)?e.value:e,e):""},hideChart(){let e=this.get_block_option(this.block,"block","hideChart");return e?(e=this.isObject(e)?e.value:e,e):""},inlineAccountSwitch(){let e=this.get_block_option(this.block,"block","inlineAccountSwitch");return e?(e=this.isObject(e)?e.value:e,e):!0},returnRange(){let e=this.get_block_option(this.block,"block","dateRange");return e?(e=isNaN(e)?14:e,e=e>60?60:e,e):14},hasGlobalDate(){return!!this.groupDate.start},isApiReady(){return this.hasNestedPath(this.uipApp,"googleAnalytics","ready")},returnStartDate(){return this.hasGlobalDate?this.groupDate.start:this.startDate},returnEndDate(){return this.hasGlobalDate?this.groupDate.end:this.endDate}},methods:{handleDateChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.groupDate.start=e.detail.groupDate.start,this.groupDate.end=e.detail.groupDate.end,this.getAnalytics())},async getAnalytics(){if(this.resetErrorState(),this.apiLoaded=this.isApiReady,!this.apiLoaded)return;this.loading=!0;const{startDate:e,endDate:t}=this.calculateDateRange(),i=await this.fetchAnalyticsData(e,t);i.error?this.handleApiError(i):(this.currentRequest=i,this.processResponse(i)),this.loading=!1},resetErrorState(){this.error=!1,this.errorMessage="",this.showGoogleConnection=!1},calculateDateRange(){let e,t;return this.hasGlobalDate?(e=new Date(Date.parse(this.groupDate.start)),t=new Date(Date.parse(this.groupDate.end))):(t=new Date,t.setDate(t.getDate()-1),e=new Date,e.setDate(e.getDate()-this.returnRange)),this.startDate=e,this.endDate=t,{startDate:e,endDate:t}},async fetchAnalyticsData(e,t){return await this.uipApp.googleAnalytics.api("get",e,t)},handleApiError(e){this.error=!0,this.errorMessage=e.message,e.type==="no_account"&&(this.showGoogleConnection=!0)},processResponse(){const e=this.currentRequest,t=this.returnChartType;t&&(this.currentData=e[t].report.data,console.log(this.currentData))},async removeAnalyticsAccount(){this.uipApp.googleAnalytics.ready=!1,await this.uipApp.googleAnalytics.api("removeAccount"),await this.uipApp.googleAnalytics.api("refresh"),this.uipApp.googleAnalytics.ready=!0,this.getAnalytics()},secondsToTime(e){if(isNaN(e)||e<0)return"0m 0s";const t=Math.floor(e/60).toString().padStart(2,"0"),i=(e%60).toString().padStart(2,"0");return`${t}m ${i}s`},async refreshAnalytics(){this.uipApp.googleAnalytics.ready=!1,await this.uipApp.googleAnalytics.api("refresh")&&(this.uipApp.googleAnalytics.ready=!0,this.getAnalytics())},returnFormattedDate(e){if(!e)return"";const t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}/${i}/${a}`},returnErrrorMessage(){try{JSON.parse(this.errorMessage)}catch{return this.errorMessage}if(this.isObject(JSON.parse(this.errorMessage))){let e=JSON.parse(this.errorMessage);return`
              <h5 style="margin:0">${e.status}</h5>
              <p style="margin-bottom:0;">${e.message}</p>
            `}return this.errorMessage}},template:d`
    <div class="uip-flex uip-flex-column uip-text-normal">
      <!-- Header -->
      <div class="uip-flex uip-flex-between">
        <!--Chart title-->
        <div class="uip-margin-bottom-xxs uip-text-normal uip-chart-title">{{returnName}}</div>

        <!-- Account switcher-->
        <dropdown pos="bottom right" v-if="!inlineAccountSwitch && !showGoogleConnection">
          <template v-slot:trigger>
            <AppIcon icon="more_horiz" class="uip-link-muted uip-text-l" />
          </template>
          <template v-slot:content>
            <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-padding-xxxs uip-link-muted" @click="removeAnalyticsAccount()">
              <AppIcon icon="sync" />
              <div class="uip-padding-xxs">{{strings.changeAccount}}</div>
            </div>
          </template>
        </dropdown>
      </div>

      <div class="uip-text-s uip-text-muted uip-margin-bottom-s uip-margin-bottom-s uip-dates">{{returnFormattedDate(returnStartDate)}} - {{returnFormattedDate(returnEndDate)}}</div>
      <div class="uip-margin-bottom-xxs" v-if="showGoogleConnection"><ConnectGoogle :success="refreshAnalytics" /></div>
      <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle uip-min-w-200 uip-w-100p uip-ratio-16-10 uip-border-box"><loading-chart /></div>
      <div
        v-else-if="error && errorMessage"
        class="uip-padding-xs uip-border-round uip-background-orange-wash uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-100p"
        v-html="returnErrrorMessage()"
      ></div>
      <div v-else-if="!returnChartType" class="uip-padding-xxs uip-border-round uip-background-green-wash uip-text-green uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-200">
        {{strings.selectDataMetric}}
      </div>

      <div v-else class="uip-min-w-200">
        <div class="uip-flex uip-flex-column uip-row-gap-xs">
          <div class="uip-max-w-100p uip-overflow-auto uip-scrollbar">
            <table class="uip-min-w-250 uip-w-100p uip-table">
              <thead>
                <tr class="">
                  <th class="uip-padding-bottom-xxs"></th>
                  <th class="uip-text-muted uip-text-weight-normal uip-text-right uip-padding-bottom-xxs">{{strings.count}}</th>
                  <th class="uip-text-right uip-text-muted uip-text-weight-normal uip-padding-bottom-xxs">{{strings.change}}</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="item in returnTableData">
                  <td class="uip-text-bold uip-padding-bottom-xxs">{{item.name}}</td>
                  <td class="uip-text-right uip-padding-bottom-xxs">{{item.value}}</td>
                  <td class="uip-text-right uip-padding-bottom-xxs">
                    <div
                      class="uip-text-s uip-border-round uip-padding-xxxs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label uip-inline-flex"
                      :class="item.change > 0 ? 'uip-background-green-wash' : 'uip-background-orange-wash'"
                    >
                      <AppIcon v-if="item.change > 0" icon="arrow_upward" class="uip-text-green" />
                      <AppIcon v-if="item.change < 0" icon="arrow_downward" class="uip-text-danger" />
                      <span class="uip-percentage-value">{{item.change}}</span>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  `},ps={metadata:os,component:ls},{__:x,_x:Zo,_n:Xo,_nx:el}=wp.i18n,us={name:x("Matomo charts","uipress-pro"),moduleName:"uip-matomo-analytics-chart",description:x("Outputs your choice of charts and options on what data to display from Matomo analytics","uipress-pro"),category:x("Analytics","uipress-pro"),group:"analytics",premium:!0,path:uipProPath+"assets/js/uip/blocks/analytics/matomo-analytics-charts.min.js",icon:"bar_chart",settings:{},optionsEnabled:[{name:"block",label:x("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"chartName",label:x("Chart title","uipress-pro"),value:{string:x("Analytics chart","uipress-pro")}},{option:"defaultSelect",componentName:"default-select",uniqueKey:"chartDataType",label:x("Chart metric","uipress-pro"),args:{options:[{value:"users_per_day",label:x("Users per day","uipress-pro")},{value:"visits_per_day",label:x("Visits per day","uipress-pro")},{value:"page_views",label:x("Page views per day","uipress-pro")}]},value:""},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"chartStyle",label:x("Chart type","uipress-pro"),args:{options:{line:{value:"line",label:x("Line","uipress-pro")},bar:{value:"bar",label:x("Bar","uipress-pro")}}},value:{value:"line"}},{option:"number",componentName:"uip-number",uniqueKey:"dateRange",label:x("Default date range (days)","uipress-pro"),value:14},{option:"color-select",componentName:"color-select",uniqueKey:"chartColour",label:x("Line colour","uipress-pro")},{option:"color-select",componentName:"color-select",uniqueKey:"chartCompColour",label:x("Comparison line colour","uipress-pro")},{option:"chartOptions",componentName:"uip-chart-options",uniqueKey:"chartOptions",label:x("Chart style","uipress-pro")},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"hideChart",label:x("Chart","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:x("Show","uipress-pro")},true:{value:!0,label:x("Hide","uipress-pro")}}}},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inlineAccountSwitch",label:x("Switch account option","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:x("Show","uipress-pro")},true:{value:!0,label:x("Hide","uipress-pro")}}}}]},{name:"container",label:x("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:x("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"title",label:x("Table title","uipress-pro"),icon:"title",styleType:"style",class:".uip-chart-title"},{name:"chartCanvas",label:x("Chart canvas","uipress-pro"),icon:"monitoring",styleType:"style",class:".uip-chart-canvas"},{name:"chartLabels",label:x("Chart labels","uipress-pro"),icon:"input",styleType:"style",class:".uip-chart-label"},{name:"percentChange",label:x("Percentage change","uipress-pro"),icon:"label",styleType:"style",class:".uip-tag-label"}]},{__:de,_x:tl,_n:il,_nx:al}=wp.i18n,st={inject:["uiTemplate"],props:{translations:Object,success:Function},data(){return{hover:!1,strings:{conntectAccount:de("Connect matomo account","uipress-pro"),matomoURL:de("Matomo URL","uipress-pro"),siteID:de("Site id","uipress-pro"),authToken:de("Auth token","uipress-pro"),connect:de("Connect","uipress-pro")},data:{url:"",siteID:1,authToken:""}}},computed:{returnAccountOnUser(){return typeof this.uiTemplate.globalSettings.options>"u"?!1:this.hasNestedPath(this.uiTemplate,"globalSettings","options","analytics","saveAccountToUser")}},methods:{async uip_save_matomo(){if(!this.data.url||!this.data.siteID||!this.data.authToken){this.uipApp.notifications.notify(de("All fields are required","uipress-pro"),de("Please fill in all fields to connect to matomo","uipress-pro"),"error",!0);return}let e=new FormData;e.append("action","uip_save_matomo_analytics"),e.append("security",uip_ajax.security),e.append("analytics",JSON.stringify(this.data)),e.append("saveAccountToUser",this.returnAccountOnUser);const t=await this.sendServerRequest(uip_ajax.ajax_url,e);if(t.error){this.uipApp.notifications.notify(de("Unable to save account","uipress-pro"),t.message,"error",!0);return}this.success()}},template:d`
    <dropdown pos="bottom left">
      <template v-slot:trigger>
        <button class="uip-button-default">{{strings.conntectAccount}}</button>
      </template>

      <template v-slot:content>
        <div class="uip-padding-s uip-flex uip-flex-column uip-gap-s uip-w-300">
          <div class="uip-grid-col-1-3">
            <div class="uip-text-muted uip-flex uip-flex-center">{{strings.matomoURL}}</div>
            <input class="uip-input uip-input-small" type="text" placeholder="https://uipress.co/analytics/" v-model="data.url" />

            <div class="uip-text-muted uip-flex uip-flex-center">{{strings.siteID}}</div>
            <input class="uip-input uip-input-small" type="number" v-model="data.siteID" />

            <div class="uip-text-muted uip-flex uip-flex-center">{{strings.authToken}}</div>
            <input class="uip-input uip-input-small" type="password" placeholder="*************" v-model="data.authToken" />
          </div>

          <button class="uip-button-primary" @click="uip_save_matomo()">{{strings.connect}}</button>
        </div>
      </template>
    </dropdown>
  `},{__:Ye,_x:sl,_n:rl,_nx:nl}=wp.i18n,cs={components:{ConnectMatomo:st},props:{display:String,name:String,block:Object},data(){return{loading:!0,rendered:!0,error:!1,apiLoaded:!1,errorMessage:"",total:0,comparisonTotal:0,percentChange:0,fetchingQuery:!1,showMatomoConnection:!1,requestFromGroupDate:!1,currentRequest:!1,groupDate:{},chartData:{data:{main:[],comparison:[]},labels:{main:[],comparisons:[]},title:"",colors:{main:this.returnLineColor,comp:this.returnCompLineColor}},strings:{lastPeriod:Ye("last period","uipress-pro"),selectDataMetric:Ye("Please select a chart metric in this block's options to show chart data.","uipress-pro"),changeAccount:Ye("Switch account","uipress-pro")}}},inject:["uiTemplate"],watch:{"block.settings.block.options.chartDataType":{handler(e,t){this.getAnalytics()},deep:!0},"uipApp.matomoAnalytics":{handler(e,t){e.ready&&this.getAnalytics()},deep:!0,immediate:!0},"uiTemplate.globalSettings.options.analytics.saveAccountToUser":{handler(e,t){this.refreshAnalytics()}}},mounted(){document.addEventListener("uipress/app/daterange/change",this.handleDateChange)},beforeUnmount(){document.removeEventListener("uipress/app/daterange/change",this.handleDateChange)},computed:{returnTotal(){return this.total},returnComparisonTotal(){return this.comparisonTotal},returnChartData(){return this.chartData},returnName(){let e=this.get_block_option(this.block,"block","chartName",!0);return e?(e=this.isObject(e)?e.string:e,e):""},returnChartType(){return this.get_block_option(this.block,"block","chartDataType")},returnChartSettings(){return this.get_block_option(this.block,"block","chartOptions")},returnChartStyle(){let e=this.get_block_option(this.block,"block","chartStyle");return e?(e=this.isObject(e)?e.value:"line",e):"line"},returnLineColor(){let e=this.get_block_option(this.block,"block","chartColour");return e?(e=this.isObject(e)?e.value:e,e):""},returnCompLineColor(){let e=this.get_block_option(this.block,"block","chartCompColour");return e?(e=this.isObject(e)?e.value:e,e):""},hideChart(){let e=this.get_block_option(this.block,"block","hideChart");return e?(e=this.isObject(e)?e.value:e,e):""},inlineAccountSwitch(){let e=this.get_block_option(this.block,"block","inlineAccountSwitch");return e?(e=this.isObject(e)?e.value:e,e):!0},returnRange(){let e=this.get_block_option(this.block,"block","dateRange");return e?(e=isNaN(e)?14:e,e=e>60?60:e,e):14},hasGlobalDate(){return!!this.hasNestedPath(this.groupDate,"start")},isApiReady(){return this.hasNestedPath(this.uipApp,"matomoAnalytics","ready")}},methods:{handleDateChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.groupDate.start=e.detail.groupDate.start,this.groupDate.end=e.detail.groupDate.end,this.getAnalytics())},async getAnalytics(){if(this.resetErrorState(),this.apiLoaded=this.isApiReady,!this.apiLoaded)return;this.loading=!0;const{startDate:e,endDate:t}=this.calculateDateRange(),i=await this.fetchAnalyticsData(e,t);i.error?this.handleApiError(i):(this.currentRequest=i,this.processResponse(i)),this.loading=!1},resetErrorState(){this.error=!1,this.errorMessage="",this.showMatomoConnection=!1},calculateDateRange(){let e,t;return this.hasGlobalDate?(e=new Date(Date.parse(this.groupDate.start)),t=new Date(Date.parse(this.groupDate.end))):(t=new Date,t.setDate(t.getDate()-1),e=new Date,e.setDate(e.getDate()-this.returnRange)),{startDate:e,endDate:t}},async fetchAnalyticsData(e,t){return await this.uipApp.matomoAnalytics.api("get",e,t)},handleApiError(e){this.error=!0,this.errorMessage=e.message,e.type==="no_account"&&(this.showMatomoConnection=!0)},processResponse(){let e=this.currentRequest,t=[],i=[],a=this.returnChartType,s=[],r=[],n=0,o=0;for(let p in e.reports[a]){s.push(e.reports[a][p]),n+=e.reports[a][p];let v=new Date(p).toLocaleDateString();t.push(v)}for(let p in e.reports_comparison[a]){r.push(e.reports_comparison[a][p]),o+=e.reports_comparison[a][p];let v=new Date(p).toLocaleDateString();i.push(v)}this.returnChartSettings&&(this.chartData.custom=this.returnChartSettings),this.chartData.colors.main=this.returnLineColor,this.chartData.colors.comp=this.returnCompLineColor,this.chartData.title=this.returnName,this.chartData.type=this.returnChartStyle,this.chartData.data.main=s,this.chartData.data.comparison=r,this.chartData.labels.main=t,this.chartData.labels.comparison=i,this.total=new Intl.NumberFormat(this.uipApp.data.options.locale).format(n),this.comparisonTotal=new Intl.NumberFormat(this.uipApp.data.options.locale).format(o),n==0||o==0?this.percentChange=n*100:this.percentChange=(n/o*100).toFixed(2)},async removeAnalyticsAccount(){this.uipApp.matomoAnalytics.ready=!1,await this.uipApp.matomoAnalytics.api("removeAccount"),await this.uipApp.matomoAnalytics.api("refresh"),this.uipApp.matomoAnalytics.ready=!0,this.getAnalytics()},secondsToTime(e){if(isNaN(e)||e<0)return"0m 0s";const t=Math.floor(e/60).toString().padStart(2,"0"),i=(e%60).toString().padStart(2,"0");return`${t}m ${i}s`},async refreshAnalytics(){this.uipApp.matomoAnalytics.ready=!1,await this.uipApp.matomoAnalytics.api("refresh")&&(this.uipApp.matomoAnalytics.ready=!0,this.getAnalytics())},returnErrrorMessage(){try{JSON.parse(this.errorMessage)}catch{return this.errorMessage}if(this.isObject(JSON.parse(this.errorMessage))){let e=JSON.parse(this.errorMessage);return`
              <h5 style="margin:0">${e.status}</h5>
              <p style="margin-bottom:0;">${e.message}</p>
            `}return this.errorMessage}},template:d` <div class="uip-flex uip-flex-column uip-text-normal uip-w-200">
    <!-- Header -->
    <div class="uip-flex uip-flex-between">
      <!--Chart title-->
      <div class="uip-margin-bottom-xxs uip-text-normal uip-chart-title">{{returnName}}</div>

      <!-- Account switcher-->
      <dropdown pos="bottom right" v-if="!inlineAccountSwitch && !showMatomoConnection">
        <template v-slot:trigger>
          <AppIcon icon="more_horiz" class="uip-link-muted uip-text-l" />
        </template>
        <template v-slot:content>
          <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-padding-xxxs uip-link-muted" @click="removeAnalyticsAccount()">
            <AppIcon icon="sync" />
            <div class="uip-padding-xxs">{{strings.changeAccount}}</div>
          </div>
        </template>
      </dropdown>
    </div>

    <div class="uip-margin-bottom-xxs"><ConnectMatomo v-if="showMatomoConnection" :success="refreshAnalytics" /></div>

    <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle uip-w-100p uip-ratio-16-10 uip-border-box"><loading-chart></loading-chart></div>

    <div
      v-else-if="error && errorMessage"
      class="uip-padding-xs uip-border-round uip-background-orange-wash uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-100p"
      v-html="returnErrrorMessage()"
    ></div>

    <div v-else-if="!returnChartType" class="uip-padding-xxs uip-border-round uip-background-green-wash uip-text-green uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-200">
      {{strings.selectDataMetric}}
    </div>

    <!--Chart data-->
    <div v-else class="uip-flex uip-flex-column uip-row-gap-xs uip-w-100p">
      <div class="uip-flex uip-flex-between uip-gap-xxs uip-flex-center">
        <div class="uip-text-xl uip-text-bold">{{returnTotal}}</div>
        <div
          class="uip-text-s uip-background-orange-wash uip-border-round uip-padding-xxxs uip-padding-left-xs uip-padding-right-xs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label"
        >
          <AppIcon v-if="percentChange > 0" icon="arrow_upward" />
          <AppIcon v-if="percentChange < 0" icon="arrow_downward" />
          <span>{{percentChange}}%</span>
        </div>
      </div>

      <div class="uip-text-muted uip-margin-bottom-xs">vs. {{returnComparisonTotal}} {{strings.lastPeriod}}</div>
      <uip-chart v-if="!hideChart && rendered" :chartData="returnChartData" class="uip-chart-canvas" />

      <div class="uip-flex uip-flex-row uip-flex-between" v-if="!hideChart">
        <div class="uip-text-s uip-text-muted uip-chart-label">{{chartData.labels.main[0]}}</div>
        <div class="uip-text-s uip-text-muted uip-chart-label">{{chartData.labels.main[chartData.labels.main.length - 1]}}</div>
      </div>
    </div>
  </div>`},ds={metadata:us,component:cs},{__:T,_x:ol,_n:ll,_nx:pl}=wp.i18n,hs={name:T("Matomo map","uipress-pro"),moduleName:"uip-matomo-analytics-map",description:T("Outputs your matomo visitor data to a interactive map","uipress-pro"),category:T("Analytics","uipress-pro"),group:"analytics",premium:!0,icon:"map",settings:{},optionsEnabled:[{name:"block",label:T("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"chartName",label:T("Chart title","uipress-pro"),value:{string:T("Analytics table","uipress-pro")}},{option:"defaultSelect",componentName:"default-select",uniqueKey:"chartDataType",label:T("Chart metric","uipress-pro"),args:{options:[{value:"country_visits",label:T("Visits by Country","uipress-pro")}]},value:""},{option:"number",componentName:"uip-number",uniqueKey:"dateRange",label:T("Default date range (days)","uipress-pro"),value:14},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"darkMode",label:T("Map style","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:T("Light","uipress-pro")},true:{value:!0,label:T("Dark","uipress-pro")}}}},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inlineAccountSwitch",label:T("Switch account option","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:T("Show","uipress-pro")},true:{value:!0,label:T("Hide","uipress-pro")}}}}]},{name:"container",label:T("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:T("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"title",label:T("Table title","uipress-pro"),icon:"title",styleType:"style",class:".uip-chart-title"},{name:"dates",label:T("Dates","uipress-pro"),icon:"date_range",styleType:"style",class:".uip-dates"},{name:"map",label:T("Map","uipress-pro"),icon:"map",styleType:"style",class:".uip-ga-map"}]},{__:he,_x:ul,_n:cl,_nx:dl}=wp.i18n;let ke;const ms={components:{ConnectMatomo:st},props:{display:String,name:String,block:Object},data(){return{loading:!0,error:!1,map:!1,apiLoaded:!1,errorMessage:"",total:0,comparisonTotal:0,percentChange:0,fetchingQuery:!1,showMatomoConnection:!1,requestFromGroupDate:!1,currentRequest:!1,startDate:"",endDate:"",currentData:[],chartData:{data:{main:[],comparison:[]},labels:{main:[],comparisons:[]},title:"",colors:{main:this.returnLineColor,comp:this.returnCompLineColor}},groupDate:{},strings:{lastPeriod:he("last period","uipress-pro"),selectDataMetric:he("Please select a chart metric in this block's options to show chart data.","uipress-pro"),changeAccount:he("Switch account","uipress-pro"),count:he("Count","uipress-pro"),change:he("Change","uipress-pro"),current:he("Current","uipress-pro"),previous:he("Previous","uipress-pro"),users:he("users","uipress-pro")}}},inject:["uiTemplate"],watch:{currentData:{handler(){this.buildMap()},immediate:!0,deep:!0},"block.settings.block.options.chartDataType":{handler(e,t){this.getAnalytics()},deep:!0},"uipApp.matomoAnalytics":{handler(e,t){e.ready&&this.getAnalytics()},deep:!0,immediate:!0},"uiTemplate.globalSettings.options.analytics.saveAccountToUser":{handler(e,t){this.refreshAnalytics()}}},mounted(){document.addEventListener("uipress/app/daterange/change",this.handleDateChange)},beforeUnmount(){document.removeEventListener("uipress/app/daterange/change",this.handleDateChange),this.map&&(this.map.remove(),this.map=!1)},computed:{returnTableData(){return this.currentData},returnMappCss(){return uipProPath+"assets/css/libs/mapbox.css"},returnTotal(){return this.total},returnComparisonTotal(){return this.comparisonTotal},returnChartData(){return this.chartData},returnName(){let e=this.get_block_option(this.block,"block","chartName",!0);return e?(e=this.isObject(e)?e.string:e,e):""},returnChartType(){return this.get_block_option(this.block,"block","chartDataType")},returnChartSettings(){return this.get_block_option(this.block,"block","chartOptions")},returnChartStyle(){let e=this.get_block_option(this.block,"block","chartStyle");return e?(e=this.isObject(e)?e.value:"line",e):"line"},returnLineColor(){let e=this.get_block_option(this.block,"block","chartColour");return e?(e=this.isObject(e)?e.value:e,e):""},returnCompLineColor(){let e=this.get_block_option(this.block,"block","chartCompColour");return e?(e=this.isObject(e)?e.value:e,e):""},hideChart(){let e=this.get_block_option(this.block,"block","hideChart");return e?(e=this.isObject(e)?e.value:e,e):""},inlineAccountSwitch(){let e=this.get_block_option(this.block,"block","inlineAccountSwitch");return e?(e=this.isObject(e)?e.value:e,e):!0},returnRange(){let e=this.get_block_option(this.block,"block","dateRange");return e?(e=isNaN(e)?14:e,e=e>60?60:e,e):14},hasGlobalDate(){return!!this.hasNestedPath(this.groupDate,"start")},isApiReady(){return this.hasNestedPath(this.uipApp,"matomoAnalytics","ready")},darkMapTheme(){let e=this.get_block_option(this.block,"block","darkMode");return e?(e=this.isObject(e)?e.value:!1,e):!1}},methods:{handleDateChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.groupDate.start=e.detail.groupDate.start,this.groupDate.end=e.detail.groupDate.end,this.getAnalytics())},async getAnalytics(){if(this.resetErrorState(),this.apiLoaded=this.isApiReady,!this.apiLoaded)return;this.loading=!0;const{startDate:e,endDate:t}=this.calculateDateRange(),i=await this.fetchAnalyticsData(e,t);i.error?this.handleApiError(i):(this.currentRequest=i,this.processResponse(i)),this.loading=!1},resetErrorState(){this.error=!1,this.errorMessage="",this.showMatomoConnection=!1},calculateDateRange(){let e,t;return this.hasGlobalDate?(e=new Date(Date.parse(this.groupDate.start)),t=new Date(Date.parse(this.groupDate.end))):(t=new Date,t.setDate(t.getDate()-1),e=new Date,e.setDate(e.getDate()-this.returnRange)),this.startDate=e,this.endDate=t,{startDate:e,endDate:t}},async fetchAnalyticsData(e,t){return await this.uipApp.matomoAnalytics.api("get",e,t)},handleApiError(e){this.error=!0,this.errorMessage=e.message,e.type==="no_account"&&(this.showMatomoConnection=!0)},processResponse(){let e=this.currentRequest,t=this.returnChartType;if(!t)return;let i=[],a=e.reports.visits_count.value;for(let[s,r]of e.reports[t].entries()){r.name=r.label,r.value=r.nb_visits,r.value_comp=0,r.percent_total=(r.value/a*100).toFixed(2),r.change=r.nb_visits*100;let n=e.reports_comparison[t][s];if(n){let o=n.nb_visits;r.value_comp=o;let p=r.nb_visits;o!=0&&p!=0&&(r.change=(p/o*100).toFixed(2))}i.push(r)}this.currentData=i},async removeAnalyticsAccount(){this.uipApp.matomoAnalytics.ready=!1,await this.uipApp.matomoAnalytics.api("removeAccount"),await this.uipApp.matomoAnalytics.api("refresh"),this.uipApp.matomoAnalytics.ready=!0,this.getAnalytics()},async refreshAnalytics(){this.uipApp.matomoAnalytics.ready=!1,await this.uipApp.matomoAnalytics.api("refresh")&&(this.uipApp.matomoAnalytics.ready=!0,this.getAnalytics())},returnFormattedDate(e){if(!e)return"";const t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}/${i}/${a}`},returnErrrorMessage(){try{JSON.parse(this.errorMessage)}catch{return this.errorMessage}if(this.isObject(JSON.parse(this.errorMessage))){let e=JSON.parse(this.errorMessage);return`
              <h5 style="margin:0">${e.status}</h5>
              <p style="margin-bottom:0;">${e.message}</p>
            `}return this.errorMessage},async buildMap(){ke||(ke=(await Ie(()=>import("./assets/mapbox-gl-wnhiI-k1.js").then(s=>s.m),__vite__mapDeps([0,1]))).default,ke.accessToken="pk.eyJ1IjoibWFya2FzaHRvbiIsImEiOiJjbGRrZGYyc2IwamRuM3ZsZ2JudXdwMjRtIn0.V_oXBXMGBUBty-fZY0VXfg"),await this.$nextTick(),this.map&&(this.map.remove(),this.map=!1);let e="mapbox://styles/markashton/cldkdgzpx008t01rvfdmhtwet";if((this.darkMapTheme||this.uipApp.data.userPrefs.darkTheme)&&(e="mapbox://styles/markashton/cldklav6v009701rv47a1q7pa"),!this.$refs.mapcontainer)return;const t=new ke.Map({container:"uip-matomo-map",style:e,zoom:1,center:[-10,14]});this.map=t,t.addControl(new ke.NavigationControl);let i=Fe;for(const a of this.returnTableData){let s=i.find(n=>n.country.toLowerCase()===a.name.toLowerCase());if(typeof s>"u")continue;const r=this.createToolTip(a);new ke.Marker(r.el).setLngLat([s.longitude,s.latitude]).setPopup(new ke.Popup({offset:25}).setHTML(r.inner)).addTo(t)}},createToolTip(e){const t=document.createElement("div");t.className="marker uip-w-10 uip-ratio-1-1 uip-background-primary-wash uip-border-circle uip-border-primary";let i=e.percent_total*3;t.style.width=i+"px";let a=e.change<0?"uip-arrow-icon-up":"";a=e.change>0?"uip-arrow-icon-down":a;let s=`
          <div class="uip-background-default uip-boder uip-shadow uip-border-rounder uip-overflow-hidden uip-text-normal">
            <div class="uip-background-default">
              <div class="uip-padding-xs uip-padding-top-xxs uip-padding-bottom-xxs uip-border-bottom uip-body-font uip-text-left uip-overflow-hidden uip-flex uip-flex-row uip-gap-xs uip-flex-between uip-flex-center">
              
                <div class="uip-text-bold uip-text-emphasis">
                  ${e.name}
                </div>
                
                <div class="uip-text-s uip-background-orange-wash uip-border-round uip-padding-xxxs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label uip-text-muted">
                  <span class="${a}"></span>
                  <span>${e.change}%</span>
                </div>
                
              </div>
              
              <div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-xxs">
                <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-between uip-w-125">
                  <div class="uip-text-bold uip-text-primary" >${e.value+" "+this.strings.visits}</div>
                  <div class="uip-text-s uip-text-muted">${this.strings.current}</div>
                </div>
                <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-between uip-w-125">
                  <div class="uip-text-bold uip-text-orange">${e.value_comp+" "+this.strings.visits}</div>
                  <div class="uip-text-s uip-text-muted">${this.strings.previous}</div>
                </div>
              </div>
            </div>
          </div>`;return{el:t,inner:s}}},template:d` <div class="uip-flex uip-flex-column uip-w-300">
    <component is="style">
      @import '{{returnMappCss}}'; .mapboxgl-ctrl-bottom-left, .mapboxgl-ctrl-bottom-right{ display:none; } .marker { border-radius: 50%; cursor: pointer; animation: pulse-outline 2.5s
      cubic-bezier(0.455, 0.03, 0.515, 0.955) -.4s infinite; transition: outline 5s ease, opacity .2s ease; } @keyframes pulse-outline { 0% { outline: 0px solid var(--uip-color-primary-lighter); }
      100% { outline: 12px solid transparent; } } .mapboxgl-popup { max-width: 200px; } .mapboxgl-popup-content { padding:0; box-shadow:none; border-radius:4px; } .mapboxgl-popup-close-button {
      top:5px; display:none; } .uip-dark-mode .mapboxgl-ctrl-top-right{ filter: invert(1); } .mapboxgl-popup-anchor-top .mapboxgl-popup-tip{ border-bottom-color: var(--uip-color-base-0); }
      .mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{ border-top-color: var(--uip-color-base-0); } .mapboxgl-popup-anchor-left .mapboxgl-popup-tip{ border-right-color: var(--uip-color-base-0); }
      .mapboxgl-popup-anchor-right .mapboxgl-popup-tip{ border-left-color: var(--uip-color-base-0); } .mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{ border-bottom-color: var(--uip-color-base-0);
      } .mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{ border-bottom-color: var(--uip-color-base-0); } .mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{ border-top-color:
      var(--uip-color-base-0); } .mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{ border-top-color: var(--uip-color-base-0); }
    </component>

    <!-- Header -->
    <div class="uip-flex uip-flex-between">
      <!--Chart title-->
      <div class="uip-margin-bottom-xxs uip-text-normal uip-chart-title">{{returnName}}</div>

      <!-- Account switcher-->
      <dropdown pos="bottom right" v-if="!inlineAccountSwitch && !showMatomoConnection">
        <template v-slot:trigger>
          <AppIcon icon="more_horiz" class="uip-link-muted uip-text-l" />
        </template>
        <template v-slot:content>
          <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-padding-xxxs uip-link-muted" @click="removeAnalyticsAccount()">
            <AppIcon icon="sync" />
            <div class="uip-padding-xxs">{{strings.changeAccount}}</div>
          </div>
        </template>
      </dropdown>
    </div>

    <div class="uip-text-s uip-text-muted uip-margin-bottom-s uip-margin-bottom-s uip-dates">{{returnFormattedDate(startDate)}} - {{returnFormattedDate(endDate)}}</div>

    <div class="uip-margin-bottom-xxs" v-if="showMatomoConnection"><ConnectMatomo :success="refreshAnalytics" /></div>

    <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle  uip-w-100p uip-ratio-16-10 uip-border-box"><loading-chart></loading-chart></div>

    <div
      v-else-if="error && errorMessage"
      class="uip-padding-xs uip-border-round uip-background-orange-wash uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-100p"
      v-html="returnErrrorMessage()"
    ></div>

    <div v-else-if="!returnChartType" class="uip-padding-xxs uip-border-round uip-background-green-wash uip-text-green uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-200">
      {{strings.selectDataMetric}}
    </div>

    <div v-else class="uip-position-relative uip-h-100p uip-w-100p" :class="{'uip-dark-mode' : darkMapTheme || uipApp.data.userPrefs.darkTheme}">
      <div ref="mapcontainer" id="uip-matomo-map" class="uip-matomo-map uip-w-100p uip-h-200"></div>
    </div>
  </div>`},gs={metadata:hs,component:ms},{__:D,_x:hl,_n:ml,_nx:gl}=wp.i18n,fs={name:D("Matomo tables","uipress-pro"),moduleName:"uip-matomo-tables",description:D("Outputs a table summary of selected matomo analytics data","uipress-pro"),category:D("Analytics","uipress-pro"),group:"analytics",premium:!0,path:uipProPath+"assets/js/uip/blocks/analytics/matomo-analytics-tables.min.js",icon:"table",settings:{},optionsEnabled:[{name:"block",label:D("Block options","uipress-pro"),icon:"check_box_outline_blank",options:[{option:"title",componentName:"uip-dynamic-input",uniqueKey:"chartName",label:D("Chart title","uipress-pro"),value:{string:D("Analytics table","uipress-pro")}},{option:"defaultSelect",componentName:"default-select",uniqueKey:"chartDataType",label:D("Chart metric","uipress-pro"),args:{options:[{value:"city_visits",label:D("Visits by City","uipress-pro")},{value:"country_visits",label:D("Visits by Country","uipress-pro")},{value:"traffic_sources",label:D("Visits by source","uipress-pro")},{value:"visits_by_page",label:D("Visits by page","uipress-pro")},{value:"device_visits",label:D("Devices","uipress-pro")}]},value:""},{option:"number",componentName:"uip-number",uniqueKey:"dateRange",label:D("Default date range (days)","uipress-pro"),value:14},{option:"choiceSelect",componentName:"choice-select",uniqueKey:"inlineAccountSwitch",label:D("Switch account option","uipress-pro"),value:{value:!1},args:{options:{false:{value:!1,label:D("Show","uipress-pro")},true:{value:!0,label:D("Hide","uipress-pro")}}}}]},{name:"container",label:D("Block container","uipress-pro"),icon:"crop_free",styleType:"style"},{name:"style",label:D("Style","uipress-pro"),icon:"palette",styleType:"style"},{name:"title",label:D("Table title","uipress-pro"),icon:"title",styleType:"style",class:".uip-chart-title"},{name:"dates",label:D("Dates","uipress-pro"),icon:"date_range",styleType:"style",class:".uip-dates"},{name:"table",label:D("Table","uipress-pro"),icon:"table",styleType:"style",class:".uip-table"},{name:"percentChange",label:D("Percentage change","uipress-pro"),icon:"label",styleType:"style",class:".uip-tag-label"}]},{__:$e,_x:fl,_n:bl,_nx:yl}=wp.i18n,bs={components:{ConnectMatomo:st},props:{display:String,name:String,block:Object},data(){return{loading:!0,rendered:!0,error:!1,apiLoaded:!1,errorMessage:"",total:0,comparisonTotal:0,percentChange:0,fetchingQuery:!1,showMatomoConnection:!1,requestFromGroupDate:!1,currentRequest:!1,startDate:"",endDate:"",currentData:[],groupDate:{},chartData:{labels:{main:[],comparisons:[]}},strings:{lastPeriod:$e("last period","uipress-pro"),selectDataMetric:$e("Please select a chart metric in this block's options to show chart data.","uipress-pro"),changeAccount:$e("Switch account","uipress-pro"),count:$e("Count","uipress-pro"),change:$e("Change","uipress-pro")}}},inject:["uiTemplate"],watch:{"block.settings.block.options.chartDataType":{handler(e,t){this.getAnalytics()},deep:!0},"uipApp.matomoAnalytics":{handler(e,t){e.ready&&this.getAnalytics()},deep:!0,immediate:!0},"uiTemplate.globalSettings.options.analytics.saveAccountToUser":{handler(e,t){this.refreshAnalytics()}}},mounted(){document.addEventListener("uipress/app/daterange/change",this.handleDateChange)},beforeUnmount(){document.removeEventListener("uipress/app/daterange/change",this.handleDateChange)},computed:{returnTableData(){return this.currentData},returnTotal(){return this.total},returnComparisonTotal(){return this.comparisonTotal},returnName(){let e=this.get_block_option(this.block,"block","chartName",!0);return e?(e=this.isObject(e)?e.string:e,e):""},returnChartType(){return this.get_block_option(this.block,"block","chartDataType")},returnChartSettings(){return this.get_block_option(this.block,"block","chartOptions")},returnChartStyle(){let e=this.get_block_option(this.block,"block","chartStyle");return e?(e=this.isObject(e)?e.value:"line",e):"line"},returnLineColor(){let e=this.get_block_option(this.block,"block","chartColour");return e?(e=this.isObject(e)?e.value:e,e):""},returnCompLineColor(){let e=this.get_block_option(this.block,"block","chartCompColour");return e?(e=this.isObject(e)?e.value:e,e):""},hideChart(){let e=this.get_block_option(this.block,"block","hideChart");return e?(e=this.isObject(e)?e.value:e,e):""},inlineAccountSwitch(){let e=this.get_block_option(this.block,"block","inlineAccountSwitch");return e?(e=this.isObject(e)?e.value:e,e):!0},returnRange(){let e=this.get_block_option(this.block,"block","dateRange");return e?(e=isNaN(e)?14:e,e=e>60?60:e,e):14},hasGlobalDate(){return!!this.hasNestedPath(this.groupDate,"start")},isApiReady(){return this.hasNestedPath(this.uipApp,"matomoAnalytics","ready")}},methods:{handleDateChange(e){e.detail.IDS&&Array.isArray(e.detail.IDS)&&e.detail.IDS.includes(this.block.uid)&&(this.groupDate.start=e.detail.groupDate.start,this.groupDate.end=e.detail.groupDate.end,this.getAnalytics())},async getAnalytics(){if(this.resetErrorState(),this.apiLoaded=this.isApiReady,!this.apiLoaded)return;this.loading=!0;const{startDate:e,endDate:t}=this.calculateDateRange(),i=await this.fetchAnalyticsData(e,t);i.error?this.handleApiError(i):(this.currentRequest=i,this.processResponse(i)),this.loading=!1},resetErrorState(){this.error=!1,this.errorMessage="",this.showMatomoConnection=!1},calculateDateRange(){let e,t;return this.hasGlobalDate?(e=new Date(Date.parse(this.groupDate.start)),t=new Date(Date.parse(this.groupDate.end))):(t=new Date,t.setDate(t.getDate()-1),e=new Date,e.setDate(e.getDate()-this.returnRange)),this.startDate=e,this.endDate=t,{startDate:e,endDate:t}},async fetchAnalyticsData(e,t){return await this.uipApp.matomoAnalytics.api("get",e,t)},handleApiError(e){this.error=!0,this.errorMessage=e.message,e.type==="no_account"&&(this.showMatomoConnection=!0)},processResponse(){let e=this.currentRequest,t=this.returnChartType;if(this.matomoPath=this.currentRequest.matomoPath,!t)return;let i=[];for(let[a,s]of e.reports[t].entries()){s.change=s.nb_visits*100;let r=e.reports_comparison[t][a];if(r){let n=r.nb_visits,o=s.nb_visits;n!=0&&o!=0&&(s.change=(o/n*100).toFixed(2))}i.push(s)}this.currentData=i},async removeAnalyticsAccount(){this.uipApp.matomoAnalytics.ready=!1,await this.uipApp.matomoAnalytics.api("removeAccount"),await this.uipApp.matomoAnalytics.api("refresh"),this.uipApp.matomoAnalytics.ready=!0,this.getAnalytics()},secondsToTime(e){if(isNaN(e)||e<0)return"0m 0s";const t=Math.floor(e/60).toString().padStart(2,"0"),i=(e%60).toString().padStart(2,"0");return`${t}m ${i}s`},async refreshAnalytics(){this.uipApp.matomoAnalytics.ready=!1,await this.uipApp.matomoAnalytics.api("refresh")&&(this.uipApp.matomoAnalytics.ready=!0,this.getAnalytics())},returnFormattedDate(e){if(!e)return"";const t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}/${i}/${a}`},returnErrrorMessage(){try{JSON.parse(this.errorMessage)}catch{return this.errorMessage}if(this.isObject(JSON.parse(this.errorMessage))){let e=JSON.parse(this.errorMessage);return`
              <h5 style="margin:0">${e.status}</h5>
              <p style="margin-bottom:0;">${e.message}</p>
            `}return this.errorMessage}},template:d`
    <div class="uip-flex uip-flex-column uip-text-normal">
      <!-- Header -->
      <div class="uip-flex uip-flex-between">
        <!--Chart title-->
        <div class="uip-margin-bottom-xxs uip-text-normal uip-chart-title">{{returnName}}</div>

        <!-- Account switcher-->
        <dropdown pos="bottom right" v-if="!inlineAccountSwitch && !showMatomoConnection">
          <template v-slot:trigger>
            <AppIcon icon="more_horiz" class="uip-link-muted uip-text-l" />
          </template>
          <template v-slot:content>
            <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-padding-xxxs uip-link-muted" @click="removeAnalyticsAccount()">
              <AppIcon icon="sync" />
              <div class="uip-padding-xxs">{{strings.changeAccount}}</div>
            </div>
          </template>
        </dropdown>
      </div>

      <div class="uip-text-s uip-text-muted uip-margin-bottom-s uip-margin-bottom-s uip-dates">{{returnFormattedDate(startDate)}} - {{returnFormattedDate(endDate)}}</div>
      <div class="uip-margin-bottom-xxs" v-if="showMatomoConnection"><ConnectMatomo :success="refreshAnalytics" /></div>
      <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle uip-min-w-200 uip-w-100p uip-ratio-16-10 uip-border-box"><loading-chart /></div>
      <div
        v-else-if="error && errorMessage"
        class="uip-padding-xs uip-border-round uip-background-orange-wash uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-100p"
        v-html="returnErrrorMessage()"
      ></div>
      <div v-else-if="!returnChartType" class="uip-padding-xxs uip-border-round uip-background-green-wash uip-text-green uip-text-bold uip-margin-bottom-s uip-scale-in-top uip-max-w-200">
        {{strings.selectDataMetric}}
      </div>

      <table v-else class="uip-min-w-250 uip-w-100p uip-table">
        <thead>
          <tr class="">
            <th class="uip-padding-bottom-xxs"></th>
            <th class="uip-text-muted uip-text-weight-normal uip-text-right uip-padding-bottom-xxs">{{strings.count}}</th>
            <th class="uip-text-right uip-text-muted uip-text-weight-normal uip-padding-bottom-xxs">{{strings.change}}</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="item in currentData">
            <td class="uip-text-bold uip-padding-bottom-xxs uip-flex uip-gap-xs uip-flex-center">
              <img v-if="item.logo" :src="matomoPath + item.logo" class="uip-h-12 uip-border-rounder" />
              <span>{{item.label}}</span>
            </td>
            <td class="uip-text-right uip-padding-bottom-xxs">{{item.nb_visits}}</td>
            <td class="uip-text-right uip-padding-bottom-xxs">
              <div class="uip-text-s uip-background-orange-wash uip-border-round uip-padding-xxxs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label uip-inline-flex">
                <AppIcon v-if="item.change > 0" icon="arrow_upward" class="uip-text-danger" />
                <AppIcon v-if="item.change < 0" icon="arrow_downward" class="uip-text-danger" />
                <span class="uip-percentage-value">{{item.change}}</span>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  `},ys={metadata:fs,component:bs},vs=()=>[Pt,$t,It,Bt,Gt,Wt,Xt,ii,ri,li,pa,ha,ba,_a,Da,Sa,Pa,La,Oa,ja,Ua,Ha,Ja,Qa,es,as,ns,ps,ds,gs,ys],xs='{"timeline":{"report":{"dates":["05/06/2023","06/06/2023","07/06/2023","08/06/2023","09/06/2023","10/06/2023","11/06/2023","12/06/2023","13/06/2023","14/06/2023","15/06/2023","16/06/2023","17/06/2023","18/06/2023"],"data":[{"date":"05/06/2023","dateRange":"report","sessions":"154","totalUsers":"126","screenPageViews":"247","engagementRate":"0.51948051948051943","userEngagementDuration":"4254","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"06/06/2023","dateRange":"report","sessions":"139","totalUsers":"119","screenPageViews":"230","engagementRate":"0.48920863309352519","userEngagementDuration":"3330","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"07/06/2023","dateRange":"report","sessions":"162","totalUsers":"137","screenPageViews":"247","engagementRate":"0.59259259259259256","userEngagementDuration":"5628","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"08/06/2023","dateRange":"report","sessions":"153","totalUsers":"124","screenPageViews":"247","engagementRate":"0.56209150326797386","userEngagementDuration":"3754","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"09/06/2023","dateRange":"report","sessions":"129","totalUsers":"103","screenPageViews":"175","engagementRate":"0.58914728682170547","userEngagementDuration":"2763","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"10/06/2023","dateRange":"report","sessions":"113","totalUsers":"96","screenPageViews":"178","engagementRate":"0.65486725663716816","userEngagementDuration":"4328","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"11/06/2023","dateRange":"report","sessions":"134","totalUsers":"99","screenPageViews":"252","engagementRate":"0.61940298507462688","userEngagementDuration":"5019","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"12/06/2023","dateRange":"report","sessions":"149","totalUsers":"122","screenPageViews":"222","engagementRate":"0.59731543624161076","userEngagementDuration":"3803","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"13/06/2023","dateRange":"report","sessions":"173","totalUsers":"133","screenPageViews":"297","engagementRate":"0.60693641618497107","userEngagementDuration":"4550","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"14/06/2023","dateRange":"report","sessions":"156","totalUsers":"123","screenPageViews":"258","engagementRate":"0.61538461538461542","userEngagementDuration":"7191","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"15/06/2023","dateRange":"report","sessions":"154","totalUsers":"125","screenPageViews":"266","engagementRate":"0.5714285714285714","userEngagementDuration":"4261","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"16/06/2023","dateRange":"report","sessions":"135","totalUsers":"112","screenPageViews":"238","engagementRate":"0.54814814814814816","userEngagementDuration":"7095","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"17/06/2023","dateRange":"report","sessions":"83","totalUsers":"71","screenPageViews":"172","engagementRate":"0.63855421686746983","userEngagementDuration":"2962","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"18/06/2023","dateRange":"report","sessions":"90","totalUsers":"73","screenPageViews":"141","engagementRate":"0.64444444444444449","userEngagementDuration":"2471","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"}],"timeline":{"sessions":["154","139","162","153","129","113","134","149","173","156","154","135","83","90"],"totalUsers":["126","119","137","124","103","96","99","122","133","123","125","112","71","73"],"screenPageViews":["247","230","247","247","175","178","252","222","297","258","266","238","172","141"],"engagementRate":["0.51948051948051943","0.48920863309352519","0.59259259259259256","0.56209150326797386","0.58914728682170547","0.65486725663716816","0.61940298507462688","0.59731543624161076","0.60693641618497107","0.61538461538461542","0.5714285714285714","0.54814814814814816","0.63855421686746983","0.64444444444444449"],"userEngagementDuration":["4254","3330","5628","3754","2763","4328","5019","3803","4550","7191","4261","7095","2962","2471"],"totalRevenue":["0","0","0","0","0","0","0","0","0","0","0","0","0","0"],"addToCarts":["0","0","0","0","0","0","0","0","0","0","0","0","0","0"],"checkouts":["0","0","0","0","0","0","0","0","0","0","0","0","0","0"],"ecommercePurchases":["0","0","0","0","0","0","0","0","0","0","0","0","0","0"],"purchaserConversionRate":["0","0","0","0","0","0","0","0","0","0","0","0","0","0"]},"totals":{"sessions":1924,"totalUsers":1563,"screenPageViews":3170,"engagementRate":8.249002625667943,"userEngagementDuration":61409,"totalRevenue":0,"addToCarts":0,"checkouts":0,"ecommercePurchases":0,"purchaserConversionRate":0},"totals_change":{"sessions":"-9.07","totalUsers":"-7.95","screenPageViews":"-10.38","engagementRate":"-4.85","userEngagementDuration":"-14.81","totalRevenue":0,"addToCarts":0,"checkouts":0,"ecommercePurchases":0,"purchaserConversionRate":0}},"report_comparison":{"dates":["21/05/2023","22/05/2023","23/05/2023","24/05/2023","25/05/2023","26/05/2023","27/05/2023","28/05/2023","29/05/2023","30/05/2023","31/05/2023","01/06/2023","02/06/2023","03/06/2023","04/06/2023"],"data":[{"date":"21/05/2023","dateRange":"report_comparison","sessions":"93","totalUsers":"76","screenPageViews":"138","engagementRate":"0.54838709677419351","userEngagementDuration":"2092","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"22/05/2023","dateRange":"report_comparison","sessions":"133","totalUsers":"113","screenPageViews":"222","engagementRate":"0.631578947368421","userEngagementDuration":"4016","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"23/05/2023","dateRange":"report_comparison","sessions":"169","totalUsers":"125","screenPageViews":"262","engagementRate":"0.54437869822485208","userEngagementDuration":"4732","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"24/05/2023","dateRange":"report_comparison","sessions":"159","totalUsers":"133","screenPageViews":"266","engagementRate":"0.57861635220125784","userEngagementDuration":"4946","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"25/05/2023","dateRange":"report_comparison","sessions":"160","totalUsers":"130","screenPageViews":"245","engagementRate":"0.53125","userEngagementDuration":"3880","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"26/05/2023","dateRange":"report_comparison","sessions":"165","totalUsers":"132","screenPageViews":"280","engagementRate":"0.60606060606060608","userEngagementDuration":"4986","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"27/05/2023","dateRange":"report_comparison","sessions":"117","totalUsers":"91","screenPageViews":"235","engagementRate":"0.59829059829059827","userEngagementDuration":"10299","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"28/05/2023","dateRange":"report_comparison","sessions":"126","totalUsers":"95","screenPageViews":"251","engagementRate":"0.63492063492063489","userEngagementDuration":"5488","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"29/05/2023","dateRange":"report_comparison","sessions":"175","totalUsers":"138","screenPageViews":"310","engagementRate":"0.59428571428571431","userEngagementDuration":"7335","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"30/05/2023","dateRange":"report_comparison","sessions":"177","totalUsers":"143","screenPageViews":"313","engagementRate":"0.54802259887005644","userEngagementDuration":"5659","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"31/05/2023","dateRange":"report_comparison","sessions":"162","totalUsers":"124","screenPageViews":"236","engagementRate":"0.55555555555555558","userEngagementDuration":"3687","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"01/06/2023","dateRange":"report_comparison","sessions":"146","totalUsers":"120","screenPageViews":"238","engagementRate":"0.59589041095890416","userEngagementDuration":"5497","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"02/06/2023","dateRange":"report_comparison","sessions":"152","totalUsers":"129","screenPageViews":"250","engagementRate":"0.625","userEngagementDuration":"4099","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"03/06/2023","dateRange":"report_comparison","sessions":"92","totalUsers":"72","screenPageViews":"161","engagementRate":"0.532608695652174","userEngagementDuration":"2644","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"},{"date":"04/06/2023","dateRange":"report_comparison","sessions":"90","totalUsers":"77","screenPageViews":"130","engagementRate":"0.5444444444444444","userEngagementDuration":"2722","totalRevenue":"0","addToCarts":"0","checkouts":"0","ecommercePurchases":"0","purchaserConversionRate":"0"}],"timeline":{"sessions":["93","133","169","159","160","165","117","126","175","177","162","146","152","92","90"],"totalUsers":["76","113","125","133","130","132","91","95","138","143","124","120","129","72","77"],"screenPageViews":["138","222","262","266","245","280","235","251","310","313","236","238","250","161","130"],"engagementRate":["0.54838709677419351","0.631578947368421","0.54437869822485208","0.57861635220125784","0.53125","0.60606060606060608","0.59829059829059827","0.63492063492063489","0.59428571428571431","0.54802259887005644","0.55555555555555558","0.59589041095890416","0.625","0.532608695652174","0.5444444444444444"],"userEngagementDuration":["2092","4016","4732","4946","3880","4986","10299","5488","7335","5659","3687","5497","4099","2644","2722"],"totalRevenue":["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],"addToCarts":["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],"checkouts":["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],"ecommercePurchases":["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],"purchaserConversionRate":["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"]},"totals":{"sessions":2116,"totalUsers":1698,"screenPageViews":3537,"engagementRate":8.669290353607412,"userEngagementDuration":72082,"totalRevenue":0,"addToCarts":0,"checkouts":0,"ecommercePurchases":0,"purchaserConversionRate":0}}},"devices":{"report":{"data":[{"name":"desktop","value":"2658","screenPageViews":"2658","value_comp":"3097","change":"-14.18","percent_total":"83.85"},{"name":"mobile","value":"454","screenPageViews":"454","value_comp":"421","change":"7.84","percent_total":"14.32"},{"name":"tablet","value":"58","screenPageViews":"58","value_comp":"19","change":"205.26","percent_total":"1.83"}]}},"countries":{"report":{"data":[{"name":"United States","value":"297","sessions":"297","value_comp":"386","change":"-23.06","percent_total":"28.21"},{"name":"Brazil","value":"153","sessions":"153","value_comp":"192","change":"-20.31","percent_total":"14.53"},{"name":"United Kingdom","value":"125","sessions":"125","value_comp":"125","change":"0.00","percent_total":"11.87"},{"name":"India","value":"118","sessions":"118","value_comp":"112","change":"5.36","percent_total":"11.21"},{"name":"Indonesia","value":"94","sessions":"94","value_comp":"83","change":"13.25","percent_total":"8.93"},{"name":"France","value":"68","sessions":"68","value_comp":"49","change":"38.78","percent_total":"6.46"},{"name":"China","value":"57","sessions":"57","value_comp":"56","change":"1.79","percent_total":"5.41"},{"name":"Germany","value":"56","sessions":"56","value_comp":"27","change":"107.41","percent_total":"5.32"},{"name":"Canada","value":"46","sessions":"46","value_comp":"43","change":"6.98","percent_total":"4.37"},{"name":"Morocco","value":"39","sessions":"39","value_comp":"44","change":"-11.36","percent_total":"3.70"}]}},"paths":{"report":{"data":[{"name":"/","value":"1454","sessions":"1454","value_comp":"1632","change":"-10.91","percent_total":"61.90"},{"name":"/pricing/","value":"475","sessions":"475","value_comp":"493","change":"-3.65","percent_total":"20.22"},{"name":"/uipresschangelog/","value":"112","sessions":"112","value_comp":"112","change":"0.00","percent_total":"4.77"},{"name":"/admin-2-is-here/","value":"104","sessions":"104","value_comp":"98","change":"6.12","percent_total":"4.43"},{"name":"/wpcs-a-powerful-platform-for-saas-and-waas/","value":"55","sessions":"55","value_comp":"85","change":"-35.29","percent_total":"2.34"},{"name":"/user-management-and-activity-logs/","value":"42","sessions":"42","value_comp":"50","change":"-16.00","percent_total":"1.79"},{"name":"/uipress-3-faq/","value":"37","sessions":"37","value_comp":"45","change":"-17.78","percent_total":"1.58"},{"name":"/pricing","value":"26","sessions":"26","value_comp":"28","change":"-7.14","percent_total":"1.11"},{"name":"/latest-news/","value":"24","sessions":"24","value_comp":"33","change":"-27.27","percent_total":"1.02"},{"name":"/the-theme-library-is-now-live/","value":"20","sessions":"20","value_comp":"23","change":"-13.04","percent_total":"0.85"}]}},"events":{"report":{"data":[{"name":"page_view","value":"3170","eventCount":"3170","value_comp":"3537","change":"-10.38","percent_total":"33.05"},{"name":"user_engagement","value":"2136","eventCount":"2136","value_comp":"2354","change":"-9.26","percent_total":"22.27"},{"name":"session_start","value":"1917","eventCount":"1917","value_comp":"2108","change":"-9.06","percent_total":"19.99"},{"name":"first_visit","value":"1150","eventCount":"1150","value_comp":"1227","change":"-6.28","percent_total":"11.99"},{"name":"click","value":"754","eventCount":"754","value_comp":"945","change":"-20.21","percent_total":"7.86"},{"name":"scroll","value":"465","eventCount":"465","value_comp":"540","change":"-13.89","percent_total":"4.85"}]}},"channels":{"report":{"data":[{"name":"Organic Search","value":"962","sessions":"962","value_comp":"1064","change":"-9.59","percent_total":"50.00"},{"name":"Direct","value":"465","sessions":"465","value_comp":"467","change":"-0.43","percent_total":"24.17"},{"name":"Referral","value":"367","sessions":"367","value_comp":"413","change":"-11.14","percent_total":"19.07"},{"name":"Organic Video","value":"104","sessions":"104","value_comp":"142","change":"-26.76","percent_total":"5.41"},{"name":"Organic Social","value":"17","sessions":"17","value_comp":"21","change":"-19.05","percent_total":"0.88"},{"name":"Unassigned","value":"9","sessions":"9","value_comp":"5","change":"80.00","percent_total":"0.47"},{"name":"Mobile Push Notifications","value":"0","sessions":"0","value_comp":"1","change":"-100.00","percent_total":"0.00"}]}},"sources":{"report":{"data":[{"name":"google","value":"909","sessions":"909","value_comp":"1033","change":"-12.00","percent_total":"55.06"},{"name":"(direct)","value":"465","sessions":"465","value_comp":"467","change":"-0.43","percent_total":"28.16"},{"name":"youtube.com","value":"102","sessions":"102","value_comp":"142","change":"-28.17","percent_total":"6.18"},{"name":"uipressupgrade","value":"57","sessions":"57","value_comp":"80","change":"-28.75","percent_total":"3.45"},{"name":"lolinez.com","value":"36","sessions":"36","value_comp":"43","change":"-16.28","percent_total":"2.18"},{"name":"baidu","value":"20","sessions":"20","value_comp":"6","change":"233.33","percent_total":"1.21"},{"name":"bing","value":"20","sessions":"20","value_comp":"14","change":"42.86","percent_total":"1.21"},{"name":"uipresslogin","value":"15","sessions":"15","value_comp":"15","change":"0.00","percent_total":"0.91"},{"name":"weddingpress.net","value":"14","sessions":"14","value_comp":"12","change":"16.67","percent_total":"0.85"},{"name":"worldpressit.com","value":"13","sessions":"13","value_comp":"27","change":"-51.85","percent_total":"0.79"}]}},"active_now":{"report":{"dates":["17","01","15","23","25","26"],"data":[{"minutesAgo":"17","activeUsers":"2","conversions":"0","screenPageViews":"2"},{"minutesAgo":"01","activeUsers":"1","conversions":"0","screenPageViews":"1"},{"minutesAgo":"15","activeUsers":"1","conversions":"0","screenPageViews":"0"},{"minutesAgo":"23","activeUsers":"1","conversions":"0","screenPageViews":"0"},{"minutesAgo":"25","activeUsers":"1","conversions":"0","screenPageViews":"0"},{"minutesAgo":"26","activeUsers":"0","conversions":"0","screenPageViews":"1"}],"timeline":{"activeUsers":["2","1","1","1","1","0"],"conversions":["0","0","0","0","0","0"],"screenPageViews":["2","1","0","0","0","1"]},"totals":{"activeUsers":6,"conversions":0,"screenPageViews":4}}},"new_returning":{"report":{"data":[{"name":"new","value":"2155","screenPageViews":"2155","value_comp":"2275","change":"-5.27","percent_total":"67.98"},{"name":"returning","value":"940","screenPageViews":"940","value_comp":"1170","change":"-19.66","percent_total":"29.65"},{"name":"(not set)","value":"75","screenPageViews":"75","value_comp":"92","change":"-18.48","percent_total":"2.37"}]}},"cities":{"report":{"data":[{"name":"(not set)","value":"256","sessions":"256","value_comp":"326","change":"-21.47","percent_total":"57.02"},{"name":"London","value":"45","sessions":"45","value_comp":"48","change":"-6.25","percent_total":"10.02"},{"name":"Sao Paulo","value":"26","sessions":"26","value_comp":"16","change":"62.50","percent_total":"5.79"},{"name":"Nenagh","value":"23","sessions":"23","value_comp":"7","change":"228.57","percent_total":"5.12"},{"name":"Dhaka","value":"21","sessions":"21","value_comp":"14","change":"50.00","percent_total":"4.68"},{"name":"Sale","value":"21","sessions":"21","value_comp":"19","change":"10.53","percent_total":"4.68"},{"name":"Paris","value":"20","sessions":"20","value_comp":"11","change":"81.82","percent_total":"4.45"},{"name":"Jakarta","value":"19","sessions":"19","value_comp":"28","change":"-32.14","percent_total":"4.23"},{"name":"Miami","value":"11","sessions":"11","value_comp":"49","change":"-77.55","percent_total":"2.45"},{"name":"New York","value":"7","sessions":"7","value_comp":"22","change":"-68.18","percent_total":"1.56"}]}},"products":{"report":{"data":[]}},"gafour":true,"access_token":"49bbe240fca6025dc87b4ea7c5dfc17251135cf8"}',{__:Je,_x:vl,_n:xl,_nx:_l}=wp.i18n,_s={data(){return{ready:!1,hasAccount:!1,hasLicence:!1,queryURL:!1,reportRunning:!1,token:!1,saveAccountToUser:!1,cache:{},queue:[],dev:!1,fetchingQueryUrl:!1}},inject:["uiTemplate"],watch:{ready:{handler(e,t){this.uipApp.googleAnalytics.ready=this.returnStatus},deep:!0},"uiTemplate.globalSettings.options.analytics.saveAccountToUser":{handler(e,t){this.getQueryURL()}}},async mounted(){await this.$nextTick(),this.createQueue(),this.pushToGlobal()},computed:{returnStatus(){return this.ready},returnAccountOnUser(){return typeof this.uiTemplate.globalSettings.options>"u"?!1:this.hasNestedPath(this.uiTemplate,"globalSettings","options","analytics","saveAccountToUser")}},methods:{createQueue(){const e=(t,i)=>{const a=[],s=()=>{a[0]&&a[0]().then(function(n){return n}).catch(i).then(()=>a.shift()).then(s).then()};return async n=>{if(a.push(n),a.length===1)return new Promise((o,p)=>{s()})}};this.queue=e()},async pushToGlobal(){this.uipApp.googleAnalytics={api:this.uipAnalytics,ready:this.returnStatus},await this.$nextTick(),this.ready=!0},async uipAnalytics(e,t,i){if(this.queryURL||await this.getQueryURL(),e=="refresh")return await new Promise((a,s)=>{this.getQueryURL(a)});if(!this.hasAccount){let a={};return a.error=!0,a.message=Je("No google account connected","uipress-pro"),a.type="no_account",a}if(!this.hasLicence){let a={};return a.error=!0,a.message=Je("No pro licence found. Please add a valid pro licence to use google analytics","uipress-pro"),a.type="no_licence",a}if(e=="get"){const a=this.getDates(t,i),s=(r,n)=>new Promise((o,p)=>this.runReport(r,o,n));return await new Promise((r,n)=>{this.queue(()=>s(a,r))})}if(e=="removeAccount")return await new Promise((a,s)=>{this.removeAnalyticsAccount(a)})},async getQueryURL(e){if(this.fetchingQueryUrl){typeof e<"u"&&e(!1);return}this.fetchingQueryUrl=!0,this.cache={},this.saveAccountToUser=this.returnAccountOnUser,this.hasAccount=!1,this.hasLicence=!1,this.ready=!1,this.queryURL=!1;let t=new FormData;t.append("action","uip_build_google_analytics_query"),t.append("security",uip_ajax.security),t.append("saveAccountToUser",this.saveAccountToUser);const i=await this.sendServerRequest(uip_ajax.ajax_url,t);return this.ready=!0,this.uipApp.googleAnalytics.ready=!0,this.fetchingQueryUrl=!1,i.error?(i.error_type=="no_google"&&(this.hasAccount=!1,this.queryURL="no_google"),i.error_type=="no_licence"&&(this.hasLicence=!1,this.queryURL="no_licence"),typeof e<"u"&&(e(!1),this.queryURL="undefined"),!1):(this.hasAccount=!0,this.hasLicence=!0,this.queryURL=i.url,typeof e<"u"&&e(!0),!0)},async runReport(e,t,i){let a=`&sd=${e.startDate}&ed=${e.endDate}&sdc=${e.startDateCom}&edc=${e.endDateCom}`,s=this.queryURL+a;if(this.cache[e.startDate+e.endDate]){t(!0),i(this.cache[e.startDate+e.endDate]);return}this.reportRunning=!0;let r=new FormData;if(this.uiTemplate.display!="prod"){t(!0),i(JSON.parse(xs));return}const n=await this.sendServerRequest(s,r);if(this.reportRunning=!1,n.error){const o=n.message,p=Je("Unable to fetch analytic data");this.uipApp.notifications.notify(p,o,"error",!0,!1),t(!0),i(n)}n.access_token&&this.saveToken(n.access_token),this.cache[e.startDate+e.endDate]=n,t(!0),i(n)},async saveToken(e){if(!e||e==this.token)return;let t=new FormData;t.append("action","uip_save_access_token"),t.append("security",uip_ajax.security),t.append("token",e),t.append("saveAccountToUser",this.saveAccountToUser);const i=await this.sendServerRequest(uip_ajax.ajax_url,t);i.error?this.uipApp.notifications.notify(i.message,"","error",!0,!1):this.token=e},getDates(e,t){let i=this.daysDifference(e,t),a={};return a.startDate=this.returnFormattedDate(e),a.endDate=this.returnFormattedDate(t),e.setDate(e.getDate()-1),a.endDateCom=this.returnFormattedDate(e),e.setDate(e.getDate()-i),a.startDateCom=this.returnFormattedDate(e),a},returnFormattedDate(e){let t=e.getMonth()+1,i=e.getDate(),a=e.getFullYear();return t<10&&(t="0"+t),i<10&&(i="0"+i),a+"-"+t+"-"+i},daysDifference(e,t){const i=t.getTime()-e.getTime(),a=1e3*60*60*24;return Math.round(i/a)+1},async removeAnalyticsAccount(e){let t=new FormData;t.append("action","uip_remove_analytics_account"),t.append("security",uip_ajax.security),t.append("saveAccountToUser",this.saveAccountToUser);const i=await this.sendServerRequest(uip_ajax.ajax_url,t);if(i.error){this.uipApp.notifications.notify(i.message,"","error",!0,!1),e(!1);return}this.getQueryURL(),e(!0)}}},{__:ze,_x:wl,_n:kl,_nx:Dl}=wp.i18n,ws={data(){return{ready:!1,hasAccount:!1,hasLicence:!1,queryURL:!1,reportRunning:!1,token:!1,saveAccountToUser:!1,cache:{},queue:[],dev:!1,fathomPath:""}},inject:["uiTemplate"],watch:{ready:{handler(e,t){this.uipApp.fathomAnalytics.ready=this.returnStatus},deep:!0},"uiTemplate.globalSettings.options.analytics.saveAccountToUser":{handler(e,t){this.startSetup()}}},async mounted(){await this.$nextTick(),this.createQueue(),this.pushToGlobal()},computed:{returnStatus(){return this.ready},returnAccountOnUser(){return typeof this.uiTemplate.globalSettings.options>"u"?!1:this.hasNestedPath(this.uiTemplate,"globalSettings","options","analytics","saveAccountToUser")}},methods:{createQueue(){const e=(t,i)=>{const a=[],s=()=>{a[0]&&a[0]().then(function(n){return n}).catch(i).then(()=>a.shift()).then(s).then()};return async n=>{if(a.push(n),a.length===1)return new Promise((o,p)=>{s()})}};this.queue=e()},async pushToGlobal(){this.uiTemplate.fathomAnalytics={},this.uiTemplate.fathomAnalytics.api=this.uipFathomAnalytics,this.uiTemplate.fathomAnalytics.ready=this.returnStatus,this.uipApp.fathomAnalytics={api:this.uipFathomAnalytics,ready:this.returnStatus},await this.$nextTick(),this.ready=!0},async uipFathomAnalytics(e,t,i){if(this.queryURL||await this.getQueryURL(),e=="refresh")return await new Promise((a,s)=>{this.getQueryURL(a)});if(!this.hasAccount){let a={};return a.error=!0,a.message=ze("No fathom account connected","uipress-pro"),a.type="no_account",a}if(!this.hasLicence){let a={};return a.error=!0,a.message=ze("No pro licence found. Please add a valid pro licence to use google analytics","uipress-pro"),a.type="no_licence",a}if(e=="get"){const a=this.getDates(t,i),s=(r,n)=>new Promise((o,p)=>this.runReport(r,o,n));return await new Promise((r,n)=>{this.queue(()=>s(a,r))})}if(e=="removeAccount")return await new Promise((a,s)=>{this.removeAnalyticsAccount(a)})},startSetup(){this.getQueryURL()},async getQueryURL(e){this.cache={},this.saveAccountToUser=this.returnAccountOnUser,this.hasAccount=!1,this.hasLicence=!1,this.ready=!1,this.queryURL=!1;let t=new FormData;t.append("action","uip_build_fathom_analytics_query"),t.append("security",uip_ajax.security),t.append("saveAccountToUser",this.saveAccountToUser);const i=await this.sendServerRequest(uip_ajax.ajax_url,t);return this.ready=!0,i.error?(i.error_type=="no_fathom"&&(this.hasAccount=!1,this.queryURL="no_fathom"),i.error_type=="no_licence"&&(this.hasLicence=!1,this.queryURL="no_licence"),typeof e<"u"&&(e(!1),this.queryURL="undefined"),!1):(this.hasAccount=!0,this.hasLicence=!0,this.queryURL=i.url,this.fathomPath=i.fathomPath,typeof e<"u"&&e(!0),!0)},async runReport(e,t,i){let a=`&sd=${e.startDate}&ed=${e.endDate}&sdc=${e.startDateCom}&edc=${e.endDateCom}`,s=this.queryURL+a;if(this.cache[e.startDate+e.endDate]){t(!0),i(this.cache[e.startDate+e.endDate]);return}this.reportRunning=!0;let r=new FormData;const n=await this.sendServerRequest(s,r);if(this.reportRunning=!1,n.error){let o=n.message,p=ze("Unable to fetch analytic data","uipress-lite");this.uipApp.notifications.notify(p,o,"error",!0,!1),t(!0),i(n)}n.access_token&&this.saveToken(n.access_token),this.cache[e.startDate+e.endDate]=n,n.fathomPath=this.fathomPath,t(!0),i(n)},async saveToken(e){if(!e||e==this.toke)return;let t=new FormData;t.append("action","uip_save_fathom_access_token"),t.append("security",uip_ajax.security),t.append("token",e),t.append("saveAccountToUser",this.saveAccountToUser);const i=await this.sendServerRequest(uip_ajax.ajax_url,t);i.error?this.uipApp.notifications.notify(i.message,"","error",!0,!1):this.token=e},getDates(e,t){let i=this.daysDifference(e,t),a={};return a.startDate=this.returnFormattedDate(e),a.endDate=this.returnFormattedDate(t),e.setDate(e.getDate()-1),a.endDateCom=this.returnFormattedDate(e),e.setDate(e.getDate()-i),a.startDateCom=this.returnFormattedDate(e),a},returnFormattedDate(e){let t=e.getMonth()+1,i=e.getDate(),a=e.getFullYear();return t<10&&(t="0"+t),i<10&&(i="0"+i),a+"-"+t+"-"+i},daysDifference(e,t){let i=t.getTime()-e.getTime(),a=1e3*60*60*24;return Math.round(i/a)+1},async removeAnalyticsAccount(e){let t=new FormData;t.append("action","uip_remove_fathom_analytics_account"),t.append("security",uip_ajax.security),t.append("saveAccountToUser",this.saveAccountToUser);const i=await this.sendServerRequest(uip_ajax.ajax_url,t);if(i.error){this.uipApp.notifications.notify(i.message,"","error",!0,!1),e(!1);return}this.getQueryURL(),e(!0)}}},{__:We,_x:Al,_n:Cl,_nx:Sl}=wp.i18n,ks={data(){return{ready:!1,hasAccount:!1,hasLicence:!1,queryURL:!1,reportRunning:!1,token:!1,saveAccountToUser:!1,cache:{},queue:[],dev:!1,matomoPath:""}},inject:["uiTemplate"],watch:{ready:{handler(e,t){this.uipApp.matomoAnalytics.ready=this.returnStatus},deep:!0},"uiTemplate.globalSettings.options.analytics.saveAccountToUser":{handler(e,t){this.startSetup()}}},async mounted(){await this.$nextTick(),this.createQueue(),this.pushToGlobal()},computed:{returnStatus(){return this.ready},returnAccountOnUser(){return typeof this.uiTemplate.globalSettings.options>"u"?!1:this.hasNestedPath(this.uiTemplate,"globalSettings","options","analytics","saveAccountToUser")}},methods:{createQueue(){const e=(t,i)=>{const a=[],s=()=>{a[0]&&a[0]().then(function(n){return n}).catch(i).then(()=>a.shift()).then(s).then()};return async n=>{if(a.push(n),a.length===1)return new Promise((o,p)=>{s()})}};this.queue=e()},async pushToGlobal(){this.uipApp.matomoAnalytics={api:this.uipMatomoAnalytics,ready:this.returnStatus},await this.$nextTick(),this.ready=!0},async uipMatomoAnalytics(e,t,i){if(this.queryURL||await this.getQueryURL(),e=="refresh")return await new Promise((a,s)=>{this.getQueryURL(a)});if(!this.hasAccount){let a={};return a.error=!0,a.message=We("No matomo account connected","uipress-pro"),a.type="no_account",a}if(!this.hasLicence){let a={};return a.error=!0,a.message=We("No pro licence found. Please add a valid pro licence to use google analytics","uipress-pro"),a.type="no_licence",a}if(e=="get"){const a=this.getDates(t,i),s=(r,n)=>new Promise((o,p)=>this.runReport(r,o,n));return await new Promise((r,n)=>{this.queue(()=>s(a,r))})}if(e=="removeAccount")return await new Promise((a,s)=>{this.removeAnalyticsAccount(a)})},startSetup(){this.getQueryURL()},async getQueryURL(e){this.cache={},this.saveAccountToUser=this.returnAccountOnUser,this.hasAccount=!1,this.hasLicence=!1,this.ready=!1,this.queryURL=!1;let t=new FormData;t.append("action","uip_build_matomo_analytics_query"),t.append("security",uip_ajax.security),t.append("saveAccountToUser",this.saveAccountToUser);const i=await this.sendServerRequest(uip_ajax.ajax_url,t);return this.ready=!0,i.error?(i.error_type=="no_matomo"&&(this.hasAccount=!1,this.queryURL="no_matomo"),i.error_type=="no_licence"&&(this.hasLicence=!1,this.queryURL="no_licence"),typeof e<"u"&&(e(!1),this.queryURL="undefined"),!1):(this.hasAccount=!0,this.hasLicence=!0,this.queryURL=i.url,this.matomoPath=i.matomoPath,typeof e<"u"&&e(!0),!0)},async runReport(e,t,i){let a=`&sd=${e.startDate}&ed=${e.endDate}&sdc=${e.startDateCom}&edc=${e.endDateCom}`,s=this.queryURL+a;if(this.cache[e.startDate+e.endDate]){t(!0),i(this.cache[e.startDate+e.endDate]);return}this.reportRunning=!0;let r=new FormData;const n=await this.sendServerRequest(s,r);if(this.reportRunning=!1,n.error){const o=n.message,p=We("Unable to fetch analytic data","uipress-pro");this.uipApp.notifications.notify(p,o,"error",!0,!1),t(!0),i(n)}n.access_token&&this.saveToken(n.access_token),this.cache[e.startDate+e.endDate]=n,n.matomoPath=this.matomoPath,t(!0),i(n)},async saveToken(e){if(!e||e==this.token)return;let t=new FormData;t.append("action","uip_save_matomo_access_token"),t.append("security",uip_ajax.security),t.append("token",e),t.append("saveAccountToUser",this.saveAccountToUser);const i=await this.sendServerRequest(uip_ajax.ajax_url,t);i.error?this.uipApp.notifications.notify(i.message,"","error",!0,!1):this.token=e},getDates(e,t){let i=this.daysDifference(e,t),a={};return a.startDate=this.returnFormattedDate(e),a.endDate=this.returnFormattedDate(t),e.setDate(e.getDate()-1),a.endDateCom=this.returnFormattedDate(e),e.setDate(e.getDate()-i),a.startDateCom=this.returnFormattedDate(e),a},returnFormattedDate(e){let t=e.getMonth()+1,i=e.getDate(),a=e.getFullYear();return t<10&&(t="0"+t),i<10&&(i="0"+i),a+"-"+t+"-"+i},daysDifference(e,t){let i=t.getTime()-e.getTime(),a=1e3*60*60*24;return Math.round(i/a)+1},async removeAnalyticsAccount(e){let t=new FormData;t.append("action","uip_remove_matomo_analytics_account"),t.append("security",uip_ajax.security),t.append("saveAccountToUser",this.saveAccountToUser);const i=await this.sendServerRequest(uip_ajax.ajax_url,t);if(i.error){this.uipApp.notifications.notify(i.message,"","error",!0,!1),e(!1);return}this.getQueryURL(),e(!0)}}},{__:Qe,_x:Tl,_n:Rl,_nx:Pl}=wp.i18n,Ds={data(){return{ready:!1,hasLicence:!1,noWC:!1,queryURL:!1,reportRunning:!1,token:!1,saveAccountToUser:!1,cache:{},queue:[],dev:!1}},watch:{ready:{handler(e,t){this.uipApp.woocommerce.ready=this.returnStatus},deep:!0}},async mounted(){await this.$nextTick(),this.createQueue(),this.pushToGlobal()},computed:{returnStatus(){return this.ready}},methods:{createQueue(){const e=(t,i)=>{const a=[],s=()=>{a[0]&&a[0]().then(function(n){return n}).catch(i).then(()=>a.shift()).then(s).then()};return async n=>{if(a.push(n),a.length===1)return new Promise((o,p)=>{s()})}};this.queue=e()},async pushToGlobal(){this.uipApp.woocommerce={api:this.uipWCAnalytics,ready:this.returnStatus},await this.$nextTick(),this.ready=!0},async uipWCAnalytics(e,t,i){if(this.queryURL||await this.getQueryURL(),!this.hasLicence){let a={};return a.error=!0,a.message=Qe("No pro licence found. Please add a valid pro licence to use woocommerce analytics","uipress-pro"),a.type="no_licence",a}if(!this.noWC){let a={};return a.error=!0,a.message=Qe("Woocommerce needs to be active on this site to use woocommerce analytics blocks","uipress-pro"),a.type="no_woocommerce",a}if(e=="get"){const a=this.getDates(t,i),s=(r,n)=>new Promise((o,p)=>this.runReport(r,o,n));return await new Promise((r,n)=>{this.queue(()=>s(a,r))})}},async getQueryURL(e){this.cache={},this.hasLicence=!1,this.noWC=!1,this.ready=!1,this.queryURL=!1;let t=new FormData;t.append("action","uip_build_woocommerce_analytics_query"),t.append("security",uip_ajax.security);const i=await this.sendServerRequest(uip_ajax.ajax_url,t);return this.ready=!0,i.error?(i.error_type=="no_licence"&&(this.noWC=!0,this.hasLicence=!1,this.queryURL="no_licence"),i.error_type=="no_woocommerce"&&(this.hasLicence=!0,this.noWC=!1,this.queryURL="no_woocommerce"),typeof e<"u"&&(e(!1),this.queryURL="undefined"),!1):(this.hasLicence=!0,this.noWC=!0,this.queryURL=i.url,typeof e<"u"&&e(!0),!0)},async runReport(e,t,i){let a=`&sd=${e.startDate}&ed=${e.endDate}&sdc=${e.startDateCom}&edc=${e.endDateCom}`;if(this.queryURL+a,this.cache[e.startDate+e.endDate]){t(!0),i(this.cache[e.startDate+e.endDate]);return}this.reportRunning=!0;let s=new FormData;s.append("action","uip_run_woocommerce_analytics_query"),s.append("security",uip_ajax.security),s.append("dates",JSON.stringify(e));const r=await this.sendServerRequest(uip_ajax.ajax_url,s);if(this.reportRunning=!1,r.error){let n=r.message,o=Qe("Unable to fetch analytic data","uipress-pro");this.uipApp.notifications.notify(o,n,"error",!0,!1),t(!0),i(r)}this.cache[e.startDate+e.endDate]=r,t(!0),i(r)},getDates(e,t){let i=this.daysDifference(e,t),a={};return a.startDate=this.returnFormattedDate(e),a.endDate=this.returnFormattedDate(t),e.setDate(e.getDate()-1),a.endDateCom=this.returnFormattedDate(e),e.setDate(e.getDate()-i+1),a.startDateCom=this.returnFormattedDate(e),a},returnFormattedDate(e){let t=e.getMonth()+1,i=e.getDate(),a=e.getFullYear();return t<10&&(t="0"+t),i<10&&(i="0"+i),a+"-"+t+"-"+i},daysDifference(e,t){let i=t.getTime()-e.getTime(),a=1e3*60*60*24;return Math.round(i/a)+1}}},{__:re,_x:Ml,_n:Nl,_nx:Ll}=wp.i18n,As={data(){return{rg:!0,sp:!1,ul:"https://api.uipress.co/",userKey:"",validating:!1,userData:{},fa:0,strings:{thankYou:re("Thank you for installing UiPress 3 Pro","uipress-pro"),thankYouMessage:re("For pro features to work correctly, please add your pro licence below","uipress-pro"),register:re("Register","uipress-pro")}}},inject:["uiTemplate"],watch:{},mounted(){this.getData()},methods:{async getData(){if(this.uiTemplate.display=="production"||this.uiTemplate.display=="prod"){this.rg=!0;return}let e=new FormData;e.append("action","uip_get_pro_app_data"),e.append("security",uip_ajax.security);const t=await this.sendServerRequest(uip_ajax.ajax_url,e);if(t.error){this.uipApp.notifications.notify(t.message,"","error",!0);return}if(!t.uip_pro){this.rg=!1,this.register();return}this.userData=t.uip_pro,setTimeout(this.consume,24e4),this.uiTemplate.proActivated=!0},register(){this.sp=!0},async saveData(e,t){const i="instance_id"in t?t.instance_id:!1;let a=new FormData;a.append("action","uip_save_uip_pro_data"),a.append("security",uip_ajax.security),a.append("key",e),a.append("instance",i),a.append("multisite",this.uipApp.data.options.multisite),a.append("networkActivated",this.uipApp.data.options.networkActivated),a.append("primarySite",this.uipApp.data.options.primarySite);const s=await this.sendServerRequest(uip_ajax.ajax_url,a);if(s.error){this.uipApp.notifications.notify(s.message,"","error",!0);return}},removeData(){let e=new FormData;e.append("action","uip_remove_uip_pro_data"),e.append("security",uip_ajax.security),this.sendServerRequest(uip_ajax.ajax_url,e)},async consume(){const e=this.uipApp.data.options.domain;let t="";t+="?k="+this.userData.key,t+="&d="+e,t+="&instance="+this.userData.instance;let i=this.ul+"validate/"+t,a=new FormData;const s=await this.sendServerRequest(i,a);if(s instanceof Error||s.state=="false")this.handleRegisterErrror();else if(s.state=="true"){this.saveUserPreference("uipfa",2,!1),this.sp=!1,this.rg=!0,this.uiTemplate.proActivated=!0;return}else{this.rg=!0,setTimeout(this.consume,3e5);return}},async handleRegisterErrror(){const e=await this.getUserPreference("uipfa");if(e?(this.fa=parseInt(e),this.fa=isNaN(this.fa)?2:this.fa+1):this.fa=2,this.fa<12){this.saveUserPreference("uipfa",this.fa,!1);return}this.fa>=12&&(this.sp=!0,this.rg=!1,this.saveUserPreference("uipfa",2,!1),this.removeData(),this.uiTemplate.proActivated=!1)},async onSubmit(){this.validating=!0;let e=this.uipApp.data.options.domain,t="";t+="?k="+this.userKey,t+="&d="+e,t+="&instance=";let i=this.ul+"validate/"+t,a=new FormData;const s=await this.sendServerRequest(i,a);if(s.error){this.validating=!1,this.uipApp.notifications.notify(s.message,"","error",!0);return}else if(s instanceof Error)this.validating=!1,this.uipApp.notifications.notify(re("Check failed","uipress-pro"),re("Unable to contact licencing servers. Please try again later","uipress-pro"),"error",!0);else if(s.state=="false"){this.validating=!1,this.uipApp.notifications.notify(s.message,"","error",!0);return}else if(s.state=="true"){this.sp=!1,this.validating=!1,this.rg=!0,this.uipApp.notifications.notify(re("Thank you!","uipress-pro"),re("Your key is valid and you can now use pro features","uipress-pro"),"success",!0),this.saveData(this.userKey,s),this.saveUserPreference("uipfa",2,!1),this.uiTemplate.proActivated=!0;return}else{this.validating=!1,this.uipApp.notifications.notify(re("Check failed","uipress-pro"),re("Something went wrong. Please try again later","uipress-pro"),"error",!0);return}}},template:d`
    <div id="notification-drop" class="uip-dark-mode">
      <div v-if="sp" class="uip-notification uip-padding-s uip-fade-in" style="width:auto;">
        <div class="uip-flex uip-gap-xs">
          <div class="uip-max-w-300">
            <div class="uip-text-bold uip-text-inverse uip-margin-bottom-xs">{{strings.thankYou}}</div>
            <div class="uip-text-s uip-text-normal uip-margin-bottom-s">{{strings.thankYouMessage}}</div>

            <form class="uip-flex uip-flex-row uip-gap-xs" @submit.prevent="onSubmit()">
              <input class="uip-input uip-flex-grow" type="text" v-model="userKey" placeholder="xxxx-xxxx-xxxx-xxxx" required />
              <label class="uip-button-primary uip-body-font uip-min-w-60 uip-flex uip-flex-middle uip-flex-row">
                <input v-show="!validating" type="submit" class="uip-blank-input uip-text-emphasis" :value="strings.register" />
                <div><span v-show="validating" class="uip-load-spinner"></span></div>
              </label>
            </form>
          </div>
          <div class="uip-position-absolute uip-right-0 uip-top-0 uip-padding-s">
            <AppIcon icon="close" class="uip-margin-left-xs uip-cursor-pointer uip-link-default" @click="sp = false" />
          </div>
        </div>
      </div>
    </div>
  `};wp.i18n;const Cs={data(){return{}},inject:["uiTemplate"],mounted(){let e=this;this.getSiteTitle(),document.addEventListener("uip_page_change",t=>{setTimeout(e.getSiteTitle,600)},{once:!1})},computed:{returnTitle(){if(!this.isObject(this.uiTemplate.globalSettings)||!("options"in this.uiTemplate.globalSettings))return!1;if("whiteLabel"in this.uiTemplate.globalSettings.options){if("siteTitle"in this.uiTemplate.globalSettings.options.whiteLabel)return this.returnValue(this.uiTemplate.globalSettings.options.whiteLabel.siteTitle)}else return!1;return!1}},methods:{getSiteTitle(){let e=this.returnTitle;e&&this.setTtitle(e)},returnValue(e){if(e.dynamic){let t=e.dynamicKey,i=e.dynamicPos;if(this.uipApp.data.dynamicOptions[t]){let a=this.uipApp.data.dynamicOptions[t].value,s="";typeof e.string<"u"&&(s=e.string);let r="";return i=="left"?r=a+s:i=="right"?r=s+a:r=a+s,r}}return"string"in e&&e.string!=""?e.string:!1},setTtitle(e){let t=document.title,i=document.getElementsByClassName("uip-page-content-frame");i[0]&&(t=i[0].contentDocument.title);let a=t.replace("WordPress",e);document.title=a}}};wp.i18n;const Ss={data(){return{}},inject:["uiTemplate"],computed:{returnFavicon(){if(!this.isObject(this.uiTemplate.globalSettings)||!("options"in this.uiTemplate.globalSettings))return!1;if("whiteLabel"in this.uiTemplate.globalSettings.options){if("favicon"in this.uiTemplate.globalSettings.options.whiteLabel)return this.returnValue(this.uiTemplate.globalSettings.options.whiteLabel.favicon)}else return!1}},mounted(){this.getFavicon()},methods:{getFavicon(){let e=this.returnFavicon;e&&this.setFavicon(e)},returnValue(e){if(e.dynamic){let t=e.dynamicKey;if(this.uipApp.data.dynamicOptions[t])return this.uipApp.data.dynamicOptions[t].value}return"url"in e&&e.url!=""?e.url:!1},setFavicon(e){let t=document.querySelector("link[rel~='icon']");t||(t=document.createElement("link"),t.rel="icon",document.getElementsByTagName("head")[0].appendChild(t)),t.href=e}}},Ts=()=>[_s,ws,ks,Ds,As,Cs,Ss],{__:J,_x:$l,_n:El,_nx:Ol}=wp.i18n,Rs={props:{returnData:Function,value:Array,placeHolder:String,args:Object,size:String},data(){return{updating:!1,option:this.returnDefaultOptions,strings:{styles:J("Styles","uipress-pro"),lineRoundness:J("Line tension","uipress-pro"),showYaxis:J("Y axis","uipress-pro"),showXaxis:J("X axis","uipress-pro"),showYaxisGrid:J("Y axis grid","uipress-pro"),showXaxisGrid:J("X axis grid","uipress-pro"),borderWidth:J("Line width","uipress-pro"),dataBackground:J("Data fill","uipress-lite"),compBackground:J("Comparison data fill","uipress-lite")}}},watch:{value:{handler(e,t){this.updating||this.injectProp()},deep:!0,immediate:!0},option:{handler(e,t){this.updating||this.returnData(this.option)},deep:!0}},computed:{returnDefaultOptions(){return{tension:.15,borderWidth:3,showYaxis:!1,showXaxis:!1,showYaxisGrid:!0,showXaxisGrid:!1,dataBackground:"",compBackground:""}},returnSelectOptions(){return{false:{value:!1,label:J("Hide","uipress-pro")},true:{value:!0,label:J("Show","uipress-pro")}}}},methods:{async injectProp(){this.updating=!0;const e=this.returnDefaultOptions,t=this.isObject(this.value)?this.value:{};this.option={...e,...t},await this.$nextTick(),this.updating=!1}},template:d`
    <dropdown pos="left center" class="uip-w-100p" :snapX="['#uip-block-settings']">
      <template v-slot:trigger>
        <button class="uip-button-default uip-border-rounder uip-padding-xxs uip-link-muted uip-w-100p">
          <AppIcon icon="palette" />
        </button>
      </template>

      <template v-slot:content>
        <div class="uip-grid-col-1-3 uip-padding-s uip-w-300">
          <div class="uip-text-muted uip-flex uip-flex-center"><span>{{strings.lineRoundness}}</span></div>
          <div class="uip-flex uip-flex-center">
            <uip-number :value="option.tension" :returnData="function(d){option.tension = d}" :customStep="0.01" />
          </div>

          <div class="uip-text-muted uip-flex uip-flex-center"><span>{{strings.borderWidth}}</span></div>
          <div class="uip-flex uip-flex-center">
            <uip-number :value="option.borderWidth" :returnData="function(d){option.borderWidth = d}" :customStep="1" />
          </div>

          <div class="uip-text-muted uip-flex uip-flex-center"><span>{{strings.dataBackground}}</span></div>
          <color-select :value="option.dataBackground" :returnData="(data)=>{option.dataBackground = data}" />

          <div class="uip-text-muted uip-flex uip-flex-center"><span>{{strings.compBackground}}</span></div>
          <color-select :value="option.compBackground" :returnData="(data)=>{option.compBackground = data}" />

          <div class="uip-text-muted uip-flex uip-flex-center"><span>{{strings.showYaxis}}</span></div>
          <div class="uip-flex uip-flex-center">
            <switch-select :args="{asText: true, options: returnSelectOptions}" :value="option.showYaxis" :returnData="function(d){option.showYaxis = d}" />
          </div>

          <div class="uip-text-muted uip-flex uip-flex-center"><span>{{strings.showXaxis}}</span></div>
          <div class="uip-flex uip-flex-center">
            <switch-select :args="{asText: true, options: returnSelectOptions}" :value="option.showXaxis" :returnData="function(d){option.showXaxis = d}" />
          </div>

          <div class="uip-text-muted uip-flex uip-flex-center"><span>{{strings.showYaxisGrid}}</span></div>
          <div class="uip-flex uip-flex-center">
            <switch-select :args="{asText: true, options: returnSelectOptions}" :value="option.showYaxisGrid" :returnData="function(d){option.showYaxisGrid = d}" />
          </div>

          <div class="uip-text-muted uip-flex uip-flex-center"><span>{{strings.showXaxisGrid}}</span></div>
          <div class="uip-flex uip-flex-center">
            <switch-select :args="{asText: true, options: returnSelectOptions}" :value="option.showXaxisGrid" :returnData="function(d){option.showXaxisGrid = d}" />
          </div>
        </div>
      </template>
    </dropdown>
  `},{__:ne,_x:Il,_n:Fl,_nx:jl}=wp.i18n,Ps={props:{returnData:Function,value:[Object,String]},data(){return{data:{enabled:!1,host:"",username:"",name:"",password:""},search:"",strings:{username:ne("Username","uipress-pro"),name:ne("Name","uipress-pro"),password:ne("Password","uipress-pro"),testConnection:ne("Test connection","uipress-pro"),host:ne("Host","uipress-pro"),enabled:ne("Enabled","uipress-pro")},switchArgs:{asText:!0,options:{false:{value:!1,label:ne("Disabled","uipress-lite")},true:{value:!0,label:ne("Enabled","uipress-lite")}}}}},watch:{data:{handler(e,t){this.returnData(this.data)},deep:!0}},mounted(){this.formatVal(this.value)},computed:{returnDynamicData(){return Object.keys(this.dynamics).sort().reduce((t,i)=>(t[i]=this.dynamics[i],t),{})}},methods:{formatVal(e){this.isObject(e)&&(this.data={...this.data,...e})},async testDatabaseConnection(){let e=JSON.stringify(this.data),t=new FormData;t.append("action","uip_test_remote_database"),t.append("security",uip_ajax.security),t.append("dataBase",e);const i=this.uipApp.notifications.notify(ne("Testing connection","uipress-lite"),"","default",!1,!0),a=await this.sendServerRequest(uip_ajax.ajax_url,t);if(this.loading=!1,this.uipApp.notifications.remove(i),a.error){this.uipApp.notifications.notify(a.message,a.details,"error",!0,!1),this.loading=!1;return}this.uipApp.notifications.notify(a.message,"","success",!0,!1)}},template:d`
    <div class="uip-flex uip-flex-column uip-row-gap-xs">
      <div class="">
        <switch-select :value="data.enabled" :returnData="(d)=>{data.enabled = d}" :args="switchArgs" />
      </div>

      <div class="" v-if="data.enabled">
        <div class="uip-text-s uip-text-muted uip-margin-bottom-xxs">{{strings.host}}</div>
        <input placeholder="path.com/to/host:port" type="text" class="uip-input uip-w-100p" v-model="data.host" />
      </div>

      <div class="uip-flex uip-flex-column uip-row-gap-xs" v-if="data.enabled">
        <div class="uip-flex uip-flex-column">
          <div class="uip-text-s uip-text-muted uip-margin-bottom-xxs">{{strings.username}}</div>
          <input :placeholder="strings.username" type="text" class="uip-input" v-model="data.username" />
        </div>

        <div class="uip-flex uip-flex-column">
          <div class="uip-text-s uip-text-muted uip-margin-bottom-xxs">{{strings.name}}</div>
          <input :placeholder="strings.name" type="text" class="uip-input" v-model="data.name" />
        </div>

        <div class="uip-flex uip-flex-column">
          <div class="uip-text-s uip-text-muted uip-margin-bottom-xxs">{{strings.password}}</div>
          <input :placeholder="strings.password" type="password" class="uip-input" v-model="data.password" />
        </div>
      </div>

      <div class="uip-margin-top-s" v-if="data.enabled">
        <button @click="testDatabaseConnection()" class="uip-button-secondary uip-w-100p">{{strings.testConnection}}</button>
      </div>
    </div>
  `},{__:De,_x:ql,_n:Vl,_nx:Ul}=wp.i18n,Ms={components:{KeyShortcuts:dt},props:{returnData:Function,value:Object,args:Object},data(){return{option:{enabled:!1,display:!1,selected:[]},enabledOptions:{false:{value:!1,label:De("Disabled","uipress-pro")},true:{value:!0,label:De("Enabled","uipress-pro")}},showHide:{false:{value:!1,label:De("Hide","uipress-pro")},true:{value:!0,label:De("Show","uipress-pro")}},strings:{shortCutEnabled:De("Enable keybaord shortcut?","uipress-lite"),pressShortcut:De("Type your custom shortcut below","uipress-lite"),displayShortcut:De("Display shortcut in trigger","uipress-lite")},isCtrlPressed:!1,isAltPressed:!1,isShiftPressed:!1,shortcutKeys:["Enter"," ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown"],shortcutKeysIcons:[{key:"Enter",icon:"keyboard_return"},{key:" ",icon:"space_bar"},{key:"ArrowLeft",icon:"keyboard_arrow_left"},{key:"ArrowUp",icon:"keyboard_arrow_up"},{key:"ArrowRight",icon:"keyboard_arrow_right"},{key:"ArrowDown",icon:"keyboard_arrow_down"}],selected:[]}},watch:{option:{handler(e,t){this.returnData(this.option)},deep:!0}},mounted(){this.formatValue()},methods:{formatValue(e){this.value&&this.isObject(this.value)&&(this.option={...this.option,...this.value})},logKeyDown(e){const t=e.key;this.pushSelected(t)},logKeyUp(e){e.preventDefault(),this.selected=[];var t=e.keyCode?e.keyCode:e.which;t>=16&&t<=18&&this.updateKeyFlags(t,!1),(e.ctrlKey||e.metaKey)&&this.updateKeyFlags(17,!1)},pushSelected(e){this.option.selected||(this.option.selected=[]),this.option.selected.includes(e)||this.option.selected.push(e)},updateKeyFlags(e,t){switch(e){case 16:this.isShiftPressed=t,t&&this.pushSelected("shift");break;case 17:t&&this.pushSelected("command"),this.isCtrlPressed=t;break;case 18:t&&this.pushSelected("alt"),this.isAltPressed=t;break}}},template:d` <div class="uip-flex uip-flex-column uip-row-gap-xs uip-w-100p">
    <toggle-switch :options="enabledOptions" :activeValue="option.enabled" :returnValue="function(data){ option.enabled = data}"></toggle-switch>

    <!--Shortcut area -->
    <div v-if="option.enabled" class="uip-scale-in-top uip-flex uip-flex-column uip-row-gap-xs uip-flex-start">
      <div class="uip-text-s uip-text-muted">{{strings.pressShortcut}}</div>
      <input type="text" ref="shortcutInput" class="uip-input" @keydown="logKeyDown" @keyup="logKeyUp" />
      <div class="uip-flex uip-flex-row uip-gap-xs uip-flex-center">
        <KeyShortcuts v-if="option.selected  && option.selected.length > 0" :keys="option.selected" />
        <div v-if="option.selected && option.selected.length > 0" class="uip-button-default uip-border-rounder uip-padding-xxs uip-link-muted" @click="option.selected = []">
          <AppIcon icon="close" />
        </div>
      </div>
    </div>
    <!--End shortcut area-->
    <div v-if="option.enabled">
      <div class="uip-margin-bottom-xxs uip-text-s uip-text-muted">{{strings.displayShortcut}}</div>

      <toggle-switch :options="showHide" :activeValue="option.display" :returnValue="function(data){ option.display = data}"></toggle-switch>
    </div>
  </div>`},{__:pt,_x:Bl,_n:Kl,_nx:Hl}=wp.i18n,Ns={props:{returnData:Function,value:Object},data(){return{items:this.returnDefault,loaded:!1,canUpdate:!0,strings:{addNew:pt("New item","uipress-lite")}}},watch:{value:{handler(e,t){this.canUpdate&&this.injectValue()},deep:!0,immediate:!0},items:{handler(e,t){this.canUpdate&&this.returnData({options:this.items})},deep:!0}},computed:{returnDefault(){return[{name:"toast"},{name:"toast"}]}},methods:{async injectValue(){this.canUpdate=!1,this.items=Array.isArray(this.value.options)?this.value.options:this.returnDefault,await this.$nextTick(),this.canUpdate=!0},deleteOption(e){this.items.splice(e,1)},newOption(){this.items.push({name:pt("List item","uipress-pro"),icon:"favorite"})}},template:d` <div class="uip-flex uip-flex-column uip-row-gap-xs uip-w-100p">
    <uip-draggable
      v-if="items.length"
      :list="items"
      class="uip-flex uip-flex-column uip-row-gap-xs uip-w-100p"
      :group="{ name: 'list', pull: false, put: false, revertClone: true }"
      animation="300"
      @start="drag = true"
      @end="drag = false"
      :sort="true"
      itemKey="name"
    >
      <template v-for="(element, index) in items" :key="element.name" :index="index">
        <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center">
          <div class="uip-background-muted uip-border-rounder uip-padding-xxxs uip-padding-right-xxs uip-flex uip-flex-grow uip-gap-xxs uip-flex-center">
            <inline-icon-select :value="{value: element.icon}" :returnData="function(e){element.icon = e.value}">
              <template v-slot:trigger>
                <div class=" uip-padding-xxxs uip-w-22 uip-text-center uip-text-muted uip-text-l uip-flex-center">
                  <AppIcon :icon="element.icon" />
                </div>
              </template>
            </inline-icon-select>

            <input type="text" v-model="element.name" class="uip-input-small uip-blank-input uip-flex-grow" />

            <AppIcon icon="close" class="uip-link-muted" @click.prevent.stop="deleteOption(index)" />
          </div>
        </div>
      </template>
    </uip-draggable>

    <button @click="newOption()" class="uip-button-default uip-border-rounder uip-padding-xxs uip-link-muted uip-w-100p">
      <AppIcon icon="add" />
    </button>
  </div>`},{__:ut,_x:Gl,_n:Yl,_nx:Jl}=wp.i18n,Ls={props:{returnData:Function,value:Array,placeHolder:String},data(){return{strings:{placeHolder:ut("Select post types","uipress-lite"),searchPlaceHolder:ut("Seach post types","uipress-lite")}}},template:d` <post-type-select
    :selected="value"
    :placeHolder="strings.placeHolder"
    :searchPlaceHolder="strings.searchPlaceHolder"
    :single="false"
    :updateSelected="(data)=>{returnData(data)}"
  />`},{__:Ze,_x:zl,_n:Wl,_nx:Ql}=wp.i18n,$s={props:{value:[Object,String],returnData:Function},data(){return{updating:!1,option:this.defaultValue,menus:[],strings:{selectMenu:Ze("Select menu","uipress-lite")},enabledDisabled:{false:{value:!1,label:Ze("Disabled","uipress-lite")},true:{value:!0,label:Ze("Enabled","uipress-lite")}}}},watch:{value:{handler(){this.updating||this.injectProp()},deep:!0,immediate:!0},option:{handler(){this.updating||this.returnData(this.option)},deep:!0},"option.enabled":{handler(){this.option.enabled&&this.fetchMenus()},immediate:!0}},computed:{defaultValue(){return{enabled:!1,menuid:""}}},methods:{async injectProp(){this.updating=!0,this.option=this.isObject(this.value)?{...this.value}:{...this.defaultValue},await this.$nextTick(),this.updating=!1},async fetchMenus(){if(this.menus.length)return;let e=new FormData;e.append("action","uip_get_custom_menu_list"),e.append("security",uip_ajax.security);const t=await this.sendServerRequest(uip_ajax.ajax_url,e);if(t.error){this.uipApp.notifications.notify(t.message,"","error",!0,!1);return}this.menus=t.menus}},template:d`
    <div class="uip-flex uip-flex-column uip-row-gap-xs uip-w-100p">
      <toggle-switch :options="enabledDisabled" :activeValue="option.enabled" :returnValue="(data)=>option.enabled = data" />

      <select v-if="option.enabled" class="uip-input" v-model="option.menuid">
        <option disabled selected value="">{{strings.selectMenu}}</option>

        <template v-for="menu in menus">
          <option :value="menu.id">{{menu.label}}</option>
        </template>
      </select>
    </div>
  `},Es=()=>[{name:"uip-chart-options",component:Rs},{name:"uip-activity-database",component:Ps},{name:"keyboard-shortcut",component:Ms},{name:"list-item-creator",component:Ns},{name:"search-post-type-select",component:Ls},{name:"static-menu",component:$s}],{__:l,_x:Zl,_n:Xl,_nx:ep}=wp.i18n,Os={advanced:{label:l("Advanced","uipress-pro"),name:"advanced",icon:"code"},whiteLabel:{label:l("White label","uipress-pro"),name:"whiteLabel",icon:"branding_watermark"},login:{label:l("Login","uipress-pro"),name:"login",icon:"login"},contentFolders:{label:l("Content folders","uipress-pro"),name:"contentFolders",icon:"folder",condition:function(e){return"extensions"in e?!!e.extensions.foldersEnabled:!1}},activityLog:{label:l("Activity log","uipress-pro"),name:"activityLog",icon:"checklist",condition:function(e){return"extensions"in e?!!e.extensions.userManagementEnabled:!1}},extensions:{label:l("Extensions","uipress-pro"),name:"extensions",icon:"extension"}},Is=[{component:"switch-select",group:"whiteLabel",args:{asText:!0},uniqueKey:"hidePlugins",label:l("Hide UiPress from plugin table","uipress-pro"),help:l("If enabled, both UiPress lite and pro (if installed) will be hidden from the plugins table","uipress-pro"),accepts:Boolean},{component:"inline-image-select",args:{hasPositioning:!1},group:"whiteLabel",uniqueKey:"siteFavicon",label:l("Admin favicon","uipress-pro"),help:l("Adds a custom favicon to the admin pages","uipress-pro"),accepts:Object},{component:"uip-input",args:{asText:!0},group:"whiteLabel",uniqueKey:"siteTitle",label:l("Site title","uipress-lite"),help:l('Replace "WordPress" with your custom title in page titles',"uipress-lite"),accepts:String},{component:"switch-select",group:"advanced",args:{asText:!0,options:{false:{value:!1,label:l("Disabled","uipress-lite")},true:{value:!0,label:l("Enabled","uipress-lite")}}},uniqueKey:"addRoleToBody",label:l("Add user roles as body class","uipress-pro"),help:l("If enabled, the current user roles will be added as classes to the admin body tag. This can give you more flexibility in your css for role based conditions","uipress-pro"),accepts:Boolean,order:2},{component:"array-list",group:"advanced",uniqueKey:"enqueueStyles",label:l("Enqueue styles","uipress-pro"),help:l("Add stylesheets to the head of every admin page","uipress-pro"),accepts:Array,order:3},{component:"array-list",group:"advanced",uniqueKey:"enqueueScripts",label:l("Enqueue scripts","uipress-pro"),help:l("Add scripts to the head of every admin page","uipress-pro"),accepts:Array,order:4},{component:"code-editor",group:"advanced",uniqueKey:"htmlHead",label:l("HTML for head","uipress-pro"),help:l("Add HTML here to be added to every admin page head section","uipress-pro"),accepts:String,args:{language:"html"},order:5},{component:"switch-select",group:"login",args:{asText:!0,options:{false:{value:!1,label:l("Disabled","uipress-lite")},true:{value:!0,label:l("Enabled","uipress-lite")}}},uniqueKey:"darkMode",label:l("Dark mode","uipress-pro"),help:l("Forces dark mode on the login page","uipress-pro"),accepts:Boolean,order:6},{component:"switch-select",group:"login",args:{asText:!0,options:{true:{value:!0,label:l("Hide","uipress-lite")},false:{value:!1,label:l("Show","uipress-lite")}}},uniqueKey:"hideLanguage",label:l("Language selector","uipress-pro"),help:l("Disables the language selector on the login page","uipress-pro"),order:7},{component:"switch-select",group:"login",args:{asText:!0,options:{true:{value:!0,label:l("Hide","uipress-lite")},false:{value:!1,label:l("Show","uipress-lite")}}},uniqueKey:"removeBranding",label:l("UiPress link","uipress-pro"),help:l("Removes the powered by uipress link","uipress-pro"),order:8},{component:"code-editor",group:"login",uniqueKey:"panelHTML",label:l("Custom HTML","uipress-pro"),help:l("HTML to be added to the side panel of the login page. Only works when the login theme is enabled and not using the centered form.","uipress-pro"),accepts:String,order:9,args:{language:"html"}},{component:"code-editor",group:"login",uniqueKey:"loginCSS",label:l("Custom CSS","uipress-pro"),help:l("CSS to be added to the login page","uipress-pro"),accepts:String,order:10,args:{language:"css"}},{component:"switch-select",group:"media",args:{asText:!0,options:{false:{value:!1,label:l("Disabled","uipress-lite")},true:{value:!0,label:l("Enabled","uipress-lite")}}},uniqueKey:"privateLibrary",label:l("Private library","uipress-pro"),help:l("If enabled, users will only be able to view their own media in the media library. This does not apply to administrators","uipress-pro"),accepts:Boolean},{component:"switch-select",group:"postsPages",args:{asText:!0,options:{false:{value:!1,label:l("Disabled","uipress-lite")},true:{value:!0,label:l("Enabled","uipress-lite")}}},uniqueKey:"privatePosts",label:l("Private posts","uipress-pro"),help:l("If enabled, users will only be able to view their own posts and pages in the post tables. This does not apply to administrators","uipress-pro"),accepts:Boolean},{component:"switch-select",group:"extensions",args:{asText:!0,options:{false:{value:!1,label:l("Disabled","uipress-lite")},true:{value:!0,label:l("Enabled","uipress-lite")}}},uniqueKey:"menuCreatorEnabled",label:l("Menu builder","uipress-pro"),help:l("The menu builder allows you to create custom admin menus for roles and users","uipress-pro"),accepts:Boolean},{component:"switch-select",group:"extensions",args:{asText:!0,options:{false:{value:!1,label:l("Disabled","uipress-lite")},true:{value:!0,label:l("Enabled","uipress-lite")}}},uniqueKey:"userManagementEnabled",label:l("User management","uipress-pro"),help:l("The user management page allows you manage your users, roles and user activity all in one place","uipress-pro"),accepts:Boolean},{component:"switch-select",group:"extensions",args:{asText:!0,options:{false:{value:!1,label:l("Disabled","uipress-lite")},true:{value:!0,label:l("Enabled","uipress-lite")}}},uniqueKey:"foldersEnabled",label:l("Content folders","uipress-pro"),help:l("Enables a folder system for posts, pages, custom post types and media","uipress-pro"),accepts:Boolean},{component:"switch-select",group:"activityLog",args:{asText:!0,options:{false:{value:!1,label:l("Disabled","uipress-lite")},true:{value:!0,label:l("Enabled","uipress-lite")}}},uniqueKey:"activityLogEnabled",label:l("Activity log","uipress-pro"),help:l("If enabled, actions taken by all users, posts changes, comments, post creation etc in the activity log.","uipress-pro"),accepts:Boolean},{component:"switch-select",group:"activityLog",args:{asText:!0,options:{false:{value:!1,label:l("Disabled","uipress-lite")},true:{value:!0,label:l("Enabled","uipress-lite")}}},uniqueKey:"anonymizeIP",label:l("Anonymize user IP addresses","uipress-pro"),help:l("Each history item logs the users IP address, enable this to anonymize the address.","uipress-pro"),accepts:Boolean,condition:function(e){return"activityLog"in e?!!e.activityLog.activityLogEnabled:!1}},{component:"uip-input",group:"activityLog",uniqueKey:"historyMaxAmount",label:l("Max number of history items to keep","uipress-pro"),help:l("Changing this will ensure you database doesn't get overloaded with entries, the default is 20,000. The optimum number will depend on your hosting, disk space and other factors but no more than 50,000 is recomended.","uipress-pro"),accepts:Number,condition:function(e){return"activityLog"in e?!!e.activityLog.activityLogEnabled:!1}},{component:"uip-input",group:"activityLog",uniqueKey:"historyMaxLength",label:l("How long to keep history","uipress-pro"),help:l("History items will be deleted after 60 days, enter the amount of days to keep items to change this","uipress-pro"),accepts:Number,condition:function(e){return"activityLog"in e?!!e.activityLog.activityLogEnabled:!1}},{component:"multi-select-option",group:"activityLog",uniqueKey:"actionsNoTrack",label:l("Actions not to track","uipress-pro"),help:l("Select actions you don't want uipress to log in the activity log.","uipress-pro"),accepts:Array,condition:function(e){return"activityLog"in e?!!e.activityLog.activityLogEnabled:!1},args:{options:[{name:"page_view",label:l("Page view","uipress-pro")},{name:"post_created",label:l("Post created","uipress-pro")},{name:"post_updated",label:l("Post updated","uipress-pro")},{name:"post_trashed",label:l("Post trashed","uipress-pro")},{name:"post_deleted",label:l("Post deleted","uipress-pro")},{name:"post_status_change",label:l("Post status change","uipress-pro")},{name:"trash_comment",label:l("Trashed comment","uipress-pro")},{name:"delete_comment",label:l("Deelete comment","uipress-pro")},{name:"plugin_activated",label:l("Plugin activated","uipress-pro")},{name:"plugin_deactivated",label:l("Plugin deactivated","uipress-pro")},{name:"plugin_deleted",label:l("Plugin deleted","uipress-pro")},{name:"user_login",label:l("User login","uipress-pro")},{name:"user_logout",label:l("User logout","uipress-pro")},{name:"option_added",label:l("Site option added","uipress-pro")},{name:"attachment_uploaded",label:l("Attachmnet uploaded","uipress-pro")},{name:"attachment_deleted",label:l("Attachmnet deleted","uipress-pro")},{name:"user_created",label:l("User created","uipress-pro")},{name:"user_deleted",label:l("User deleted","uipress-pro")},{name:"user_updated",label:l("User updated","uipress-pro")}]}},{component:"uip-activity-database",group:"activityLog",uniqueKey:"databaseDetails",label:l("Use remote database","uipress-pro"),help:l("Instead of storing history in your default WordPress database you can use an alternate database by adding the details below","uipress-pro"),accepts:Number,condition:function(e){return"activityLog"in e?!!e.activityLog.activityLogEnabled:!1}},{component:"switch-select",group:"contentFolders",args:{asText:!0,options:{false:{value:!1,label:l("Disabled","uipress-lite")},true:{value:!0,label:l("Enabled","uipress-lite")}}},uniqueKey:"limitToAuthor",label:l("Folders per user","uipress-pro"),help:l("If enabled, users will only see their own folders","uipress-pro"),accepts:Boolean},{component:"switch-select",group:"contentFolders",args:{asText:!0,options:{false:{value:!1,label:l("Disabled","uipress-lite")},true:{value:!0,label:l("Enabled","uipress-lite")}}},uniqueKey:"perType",label:l("Folders per type","uipress-pro"),help:l("If enabled, created folders will be unique to the current post type and won't show on all post types","uipress-pro"),accepts:Boolean},{component:"uip-select-post-types",group:"contentFolders",uniqueKey:"enabledForTypes",label:l("Enabled for post types","uipress-pro"),help:l("Choose the post types you wish to use folders with","uipress-pro"),accepts:Array}],{__:Ee,_x:tp,_n:ip,_nx:ap}=wp.i18n,Fs={analytics:{label:Ee("Analytics","uipress-pro"),name:"analytics",icon:"bar_chart"}},js=[{component:"choice-select",group:"analytics",args:{options:{false:{value:!1,label:Ee("Global","uipress-pro")},true:{value:!0,label:Ee("User","uipress-pro")}}},uniqueKey:"saveAccountToUser",label:Ee("Google Analytics","uipress-pro"),help:Ee("By default, accounts are set site wide. So whoever logs in sees the same account data. Setting this on a user level allows each user to sync their own account","uipress-pro"),accepts:Boolean}];wp.hooks.addFilter("uipress.blocks.register","uipress",()=>vs());wp.hooks.addFilter("uipress.plugins.register","uipress",()=>Ts());wp.hooks.addFilter("uipress.components.register","uipress",()=>Es());wp.hooks.addFilter("uipress.app.sitesettings.groups.register","uipress",e=>({...e,...Os}));wp.hooks.addFilter("uipress.app.sitesettings.options.register","uipress",e=>[...e,...Is]);wp.hooks.addFilter("uipress.uibuilder.templatesettings.groups.register","uipress",e=>({...e,...Fs}));wp.hooks.addFilter("uipress.uibuilder.templatesettings.options.register","uipress",e=>[...e,...js]);
