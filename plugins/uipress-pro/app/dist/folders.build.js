import{_ as R,a as w,o as h,c as x,b as M,w as N,k as Q,e as ae,d as a,g as y,i as P,K as Be,m as Ue,F as te,l as T,h as qe,t as _,n as Ae,r as be,f as Z,v as ee,p as H,q as re,s as _e,u as Re,x as ze,y as Ve,z as W,A as Je}from"./assets/_plugin-vue_export-helper-D-PsXKsC.js";import{L as He,S as We,V as Ke}from"./assets/index-CKyl8jgJ.js";import{D as Ge,N as Xe,C as Ye,I as Qe,s as Ze,i as et,c as tt,h as rt,u as ot,p as nt}from"./assets/index-Cw9Isqwm.js";import{c as Te}from"./assets/index-D9vJfABT.js";const{__:it,_x:Pr,_n:Er,_nx:$r}=wp.i18n,st={data(){return{foldersOpen:!0,rendered:!1,strings:{folders:it("Folders","uipress-lite")}}},watch:{foldersOpen(){this.rendered&&this.saveUserPreference("foldersOpen",this.foldersOpen)}},computed:{returnFolderScreen(){return{component:"FolderApp",label:this.strings.folders}}},methods:{async saveUserPreference(e,t){let r=new FormData;t=t==!0?"uiptrue":t,t=t==!1?"uipfalse":t,t=this.prepareJSON(t),r.append("action","uip_save_user_preference"),r.append("security",this.AjaxSecurity),r.append("key",e),r.append("value",t),this.sendServerRequest(this.AjaxUrl,r)}},async mounted(){this.isObject(this.userPreferences)&&"foldersOpen"in this.userPreferences&&(this.foldersOpen=this.userPreferences.foldersOpen),await this.$nextTick(),this.rendered=!0}},at={key:2,class:"uip-padding-xs"};function lt(e,t,r,n,o,i){const u=w("AppIcon"),d=w("ScreenControl"),s=w("Notify");return h(),x(te,null,[o.foldersOpen?(h(),M(ae("style"),{key:0},{default:N(()=>[Q(" .wrap:not(#wp-media-grid){padding-left:266px !important;} ")]),_:1})):(h(),M(ae("style"),{key:1},{default:N(()=>[Q(" .wrap:not(#wp-media-grid){padding-left:60px !important;} ")]),_:1})),o.foldersOpen?P("",!0):(h(),x("div",at,[a("div",{class:"uip-link-muted uip-padding-xxs uip-border-rounder hover:uip-background-muted",onClick:t[0]||(t[0]=g=>o.foldersOpen=!0)},[y(u,{icon:"folder"})])])),o.foldersOpen?(h(),M(d,{key:3,startScreen:i.returnFolderScreen,homeScreen:i.returnFolderScreen.component,class:"uip-w-260 uip-padding-s uip-position-sticky uip-top-0 uip-folders-inner",closer:()=>o.foldersOpen=!1,showNavigation:!0},{componenthandler:N(({processScreen:g,currentScreen:f,goBack:z})=>[(h(),M(Be,null,[(h(),M(ae(f.component),Ue({onRequestScreen:D=>{g(D)},onGoBack:D=>z()},f),null,16,["onRequestScreen","onGoBack"]))],1024))]),_:1},8,["startScreen","homeScreen","closer"])):P("",!0),y(s)],64)}const pt=R(st,[["render",lt]]),{__:F,_x:Lr,_n:Or,_nx:jr}=wp.i18n,dt={name:"content-folder",props:{folder:Object,removeSelf:Function,updateID:Function},data(){return{loading:!1,open:!1,counter:0,strings:{placeholder:F("Input placeholder...","uipress-pro"),new:F("New","uipress-pro"),loadMore:F("Load more","uipress-pro"),search:F("Search","uipress-pro"),view:F("View","uipress-pro"),editFolder:F("Edit folder","uipress-pro"),deleteFolder:F("Delete folder","uipress-pro"),folders:F("Folders","uipress-pro"),duplicate:F("Duplicate","uipress-pro"),folderName:F("Folder name","uipress-pro"),folderColor:F("Folder colour","uipress-pro"),update:F("Update","uipress-pro"),edit:F("Edit","uipress-pro"),updateFolder:F("Update folder","uipress-pro"),newFolder:F("New folder","uipress-pro")}}},computed:{requestNewFolderScreen(){return{component:"NewFolder",label:this.strings.newFolder,list:this.folder.content,parent:this.folder.id}},requestUpdateFolderScreen(){return{component:"UpdateFolder",label:this.strings.updateFolder,folder:this.folder,returnData:e=>{this.folder.title=e.title,this.folder.color=e.color,this.$emit("go-back")}}}},beforeUnmount(){document.removeEventListener(`uipress/folders/${this.folder.id}/content/removed`,this.handleItemRemoved)},mounted(){document.addEventListener(`uipress/folders/${this.folder.id}/content/removed`,this.handleItemRemoved)},methods:{handleItemRemoved(e){const t=e.detail.removedCount;this.folder.count=this.folder.count-t},async getFolderContent(e){e&&(this.folder.loading=!0);let t=new FormData;t.append("action","uip_folders_get_folder_content"),t.append("security",this.AjaxSecurity),t.append("limitToAuthor",this.limitToAuthor),t.append("postType",this.postType),t.append("id",this.folder.id),t.append("limitToType",this.limitToType);const r=await this.sendServerRequest(this.AjaxUrl,t);if(this.folder.loading=!1,r.error){this.uipApp.notifications.notify(r.message,"","error",!0);return}this.folder.totalFound=r.totalFound,this.folder.count=r.folderCount,this.folder.content=r.content},async deleteFolder(){let e=new FormData;e.append("action","uip_folders_delete_folder"),e.append("security",this.AjaxSecurity),e.append("postType",this.postType),e.append("folderId",this.folder.id);const t=await this.sendServerRequest(this.AjaxUrl,e);this.folder.loading=!1,t.error&&this.uipApp.notifications.notify(t.message,"","error",!0),t.success&&(this.removeSelf(this.folder.id),this.uipApp.notifications.notify(F("Folder deleted","uipress-pro"),"","success",!0))},addDropClass(e){e.preventDefault(),e.currentTarget.classList.add("uip-background-muted"),this.counter++},removeDropClass(e,t){e.preventDefault(),this.counter--,this.counter===0&&e.currentTarget.classList.remove("uip-background-muted")},finishDrag(e){e.preventDefault(),e.currentTarget.classList.remove("uip-background-muted"),this.folderMove.showRemoveFromFolder=!1},setFolderDataTransfer(e){e.dataTransfer.setData("itemID",JSON.stringify([this.folder.id])),e.dataTransfer.setData("parentFolder",this.folder.parent)},async addToFolder(e,t){this.finishDrag(e);let r=e.dataTransfer.getData("itemID");if(!r||(r=JSON.parse(r),r.length<1))return;const n=e.dataTransfer.getData("parentFolder");let o=new FormData;o.append("action","uip_folders_add_item_to_folder"),o.append("security",this.AjaxSecurity),o.append("IDS",JSON.stringify(r)),o.append("newParent",this.folder.id),o.append("parentFolder",n),o.append("postType",this.postType),o.append("limitToType",this.limitToType);const i=await this.sendServerRequest(this.AjaxUrl,o);if(this.folder.loading=!1,i.error){this.uipApp.notifications.notify(i.message,"","error",!0);return}this.folder.count+=r.length,this.uipApp.notifications.notify(i.message,"","success",!0)},deleteFromList(e){const t=this.folder.content.findIndex(r=>r.id===e);t<0||this.folder.content.splice(t,1)}}},ct=["data-id","data-parent-folder"],ut={class:"uip-flex-grow"},ft={class:"uip-text-muted uip-padding-right-xxs"},ht={class:"uip-padding-xs uip-flex uip-flex-column uip-text-weight-normal uip-w-160",style:{"text-size":"15px"}},mt={class:""},vt={class:""},gt={class:""};function bt(e,t,r,n,o,i){const u=w("AppIcon"),d=w("ContextMenu"),s=w("content-folder",!0),g=w("uipDraggable");return h(),x("div",{"data-id":r.folder.id,"data-parent-folder":r.folder.parent,class:"uip-folder"},[a("div",{onContextmenu:t[4]||(t[4]=T(f=>e.$refs.folderOptions.show(f),["prevent"])),class:Ae(["uip-flex uip-gap-xs uip-flex-center uip-text-s uip-padding-xxs uip-border-rounder",e.activeFolder.id===r.folder.id?"uip-background-muted uip-text-emphasis":"hover:uip-background-muted uip-link-default"]),onClick:t[5]||(t[5]=f=>{o.open=!0,i.getFolderContent(!0),e.activeFolder.id=r.folder.id}),onDrop:t[6]||(t[6]=T(f=>i.addToFolder(f),["prevent","stop"])),onDragenter:[t[7]||(t[7]=f=>i.addDropClass(f,r.folder)),t[9]||(t[9]=T(()=>{},["prevent"]))],onDragleave:t[8]||(t[8]=f=>i.removeDropClass(f,r.folder)),onDragover:t[10]||(t[10]=T(()=>{},["prevent"]))},[a("div",{onClick:t[0]||(t[0]=T(f=>{o.open=!o.open,i.getFolderContent(!0)},["prevent","stop"])),class:"uip-link-muted"},[y(u,{icon:o.open?"expand_more":"chevron_right"},null,8,["icon"])]),a("div",{class:"uip-w-8 uip-ratio-1-1",style:qe("border-radius:3px;background:"+r.folder.color)},null,4),a("div",ut,_(r.folder.title),1),a("div",ft,_(r.folder.count),1),y(d,{ref:"folderOptions"},{default:N(()=>[a("div",ht,[a("a",{onClick:t[1]||(t[1]=f=>{e.$emit("request-screen",i.requestNewFolderScreen),e.$refs.folderOptions.close()}),class:"uip-link-default uip-padding-xxs uip-border-rounder hover:uip-background-muted uip-no-underline uip-flex uip-flex-center uip-flex-between uip-gap-s uip-text-s"},[a("span",mt,_(o.strings.newFolder),1),y(u,{icon:"add"})]),a("a",{onClick:t[2]||(t[2]=f=>{e.$emit("request-screen",i.requestUpdateFolderScreen),e.$refs.folderOptions.close()}),class:"uip-link-default uip-padding-xxs uip-border-rounder hover:uip-background-muted uip-no-underline uip-flex uip-flex-center uip-flex-between uip-gap-s uip-text-s"},[a("span",vt,_(o.strings.editFolder),1),y(u,{icon:"edit"})]),a("a",{onClick:t[3]||(t[3]=f=>{i.deleteFolder(),e.$refs.folderOptions.close()}),class:"uip-link-danger uip-padding-xxs uip-border-rounder hover:uip-background-muted uip-no-underline uip-flex uip-flex-center uip-flex-between uip-gap-s uip-text-s"},[a("span",gt,_(o.strings.deleteFolder),1),y(u,{icon:"delete"})])])]),_:1},512)],34),o.open?(h(),M(g,{key:0,class:"uip-flex uip-flex-column uip-max-w-100p uip-margin-left-s uip-margin-top-xxs uip-min-h-18",group:{name:"uip-folders",pull:!0,put:!0},list:r.folder.content,onChange:t[13]||(t[13]=f=>e.folderMove.handler(f,r.folder)),ghostClass:"uip-canvas-ghost",animation:"300",sort:!1},{default:N(()=>[(h(!0),x(te,null,be(r.folder.content,(f,z)=>(h(),M(s,{key:f.id,onGoBack:t[11]||(t[11]=D=>e.$emit("go-back")),onRequestScreen:t[12]||(t[12]=D=>e.$emit("request-screen",D)),folder:f,removeSelf:D=>{i.deleteFromList(D)}},null,8,["folder","removeSelf"]))),128))]),_:1},8,["list"])):P("",!0)],8,ct)}const xt=R(dt,[["render",bt]]),{__:O,_x:Br,_n:Ur,_nx:qr}=wp.i18n,wt={components:{ColorBox:Te},props:{list:Array,parent:[Boolean,String,Number]},data(){return{newFolder:{name:"",color:"rgb(108, 76, 203)"},strings:{newFolder:O("New folder","uipress-pro"),folderName:O("Name","uipress-pro"),folderColor:O("Colour","uipress-pro"),create:O("Create","uipress-pro"),folderColor:O("Folder color","uipress-pro")}}},methods:{async createNewFolder(){let e=new FormData;e.append("action","uip_folders_create_folder"),e.append("security",this.AjaxSecurity),e.append("folderParent",this.parent),e.append("folderName",this.newFolder.name),e.append("folderColor",this.newFolder.color),e.append("limitToType",this.limitToType),e.append("postType",this.postType);const t=await this.sendServerRequest(this.AjaxUrl,e);if(t.error){this.uipApp.notifications.notify(t.message,"","error",!0);return}this.uipApp.notifications.notify(O("Folder created","uipress-pro"),"","success",!0),this.isObject(t.folder)&&this.list.push(t.folder),this.$emit("go-back")}}},yt={class:"uip-flex uip-flex-column uip-row-gap-xs"},Ft={class:"uip-flex uip-flex-column uip-gap-xs uip-padding-left-s"},kt={class:"uip-text-muted uip-flex uip-flex-center uip-text-s"},_t={class:"uip-text-muted uip-flex uip-flex-center uip-text-s"},Dt={class:"uip-padding-s"},St=["disabled"];function Ct(e,t,r,n,o,i){const u=w("ColorBox"),d=w("color-picker"),s=w("ContextMenu");return h(),x("div",yt,[a("div",Ft,[a("div",kt,[a("span",null,_(o.strings.folderName),1)]),Z(a("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=g=>o.newFolder.name=g),class:"uip-text-s uip-input-small"},null,512),[[ee,o.newFolder.name]]),a("div",_t,[a("span",null,_(o.strings.folderColor),1)]),y(u,{text:o.newFolder.color?o.newFolder.color:o.strings.folderColor,backgroundStyle:`background-color:${o.newFolder.color}`,remove:()=>o.newFolder.color=null,onClick:t[1]||(t[1]=g=>e.$refs.colorpicker.show(g))},null,8,["text","backgroundStyle","remove"]),y(s,{ref:"colorpicker"},{default:N(()=>[a("div",Dt,[y(d,{value:o.newFolder.color,class:"uip-text-s",returnData:g=>{o.newFolder.color=g}},null,8,["value","returnData"])])]),_:1},512)]),a("button",{disabled:!o.newFolder.name,class:"uip-button-primary uip-text-s uip-margin-top-s",onClick:t[2]||(t[2]=g=>i.createNewFolder())},_(o.strings.create),9,St)])}const At=R(wt,[["render",Ct]]),{__:A,_x:Rr,_n:zr,_nx:Vr}=wp.i18n,Tt={props:{parent:[String,Number],list:Array,incrementCount:Function},data(){return{loading:!1,rendered:!0,baseFolders:[],foldersOpen:!0,dragging:!1,foldersFor:!1,allFiles:0,count:0,table:!1,mediaBrowser:!1,newFolder:{name:"",color:"rgb(108, 76, 203)"},strings:{newFolder:A("New folder","uipress-pro"),folderName:A("Folder name","uipress-pro"),folderColor:A("Folder colour","uipress-pro"),create:A("Create","uipress-pro"),allItems:A("All items","uipress-pro"),folders:A("Folders","uipress-pro"),removeFromFolder:A("Remove from folder","uipress-pro")}}},watch:{activeFolder:{handler(){this.foldersFor=="posts"&&this.filterTableByFolder(),this.foldersFor=="wpmedia"&&this.filterMediaByFolder()},deep:!0}},async created(){this.getBaseFolders(!0),this.folderMove.handler=this.handleFolderDrag},beforeUnmount(){this.table&&(this.table.removeEventListener("dragstart",this.handlePostTableItemDrag),this.table.addEventListener("dragend",this.handlePostTableItemDragEnd)),this.mediaBrowser&&(this.mediaBrowser.removeEventListener("dragstart",this.handleMediaDragEvent),this.mediaBrowser.addEventListener("dragend",this.handlePostTableItemDragEnd)),document.removeEventListener("uipress/mediamodal/upload/before",this.handleBeforeModalUpload),document.removeEventListener("uipress/mediamodal/upload/added",this.handleAddedModalUpload),document.removeEventListener("uipress/mediamodal/upload/finished",this.handleFinishedModalUpload)},mounted(){this.mountEventListeners()},computed:{requestNewFolderScreen(){return{component:"NewFolder",label:this.strings.newFolder,value:[],list:this.baseFolders,parent:"uipfalse"}},returnFolders(){return this.baseFolders}},methods:{mountEventListeners(){this.postType=="attachment"&&wp.media?(this.foldersFor="wpmedia",this.mountMediaLibraryListeners()):(this.foldersFor="posts",this.mounPostTableListeners())},mounPostTableListeners(){const e=document.querySelector(".wp-list-table");e&&(this.table=e,this.table.addEventListener("dragstart",this.handlePostTableItemDrag),this.table.addEventListener("dragend",this.handlePostTableItemDragEnd))},handlePostTableItemDragEnd(e){this.folderMove.showRemoveFromFolder=!1},handlePostTableItemDrag(e){const t=this.getSelectedFileIds(e);if(t.length===0)return;this.folderMove.showRemoveFromFolder=!0;const r=e.target.getAttribute("data-folder-id");e.dataTransfer.setData("itemID",JSON.stringify(t)),e.dataTransfer.setData("parentFolder",r),this.createDragImage(e,t)},getSelectedFileIds(e){const t=document.querySelectorAll("tbody .check-column input[type=checkbox]:checked");if(t.length>0)return Array.from(t).map(n=>n.value);const r=e.target.getAttribute("data-id");return r?[r]:[]},createDragImage(e,t){const r=A("item","uipress-pro"),n=A("items","uipress-pro"),o=t.length,i=o>1?`${o} ${n}`:`${o} ${r}`,u=document.createElement("div");u.id="uip-content-drag",u.innerHTML=i,u.style.position="absolute",u.style.top="-1000px",document.body.appendChild(u),e.dataTransfer.setDragImage(u,0,0)},mountMediaLibraryListeners(){document.addEventListener("uipress/mediamodal/upload/before",this.handleBeforeModalUpload),document.addEventListener("uipress/mediamodal/upload/finished",this.handleFinishedModalUpload),document.addEventListener("uipress/mediamodal/upload/added",this.handleAddedModalUpload),this.mediaBrowser=document.querySelector(".attachments-browser"),this.mediaBrowser&&(this.mediaBrowser.addEventListener("dragstart",this.handleMediaDragEvent),this.mediaBrowser.addEventListener("dragend",this.handlePostTableItemDragEnd))},handleMediaDragEvent(e){let t=[];this.folderMove.showRemoveFromFolder=!0;let r=document.querySelectorAll(".attachments-browser .attachments .attachment[aria-checked=true]");if(r&&r.length>0)r.forEach(o=>{t.push(o.getAttribute("data-id"))});else{let o=e.target.getAttribute("data-id");if(!o)return;t.push(o)}let n=e.target.getAttribute("data-folder-id");e.dataTransfer.setData("itemID",JSON.stringify(t)),e.dataTransfer.setData("parentFolder",n),this.createDragImage(e,t)},handleBeforeModalUpload(e){const t=e.detail.uploader;e.detail.file,t.settings.multipart_params.uip_folder_id=this.activeFolder.id},handleFinishedModalUpload(e){e.detail.uploader,e.detail.file,this.uipApp.notifications.notify(A("Upload finished ","uipress-lite"),"","success",!0)},handleAddedModalUpload(e){if(this.activeFolder.id=="all")return;e.detail.uploader;const t=e.detail.file,r=wp.media.attachment(t.attachment.id);wp.media.frame.state().get("library").add(r),this.uipApp.notifications.notify(A("File uploaded ","uipress-lite"),t.name,"success",!0)},async getBaseFolders(e){if(this.loading)return;e&&(this.loading=!0);let t=new FormData;t.append("action","uip_folders_get_base_folders"),t.append("security",this.AjaxSecurity),t.append("limitToAuthor",this.limitToAuthor),t.append("postType",this.postType),t.append("limitToType",this.limitToType);const r=await this.sendServerRequest(this.AjaxUrl,t);this.loading=!1,r.error&&this.uipApp.notifications.notify(r.message,"","error",!0),r.success&&(this.baseFolders=[...r.baseFolders],this.allFiles=r.total)},removeFilters(){this.activeFolder.id="all"},deleteFromList(e){let t=this.baseFolders.findIndex(r=>r.id===e);t<0||this.baseFolders.splice(t,1)},handleFolderDrag(e,t){e.added&&this.handleFolderAdded(e,t)},handleFolderAdded(e,t){const r=e.added.element,n=this.isObject(t)?t.id:"uipfalse";this.updateItemFolder(r,n)},async updateItemFolder(e,t){let r=new FormData;r.append("action","uip_folders_update_item_folder"),r.append("security",this.AjaxSecurity),r.append("item",JSON.stringify(e)),r.append("newParent",t);const n=await this.sendServerRequest(this.AjaxUrl,r);if(n.error){this.uipApp.notifications.notify(n.message,"","error",!0);return}e.parent=t},async filterTableByFolder(){let e=new URLSearchParams(window.location.search),t=window.location.origin;e.set("uip_folder",this.activeFolder.id);let r=t+window.location.pathname+"?"+e.toString();fetch(r).then(n=>{if(!n.ok)throw new Error("Network response was not ok"+n.statusText);return n.text()}).then(n=>{let o=new DOMParser,i=n.trim(),d=o.parseFromString(i,"text/html").querySelector("#wpbody-content .wrap");document.querySelector("#wpbody-content .wrap").replaceWith(d),this.mounPostTableListeners()}).catch(n=>{console.error("Fetch error: ",n),this.uipApp.notifications.notify(n.message,"","error",!0)})},async filterMediaByFolder(){if(!wp.media)return;let e=this.returnMediaFrameCollection();!e||typeof e>"u"||e.props.set({ignore:+new Date,uip_folder_id:this.activeFolder.id})},returnMediaFrameCollection(){if(wp.media.frames.browse)return wp.media.frames.browse.content.get().collection;if(wp.media.frame)return wp.media.frame.content.get().collection},async removeFromFolder(e){const t=this.activeFolder.id;let r=e.dataTransfer.getData("itemID");if(!r||(r=JSON.parse(r),r.length<1))return;e.dataTransfer.getData("parentFolder");let n=new FormData;n.append("action","uip_folders_remove_item_from_folder"),n.append("security",this.AjaxSecurity),n.append("IDS",JSON.stringify(r)),n.append("currentFolder",t);const o=await this.sendServerRequest(this.AjaxUrl,n);if(o.error){this.uipApp.notifications.notify(o.message,"","error",!0);return}this.dispatchItemRemoveEvent(r.length),this.folderMove.showRemoveFromFolder=!1,this.foldersFor=="wpmedia"&&this.filterMediaByFolder(),this.foldersFor=="posts"&&this.filterTableByFolder(),this.uipApp.notifications.notify(o.message,"","success",!0)},dispatchItemRemoveEvent(e){const t=this.activeFolder.id,r=new CustomEvent(`uipress/folders/${t}/content/removed`,{detail:{removedCount:e}});document.dispatchEvent(r)}}},It={class:"uip-max-w-100p uip-flex uip-flex-column uip-row-gap-xs uip-transition-all uip-flex-grow"},Mt={class:"uip-flex-grow"},Nt={class:"uip-text-muted uip-padding-right-xxs"},Pt={key:1,class:"uip-padding-xs uip-flex uip-flex-middle uip-flex-center"};function Et(e,t,r,n,o,i){const u=w("AppIcon"),d=w("loading-chart"),s=w("content-folder"),g=w("uipDraggable");return h(),x("div",It,[a("div",{onClick:t[1]||(t[1]=f=>i.removeFilters()),class:Ae(["uip-flex uip-flex-row uip-gap-xs uip-flex-center uip-link-default uip-padding-xxs hover:uip-background-muted uip-border-rounder uip-no-text-select uip-text-s",{"uip-text-emphasis uip-background-muted":e.activeFolder.id=="all"}])},[y(u,{onClick:t[0]||(t[0]=T(f=>e.$emit("request-screen",i.requestNewFolderScreen),["prevent","stop"])),class:"uip-link-default",icon:"add"}),a("div",Mt,_(o.strings.allItems),1),a("div",Nt,_(o.allFiles),1)],2),e.folderMove.showRemoveFromFolder&&e.activeFolder.id&&e.activeFolder.id!="all"?(h(),x("div",{key:0,ref:"removeFromFolder",onDrop:t[2]||(t[2]=T(f=>i.removeFromFolder(f),["prevent","stop"])),onDragenter:t[3]||(t[3]=T(()=>{},["prevent"])),onDragover:t[4]||(t[4]=T(()=>{},["prevent"])),class:"uip-flex uip-flex-column uip-max-w-100p uip-padding-xxs uip-background-muted uip-border-rounder uip-text-muted uip-text-s uip-text-center uip-fade-in"},_(o.strings.removeFromFolder),545)):P("",!0),o.loading?(h(),x("div",Pt,[y(d)])):(h(),M(g,{key:2,ref:"folderList",class:"uip-flex uip-flex-column uip-max-w-100p",group:{name:"uip-folders",pull:!0,put:!0,revertClone:!1},list:o.baseFolders,onChange:t[7]||(t[7]=f=>e.folderMove.handler(f,!1)),ghostClass:"uip-canvas-ghost",animation:"300",sort:!1},{default:N(()=>[(h(!0),x(te,null,be(i.returnFolders,(f,z)=>(h(),M(s,{key:f.id,onRequestScreen:t[5]||(t[5]=D=>e.$emit("request-screen",D)),onGoBack:t[6]||(t[6]=D=>e.$emit("go-back")),folder:f,removeSelf:D=>{i.deleteFromList(D)}},null,8,["folder","removeSelf"]))),128))]),_:1},8,["list"]))])}const $t=R(Tt,[["render",Et]]),{__:j,_x:Jr,_n:Hr,_nx:Wr}=wp.i18n,Lt={components:{ColorBox:Te},props:{folder:Object,returnData:Function},data(){return{currentFolder:this.returnDefault,strings:{newFolder:j("New folder","uipress-pro"),name:j("Name","uipress-pro"),colour:j("Colour","uipress-pro"),update:j("Update","uipress-pro"),folderColor:j("Folder color","uipress-pro")}}},created(){this.injectProp()},watch:{folder:{handler(){this.injectProp()},deep:!0}},computed:{returnDefault(){return{name:"",color:"rgb(108, 76, 203)"}}},methods:{injectProp(){this.currentFolder=this.isObject(this.folder)?{...this.folder}:this.returnDefault},async updateFolder(){let e=new FormData;e.append("action","uip_folders_update_folder_details"),e.append("security",this.AjaxSecurity),e.append("folderId",this.currentFolder.id),e.append("title",this.currentFolder.title),e.append("color",this.currentFolder.color);const t=await this.sendServerRequest(this.AjaxUrl,e);if(t.error){this.uipApp.notifications.notify(t.message,"","error",!0);return}this.uipApp.notifications.notify(j("Folder updated","uipress-pro"),"","success",!0),this.returnData(this.currentFolder)}}},Ot={class:"uip-flex uip-flex-column uip-row-gap-xs"},jt={class:"uip-flex uip-flex-column uip-gap-xs uip-padding-left-s"},Bt={class:"uip-text-muted uip-flex uip-flex-center uip-text-s"},Ut={class:"uip-text-muted uip-flex uip-flex-center uip-text-s"},qt={class:"uip-padding-s"},Rt=["disabled"];function zt(e,t,r,n,o,i){const u=w("ColorBox"),d=w("color-picker"),s=w("ContextMenu");return h(),x("div",Ot,[a("div",jt,[a("div",Bt,[a("span",null,_(o.strings.name),1)]),Z(a("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=g=>o.currentFolder.title=g),class:"uip-text-s uip-input-small"},null,512),[[ee,o.currentFolder.title]]),a("div",Ut,[a("span",null,_(o.strings.colour),1)]),y(u,{text:o.currentFolder.color?o.currentFolder.color:o.strings.folderColor,backgroundStyle:`background-color:${o.currentFolder.color}`,remove:()=>o.currentFolder.color=null,onClick:t[1]||(t[1]=g=>e.$refs.colorpicker.show(g))},null,8,["text","backgroundStyle","remove"]),y(s,{ref:"colorpicker"},{default:N(()=>[a("div",qt,[y(d,{value:o.currentFolder.color,class:"uip-text-s",returnData:g=>{o.currentFolder.color=g}},null,8,["value","returnData"])])]),_:1},512)]),a("button",{disabled:!o.currentFolder.title,class:"uip-button-primary uip-text-s uip-margin-top-s",onClick:t[2]||(t[2]=g=>i.updateFolder())},_(o.strings.update),9,Rt)])}const Vt=R(Lt,[["render",zt]]);function E(e,t,r){return Math.max(t,Math.min(e,r))}function k(e,t=2){return e.toFixed(t).replace(/\.?0+$/,"")}function De(e){return e.endsWith(".")?NaN:(parseFloat(e)%360+360)%360/360}function Se(e){return k(360*e)}function q(e){if(!e.endsWith("%"))return NaN;const t=e.substring(0,e.length-1);if(t.endsWith("."))return NaN;const r=parseFloat(t);return Number.isNaN(r)?NaN:E(r,0,100)/100}function K(e){return k(100*e)+"%"}function le(e){if(e.endsWith("%"))return q(e);if(e.endsWith("."))return NaN;const t=parseFloat(e);return Number.isNaN(t)?NaN:E(t,0,255)/255}function pe(e){return k(255*e)}function de(e){return e.endsWith("%")?q(e):E(parseFloat(e),0,1)}function ce(e){return String(e)}const ge={hsl:{h:{to:Se,from:De},s:{to:K,from:q},l:{to:K,from:q},a:{to:ce,from:de}},hwb:{h:{to:Se,from:De},w:{to:K,from:q},b:{to:K,from:q},a:{to:ce,from:de}},rgb:{r:{to:pe,from:le},g:{to:pe,from:le},b:{to:pe,from:le},a:{to:ce,from:de}}};function G(e){const t=e.replace(/^#/,""),r=[],n=t.length>4?2:1;for(let i=0;i<t.length;i+=n){const u=t.slice(i,i+n);r.push(u.repeat(n%2+1))}r.length===3&&r.push("ff");const o=r.map(i=>parseInt(i,16)/255);return{r:o[0],g:o[1],b:o[2],a:o[3]}}function ue(e){const t=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,r=2*e.l-t;return{r:fe(r,t,e.h+1/3),g:fe(r,t,e.h),b:fe(r,t,e.h-1/3),a:e.a}}function fe(e,t,r){return r<0?r+=1:r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function V(e){return{r:he(5,e),g:he(3,e),b:he(1,e),a:e.a}}function he(e,t){const r=(e+6*t.h)%6;return t.v-t.v*t.s*Math.max(0,Math.min(r,4-r,1))}function B(e){return{h:e.h,s:e.b===1?0:1-e.w/(1-e.b),v:1-e.b,a:e.a}}function U(e){const t=Math.min(e.r,e.g,e.b),r=Math.max(e.r,e.g,e.b);let n;return n=r===t?0:r===e.r?(0+(e.g-e.b)/(r-t))/6:r===e.g?(2+(e.b-e.r)/(r-t))/6:(4+(e.r-e.g)/(r-t))/6,n<0&&(n+=1),{h:n,w:t,b:1-r,a:e.a}}function me(e){const t=U(e),r=t.w,n=1-t.b,o=(n+r)/2;let i;return i=n===0||r===1?0:(n-o)/Math.min(o,1-o),{h:t.h,s:i,l:o,a:e.a}}function X(e){return"#"+Object.values(e).map(t=>{const r=255*t,n=Math.round(r).toString(16);return n.length===1?"0"+n:n}).join("")}const Jt={hex:[["hsl",e=>I(e,[G,me])],["hsv",e=>I(e,[G,U,B])],["hwb",e=>I(e,[G,U])],["rgb",G]],hsl:[["hex",e=>I(e,[ue,X])],["hsv",function(e){const t=e.l+e.s*Math.min(e.l,1-e.l),r=t===0?0:2-2*e.l/t;return{h:e.h,s:r,v:t,a:e.a}}],["hwb",e=>I(e,[ue,U])],["rgb",ue]],hsv:[["hex",e=>I(e,[V,X])],["hsl",function(e){const t=e.v-e.v*e.s/2,r=Math.min(t,1-t),n=r===0?0:(e.v-t)/r;return{h:e.h,s:n,l:t,a:e.a}}],["hwb",function(e){return{h:e.h,w:(1-e.s)*e.v,b:1-e.v,a:e.a}}],["rgb",V]],hwb:[["hex",e=>I(e,[B,V,X])],["hsl",e=>I(e,[B,V,me])],["hsv",B],["rgb",e=>I(e,[B,V])]],rgb:[["hex",X],["hsl",me],["hsv",e=>I(e,[U,B])],["hwb",U]]};function I(e,t){return t.reduce((r,n)=>n(r),e)}function Y(e){const t={};for(const r in e)t[r]=e[r];return t}const Ht={hex:(e,t)=>t&&[5,9].includes(e.length)?e.substring(0,e.length-(e.length-1)/4):e,hsl:(e,t)=>`hsl(${k(360*e.h)} ${k(100*e.s)}% ${k(100*e.l)}%`+(t?")":` / ${k(e.a)})`),hwb:(e,t)=>`hwb(${k(360*e.h)} ${k(100*e.w)}% ${k(100*e.b)}%`+(t?")":` / ${k(e.a)})`),rgb:(e,t)=>`rgb(${k(255*e.r)} ${k(255*e.g)} ${k(255*e.b)}`+(t?")":` / ${k(e.a)})`)};function Ce(e,t,r){return Ht[t](e,r)}function Ie(e){return/^#(?:(?:[A-F0-9]{2}){3,4}|[A-F0-9]{3,4})$/i.test(e)}function Wt(e){if(typeof e!="string")return{format:function(s){return Object.prototype.hasOwnProperty.call(s,"r")?"rgb":Object.prototype.hasOwnProperty.call(s,"w")?"hwb":Object.prototype.hasOwnProperty.call(s,"v")?"hsv":"hsl"}(e),color:e};if(Ie(e))return{format:"hex",color:e};if(!e.includes("(")){const d=document.createElement("canvas").getContext("2d");d.fillStyle=e;const s=d.fillStyle;return s==="#000000"&&e!=="black"?null:{format:"hex",color:s}}const[t,r]=e.split("("),n=t.substring(0,3),o=r.replace(/[,/)]/g," ").replace(/\s+/g," ").trim().split(" ");o.length===3&&o.push("1");const i=(n+"a").split(""),u=Object.fromEntries(i.map((d,s)=>[d,ge[n][d].from(o[s])]));return{format:n,color:u}}const ve=["hex","hsl","hwb","rgb"],Kt=["show","hide"],Gt={class:"vacp-range-input-group"},Xt=["for"],Yt={class:"vacp-range-input-label-text vacp-range-input-label-text--hue uip-hidden"},Qt=["id","value"],Zt=["for"],er={class:"vacp-range-input-label-text vacp-range-input-label-text--alpha uip-hidden"},tr=["id","value"],rr=a("span",{class:"vacp-visually-hidden"},"Copy color",-1),or=a("svg",{class:"vacp-icon",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",width:"24",height:"24",viewBox:"0 0 32 32"},[a("path",{d:"M25.313 28v-18.688h-14.625v18.688h14.625zM25.313 6.688c1.438 0 2.688 1.188 2.688 2.625v18.688c0 1.438-1.25 2.688-2.688 2.688h-14.625c-1.438 0-2.688-1.25-2.688-2.688v-18.688c0-1.438 1.25-2.625 2.688-2.625h14.625zM21.313 1.313v2.688h-16v18.688h-2.625v-18.688c0-1.438 1.188-2.688 2.625-2.688h16z",fill:"currentColor"})],-1),nr={class:"vacp-color-inputs"},ir={class:"vacp-color-input-group uip-hidden"},sr=["for"],ar=a("span",{class:"vacp-color-input-label-text"}," Hex ",-1),lr=["id","value"],pr=["id","for","onInput"],dr={class:"vacp-color-input-label-text"},cr=["id","value","onInput"],ur=a("span",{class:"vacp-visually-hidden"},"Switch format",-1),fr=a("svg",{class:"vacp-icon","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"15"},[a("path",{d:"M8 15l5-5-1-1-4 2-4-2-1 1zm4-9l1-1-5-5-5 5 1 1 4-2z",fill:"currentColor"})],-1);var Me={__name:"ColorPicker",props:{color:{type:[String,Object],default:"#ffffffff"},id:{type:String,default:"color-picker"},visibleFormats:{type:Array,default:()=>ve,validator:e=>e.length>0&&e.every(t=>ve.includes(t))},defaultFormat:{type:String,default:"hsl",validator:e=>ve.includes(e)},alphaChannel:{type:String,default:"show",validator:e=>Kt.includes(e)}},emits:["color-change"],setup(e,{emit:t}){const r=e,n=H(null),o=H(null),i=H(null);let u=!1;const d=H(r.visibleFormats.includes(r.defaultFormat)?r.defaultFormat:r.visibleFormats[0]),s=re({hex:"#ffffffff",hsl:{h:0,s:0,l:1,a:1},hsv:{h:0,s:0,v:1,a:1},hwb:{h:0,w:1,b:0,a:1},rgb:{r:1,g:1,b:1,a:1}}),g=_e(function(){const l=Object.keys(s[d.value]);return d.value!=="hex"&&r.alphaChannel==="hide"?l.slice(0,3):l}),f=_e(function(){return r.alphaChannel==="hide"&&[5,9].includes(s.hex.length)?s.hex.substring(0,s.hex.length-(s.hex.length-1)/4):s.hex});function z(){const l=(r.visibleFormats.findIndex(p=>p===d.value)+1)%r.visibleFormats.length;d.value=r.visibleFormats[l]}function D(l){u=!0,oe(l)}function Ne(l){u=!0,ne(l)}function J(){u=!1}function oe(l){l.buttons===1&&u!==!1&&o.value instanceof HTMLElement&&xe(o.value,l.clientX,l.clientY)}function ne(l){if(u===!1||!(o.value instanceof HTMLElement))return;l.preventDefault();const p=l.touches[0];xe(o.value,p.clientX,p.clientY)}function xe(l,p,c){const v=function(C,ie,se){const L=C.getBoundingClientRect(),Oe=ie-L.left,je=se-L.top;return{x:L.width===0?0:E(Oe/L.width,0,1),y:L.height===0?0:E(1-je/L.height,0,1)}}(l,p,c),b=Y(s.hsv);b.s=v.x,b.v=v.y,$("hsv",b)}function Pe(l){if(!["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(l.key))return;l.preventDefault();const p=["ArrowLeft","ArrowDown"].includes(l.key)?-1:1,c=["ArrowLeft","ArrowRight"].includes(l.key)?"s":"v",v=l.shiftKey?10:1,b=s.hsv[c]+p*v*.01,C=Y(s.hsv);C[c]=E(b,0,1),$("hsv",C)}function we(l){const p=Wt(l);p!==null&&$(p.format,p.color)}function ye(l,p){const c=l.currentTarget,v=Y(s.hsv);v[p]=parseInt(c.value)/parseInt(c.max),$("hsv",v)}function Ee(l){const p=l.target;Ie(p.value)&&$("hex",p.value)}function Fe(l,p){const c=l.target,v=Y(s[d.value]),b=ge[d.value][p].from(c.value);Number.isNaN(b)||b===void 0||(v[p]=b,$(d.value,v))}function $(l,p){let c=p;if(r.alphaChannel==="hide")if(typeof p!="string")p.a=1,c=p;else if([5,9].includes(p.length)){const v=(p.length-1)/4;c=p.substring(0,p.length-v)+"f".repeat(v)}else[4,7].includes(p.length)&&(c=p+"f".repeat((p.length-1)/3));if(!function(v,b){if(typeof v=="string"||typeof b=="string")return v===b;for(const C in v)if(v[C]!==b[C])return!1;return!0}(s[l],c)){(function(b,C){s[b]=C;for(const[ie,se]of Jt[b])s[ie]=se(s[b])})(l,c);const v=function(){const b=r.alphaChannel==="hide",C=Ce(s[d.value],d.value,b);return{colors:s,cssColor:C}}();t("color-change",v)}(function(){n.value instanceof HTMLElement&&o.value instanceof HTMLElement&&i.value instanceof HTMLElement&&(n.value.style.setProperty("--vacp-hsl-h",String(s.hsl.h)),n.value.style.setProperty("--vacp-hsl-s",String(s.hsl.s)),n.value.style.setProperty("--vacp-hsl-l",String(s.hsl.l)),n.value.style.setProperty("--vacp-hsl-a",String(s.hsl.a)),o.value.style.position="relative",o.value.style.backgroundColor="hsl(calc(var(--vacp-hsl-h) * 360) 100% 50%)",o.value.style.backgroundImage="linear-gradient(to top, #000, transparent), linear-gradient(to right, #fff, transparent)",i.value.style.boxSizing="border-box",i.value.style.position="absolute",i.value.style.left=100*s.hsv.s+"%",i.value.style.bottom=100*s.hsv.v+"%")})()}async function $e(){const l=s[d.value],p=r.alphaChannel==="hide",c=Ce(l,d.value,p);await window.navigator.clipboard.writeText(c)}function Le(l,p){return ge[l][p].to(s[l][p])}function ke(l){if(!["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(l.key)||!l.shiftKey)return;const p=l.currentTarget,c=parseFloat(p.step),v=["ArrowLeft","ArrowDown"].includes(l.key)?-1:1,b=E(parseFloat(p.value)+v*c*10,parseInt(p.min),parseInt(p.max));p.value=String(b-v*c)}return Re(()=>r.color,we),ze(function(){document.addEventListener("mousemove",oe,{passive:!1}),document.addEventListener("touchmove",ne,{passive:!1}),document.addEventListener("mouseup",J),document.addEventListener("touchend",J),we(r.color)}),Ve(function(){document.removeEventListener("mousemove",oe),document.removeEventListener("touchmove",ne),document.removeEventListener("mouseup",J),document.removeEventListener("touchend",J)}),(l,p)=>(h(),x("div",{ref_key:"colorPicker",ref:n,class:"vacp-color-picker uip-flex uip-flex-column uip-row-gap-xs"},[a("div",{ref_key:"colorSpace",ref:o,class:"vacp-color-space uip-border-rounder uip-h-130 uip-w-100p",onMousedown:D,onTouchstart:Ne},[a("div",{ref_key:"thumb",ref:i,class:"vacp-color-space-thumb",tabindex:"0","aria-label":"Color space thumb",onKeydown:Pe},null,544)],544),a("div",Gt,[a("label",{class:"vacp-range-input-label vacp-range-input-label--hue",for:`${e.id}-hue-slider`},[a("span",Yt,[W(l.$slots,"hue-range-input-label",{},()=>[Q("Hue")])]),a("input",{id:`${e.id}-hue-slider`,class:"vacp-range-input vacp-range-input--hue",value:360*s.hsv.h,type:"range",min:"0",max:"360",step:"1",onKeydownPassive:ke,onInput:p[0]||(p[0]=c=>ye(c,"h"))},null,40,Qt)],8,Xt),e.alphaChannel==="show"?(h(),x("label",{key:0,class:"vacp-range-input-label vacp-range-input-label--alpha",for:`${e.id}-alpha-slider`},[a("span",er,[W(l.$slots,"alpha-range-input-label",{},()=>[Q("Alpha")])]),a("input",{id:`${e.id}-alpha-slider`,class:"vacp-range-input vacp-range-input--alpha",value:100*s.hsv.a,type:"range",min:"0",max:"100",step:"1",onKeydownPassive:ke,onInput:p[1]||(p[1]=c=>ye(c,"a"))},null,40,tr)],8,Zt)):P("v-if",!0)]),a("button",{class:"vacp-copy-button uip-hidden",type:"button",onClick:$e},[W(l.$slots,"copy-button",{},()=>[rr,or])]),a("div",nr,[a("div",ir,[d.value==="hex"?(h(),x("label",{key:0,class:"vacp-color-input-label",for:`${e.id}-color-hex`},[ar,a("input",{id:`${e.id}-color-hex`,class:"vacp-color-input",type:"text",value:f.value,onInput:Ee},null,40,lr)],8,sr)):(h(!0),x(te,{key:1},be(g.value,c=>(h(),x("label",{id:`${e.id}-color-${d.value}-${c}-label`,key:`${e.id}-color-${d.value}-${c}-label`,class:"vacp-color-input-label",for:`${e.id}-color-${d.value}-${c}`,onInput:v=>Fe(v,c)},[a("span",dr,_(c.toUpperCase()),1),a("input",{id:`${e.id}-color-${d.value}-${c}`,class:"vacp-color-input",type:"text",value:Le(d.value,c),onInput:v=>Fe(v,c)},null,40,cr)],40,pr))),128))]),e.visibleFormats.length>1?(h(),x("button",{key:0,class:"vacp-format-switch-button uip-hidden",type:"button",onClick:z},[W(l.$slots,"format-switch-button",{},()=>[ur,fr])])):P("v-if",!0)])],512))}};(function(e,t){t===void 0&&(t={});var r=t.insertAt;if(typeof document<"u"){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}})(".vacp-color-picker{--vacp-color:hsl(calc(var(--vacp-hsl-h)*360) calc(var(--vacp-hsl-s)*100%) calc(var(--vacp-hsl-l)*100%)/var(--vacp-hsl-a));--vacp-focus-color:#19f;--vacp-focus-outline:2px solid var(--vacp-focus-color);--vacp-border-width:1px;--vacp-border-color:#000;--vacp-border:var(--vacp-border-width) solid var(--vacp-border-color);--vacp-color-space-width:300px;--vacp-spacing:6px;grid-gap:var(--vacp-spacing);background-color:transparent;display:grid;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:.8em;max-width:var(--vacp-color-space-width)}.vacp-color-picker *,.vacp-color-picker :after,.vacp-color-picker :before{box-sizing:border-box}.vacp-color-picker button::-moz-focus-inner{border:none;padding:0}.vacp-color-picker :focus{outline:var(--vacp-focus-outline)}.vacp-color-space{grid-column:1/-1;height:calc(var(--vacp-color-space-width)*.6);overflow:hidden}.vacp-color-space-thumb{--vacp-thumb-size:calc(var(--vacp-spacing)*4);border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);height:var(--vacp-thumb-size);margin-bottom:calc(var(--vacp-thumb-size)*-1/2);margin-left:calc(var(--vacp-thumb-size)*-1/2);transform:rotate(0);width:var(--vacp-thumb-size)}.vacp-color-space-thumb:focus{box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color),0 0 0 3px var(--vacp-focus-color);outline-color:transparent}.vacp-range-input-label{--vacp-slider-track-width:100%;--vacp-slider-track-height:calc(var(--vacp-spacing)*3);display:block}.vacp-range-input-group{display:flex;flex-direction:column;justify-content:center}.vacp-range-input-group>:not(:first-child){margin-top:var(--vacp-spacing)}.vacp-range-input,.vacp-range-input::-webkit-slider-thumb{-webkit-appearance:none}.vacp-range-input{background:none;border:none;display:block;height:var(--vacp-slider-track-height);margin-bottom:calc(var(--vacp-spacing)/2 + 1px);margin-left:0;margin-right:0;margin-top:calc(var(--vacp-spacing)/2 + 1px);padding:0;width:var(--vacp-slider-track-width)}.vacp-range-input:focus{outline:none}.vacp-range-input::-moz-focus-outer{border:none}.vacp-range-input--alpha{background-color:#fff;background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee);background-position:0 0,var(--vacp-spacing) var(--vacp-spacing);background-size:calc(var(--vacp-spacing)*2) calc(var(--vacp-spacing)*2)}.vacp-range-input::-moz-range-track{border:var(--vacp-border);box-sizing:content-box;height:var(--vacp-slider-track-height);width:var(--vacp-slider-track-width)}.vacp-range-input::-webkit-slider-runnable-track{border:var(--vacp-border);box-sizing:content-box;height:var(--vacp-slider-track-height);width:var(--vacp-slider-track-width)}.vacp-range-input::-ms-track{border:var(--vacp-border);box-sizing:content-box;height:var(--vacp-slider-track-height);width:var(--vacp-slider-track-width)}.vacp-range-input:focus::-moz-range-track{outline:var(--vacp-focus-outline)}.vacp-range-input:focus::-webkit-slider-runnable-track{outline:var(--vacp-focus-outline)}.vacp-range-input:focus::-ms-track{outline:var(--vacp-focus-outline)}.vacp-range-input--alpha::-moz-range-track{background-image:linear-gradient(to right,transparent,var(--vacp-color))}.vacp-range-input--alpha::-webkit-slider-runnable-track{background-image:linear-gradient(to right,transparent,var(--vacp-color))}.vacp-range-input--alpha::-ms-track{background-image:linear-gradient(to right,transparent,var(--vacp-color))}.vacp-range-input--hue::-moz-range-track{background-image:linear-gradient(90deg,red 0,#ff0 16.66667%,#0f0 33.33333%,#0ff 50%,#00f 66.66667%,#f0f 83.33333%,red 100%)}.vacp-range-input--hue::-webkit-slider-runnable-track{background-image:linear-gradient(90deg,red 0,#ff0 16.66667%,#0f0 33.33333%,#0ff 50%,#00f 66.66667%,#f0f 83.33333%,red 100%)}.vacp-range-input--hue::-ms-track{background-image:linear-gradient(90deg,red 0,#ff0 16.66667%,#0f0 33.33333%,#0ff 50%,#00f 66.66667%,#f0f 83.33333%,red 100%)}.vacp-range-input::-moz-range-thumb{background-color:transparent;border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);box-sizing:content-box;height:var(--vacp-slider-track-height);isolation:isolate;width:var(--vacp-slider-track-height)}.vacp-range-input::-webkit-slider-thumb{background-color:transparent;border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);box-sizing:content-box;height:var(--vacp-slider-track-height);isolation:isolate;margin-top:calc((var(--vacp-spacing)/2)*-1);width:var(--vacp-slider-track-height)}.vacp-range-input::-ms-thumb{background-color:transparent;border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);box-sizing:content-box;height:var(--vacp-slider-track-height);isolation:isolate;margin-top:calc((var(--vacp-spacing)/2)*-1);width:var(--vacp-slider-track-height)}.vacp-copy-button{align-items:center;align-self:center;background-color:#fff;border:var(--vacp-border-width) solid transparent;border-radius:50%;display:flex;height:calc(var(--vacp-spacing)*6);justify-content:center;justify-self:center;overflow:hidden;position:relative;width:calc(var(--vacp-spacing)*6)}.vacp-copy-button:enabled:focus{border-color:var(--vacp-border-color);box-shadow:0 0 0 2px var(--vacp-focus-color);outline:none}.vacp-copy-button:enabled:hover{background-color:#0002}.vacp-color-inputs{align-items:center;display:flex;grid-column:1/-1}.vacp-color-inputs>:not(:first-child){margin-left:var(--vacp-spacing)}.vacp-color-input-group{column-gap:var(--vacp-spacing);display:grid;flex-grow:1;grid-auto-flow:column}.vacp-color-input-label{text-align:center}.vacp-color-input{border:var(--vacp-border);margin:0;margin-top:calc(var(--vacp-spacing)/2);text-align:center;width:100%}.vacp-color-input,.vacp-format-switch-button{background-color:#fff;color:inherit;font:inherit;padding:var(--vacp-spacing)}.vacp-format-switch-button{align-items:center;border:var(--vacp-border-width) solid transparent;border-radius:50%;display:flex;justify-content:center;margin:0}.vacp-format-switch-button:enabled:focus{border-color:var(--vacp-border-color)}.vacp-format-switch-button:enabled:hover{background-color:#0002}.vacp-visually-hidden{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.vacp-range-input-label{margin:0!important}.vacp-range-input{border-radius:var(--uip-border-radius-large);height:8px}.vacp-range-input::-webkit-slider-runnable-track{border:none!important;border-radius:var(--uip-border-radius-large);height:8px}.vacp-range-input--alpha{background:repeating-conic-gradient(#cccccd 0 25%,transparent 0 50%) 50%/8px 10px}.vacp-range-input::-webkit-slider-thumb{width:8px;height:8px;outline:grey 1px;box-shadow:0 0 0 1px var(--uip-border-color)}.vacp-color-space-thumb{--vacp-thumb-size:calc(var(--vacp-spacing)*2);border:2px solid #fff;border-radius:50%;box-shadow:0 0 0 1px var(--uip-border-color);height:12px;width:12px}"),Me.__file="src/ColorPicker.vue";const hr={components:{colorSelect:Me},props:{value:String,returnData:Function,args:Object},data(){return{color:this.value,opacity:100,dragging:!1,dontProcessVars:!1}},watch:{opacity:{handler(e,t){e||(this.opacity=0),e>100&&(this.opacity=100),e<0&&(this.opacity=0),this.updateOpacity()},deep:!0},value:{handler(){this.color=this.value}}},computed:{returnColor(){return this.color?this.color:"#b500ff"},colorFromVar(){if(this.dontProcessVars)return this.color;const e=this.uipApp.data.themeStyles,t=this.color.trim();if(t in e){const o=this.returnActiveMode,i=e[t][o];if(i)return i}const n=getComputedStyle(document.documentElement).getPropertyValue(t).trim();return n||"#b500ff"},returnActiveMode(){if(!this.uipApp.data.userPrefs.darkTheme)return"value";if(this.uipApp.data.userPrefs.darkTheme)return"darkValue"},hasEyeDropper(){return!!window.EyeDropper}},methods:{preventOverDrag(e){this.dragging=!0},allowColorReturn(e){this.dragging=!1,this.returnData(this.color)},setBackgroundColor(e){this.color=e.cssColor,this.setOpacity()},setOpacity(){if(!this.$refs.colorpicker)return"100";let e=this.$refs.colorpicker.querySelector("#color-picker-alpha-slider");if(e){let t=e.value;this.opacity=t}},updateOpacity(){if(!this.$refs.colorpicker||!this.opacity)return;let e=this.$refs.colorpicker.querySelector("#color-picker-alpha-slider");e&&(e.value=this.opacity,e.dispatchEvent(new Event("input",{bubbles:!0})))},startColorPicker(){new EyeDropper().open().then(t=>{this.color=t.sRGBHex})},processScreen(e){this.$emit("request-screen",e)},setColorFromVar(e){this.color=e.value,this.returnData(e.name)}},template:`
	  
		 
			`},mr={class:"",ref:"colorpicker"},vr={class:"uip-flex uip-gap-xs"},gr={class:"uip-flex uip-flex-center uip-background-muted uip-border-rounder uip-padding-xxs"},br=a("span",{class:"uip-text-s"},"%",-1);function xr(e,t,r,n,o,i){const u=w("colorSelect"),d=w("AppIcon");return h(),x("div",mr,[o.dragging?(h(),x("div",{key:0,onClick:t[0]||(t[0]=T(s=>o.dragging=!1,["stop","prevent"])),onMouseup:t[1]||(t[1]=T(s=>o.dragging=!1,["stop","prevent"])),style:{position:"fixed",left:"0",right:"0",top:"0",bottom:"0"}},null,32)):P("",!0),y(u,{color:i.returnColor,"default-format":"hex",onMouseup:i.allowColorReturn,onMousedown:i.preventOverDrag,onClick:t[2]||(t[2]=s=>o.dragging=!1),onColorChange:i.setBackgroundColor},null,8,["color","onMouseup","onMousedown","onColorChange"]),a("div",vr,[Z(a("input",{onInput:t[3]||(t[3]=s=>r.returnData(o.color)),class:"uip-input uip-flex-grow",type:"text",onFocus:t[4]||(t[4]=s=>o.dontProcessVars=!0),onBlur:t[5]||(t[5]=s=>o.dontProcessVars=!1),"onUpdate:modelValue":t[6]||(t[6]=s=>o.color=s),placeholder:"#4776cd"},null,544),[[ee,o.color]]),a("div",gr,[Z(a("input",{class:"uip-text-s uip-blank-input uip-w-30 uip-remove-steps",type:"number",min:"0",max:"100",step:"1","onUpdate:modelValue":t[7]||(t[7]=s=>o.opacity=s)},null,512),[[ee,o.opacity]]),br]),i.hasEyeDropper?(h(),x("button",{key:0,onClick:t[8]||(t[8]=(...s)=>i.startColorPicker&&i.startColorPicker(...s)),class:"uip-button-default uip-flex uip-flex-center uip-padding-xxs"},[y(d,{icon:"colorize",class:""})])):P("",!0)])],512)}const wr=R(hr,[["render",xr]]);import.meta.url.split("?ver=")[1];const S=document.querySelector("#uip-folder-app-data"),yr=S?S.getAttribute("uipress-lite"):!1,Fr=S?S.getAttribute("postType"):!1,kr=S?S.getAttribute("limitToAuthor"):!1,_r=S?S.getAttribute("limitToType"):!1,Dr=S?S.getAttribute("preferences"):"{}",Sr=S?S.getAttribute("ajax_url"):!1,Cr=S?S.getAttribute("security"):!1,m=Je(pt);m.component("content-folder",xt);m.component("NewFolder",At);m.component("loading-chart",He);m.component("dropdown",Ge);m.component("color-picker",wr);m.component("FolderApp",$t);m.component("Notify",Xe);m.component("ScreenControl",We);m.component("uipDraggable",Ke);m.component("ContextMenu",Ye);m.component("UpdateFolder",Vt);m.component("AppIcon",Qe);m.config.globalProperties.postType=Fr;m.config.globalProperties.limitToAuthor=kr;m.config.globalProperties.limitToType=_r;m.config.globalProperties.AjaxUrl=Sr;m.config.globalProperties.AjaxSecurity=Cr;m.config.globalProperties.sendServerRequest=Ze;m.config.globalProperties.uipApp=re({});m.config.globalProperties.isObject=et;m.config.globalProperties.createUID=tt;m.config.globalProperties.uipressLitePath=yr;m.config.globalProperties.hasNestedPath=rt;m.config.globalProperties.activeFolder=re({id:"all"});m.config.globalProperties.folderMove=re({handler:()=>{},showRemoveFromFolder:!1});m.config.globalProperties.userPreferences=ot(Dr);m.config.globalProperties.prepareJSON=nt;const Ar=document.querySelector("#uip-folder-app");Ar&&m.mount("#uip-folder-app");
